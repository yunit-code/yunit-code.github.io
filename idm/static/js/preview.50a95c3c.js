(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["preview"],{"5b0b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"idm_render_engine_container"},[a("div",{attrs:{id:"idm_render_engine_page_container"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogVisibleStatus,expression:"dialogVisibleStatus"}],staticClass:"idm_dialog_wrap_preview",attrs:{id:"idm_dialog_wrap",hideing:e.dialogIsHideing?"hideing":""}},e._l(e.dialogObjectList,(function(t,n){return a("div",{key:n,staticClass:"idm_dialog_shade_layer",class:"idm_dialog_shade_layer_"+t.packageid,attrs:{"dialog-id":t.packageid},on:{click:e.layerClickHandle}})})),0),a("div",{ref:"idm_page_root",staticClass:"idm_page_root",class:""+e.PageSettingData.id,attrs:{id:"PAGE_"+e.PageSettingData.id,"idm-com-anchor-id":e.PageSettingData.id}})]),a("a-drawer",{attrs:{title:e.pagePropData.drawerTitleShow?e.pagePropData.drawerTitle:"",placement:e.pagePropData.drawerPlacement||"right",closable:!1!==e.pagePropData.drawerClosable,destroyOnClose:e.pagePropData.drawerDestroyOnClose,maskClosable:!1!==e.pagePropData.drawerMaskClosable,mask:!1!==e.pagePropData.drawerMask,keyboard:!1!==e.pagePropData.drawerKeyboarde,maskStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerMaskStyleFunction")||{},wrapStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerWrapStyleFunction")||{},drawerStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerStyleFunction")||{},headerStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerHeaderStyleFunction")||{},bodyStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerBodyStyleFunction")||{},width:e.pagePropData.drawerWidth||256,height:e.pagePropData.drawerHeight||256,zIndex:e.pagePropData.drawerZIndex||1e3,wrapClassName:(e.pagePropData.drawerWrapClassName||"")+" idm_module_setting_drawer",visible:e.drawerVisible},on:{close:e.drawerOnClose,afterVisibleChange:e.drawerOnAfterVisibleChange}},[a("iframe",{staticClass:"idm_drawer_iframe_basestyle",attrs:{src:e.drawerIframeUrl,name:"idm_drawer_iframe"}})])],1)},o=[],i=a("6afb"),r=a("799e"),d=a("7da1"),l=a.n(d),c=(a("2c45"),a("1fbe"),a("f6be"),a("3d7e"),a("abd8"),a("c12c"),a("fd7d"),a("2283"),a("2261"),a("6e63"),a("8bbf")),s=a.n(c),u={fetchPageSettingDataForVersion:function(e){return e.savetype=IDM.setting.pageSchema.saveType,"disk"==IDM.setting.pageSchema.saveType&&e.version?IDM.http.get(IDM.setting.pageSchema.jsonDir.replace(/{projectNo}/g,e.projectNo||IDM.setting.webRoot.projectNo).replace(/{pageid}/g,e.pageid).replace(/{version}/g,e.version)):IDM.http.get(IDM.setting.api.pageSettingDataUrl||IDM.setting.mockurl.pageSettingDataUrl,e)},fetchApplicationInfo:function(e,t){return IDM.http.get(e,t)},fetchUserInfo:function(e,t){return IDM.http.get(e,t)},fetchThemeInfo:function(e,t){return IDM.http.get(e,t)},getPageInterfaceInfo:function(e,t){return IDM.http.get(e,t)},postPageInterfaceInfo:function(e,t,a){return IDM.http.post(e,t,a)}};s.a.prototype.$previewApi=u,s.a.prototype.$replace=function(e,t){return IDM.express.replace.call(this,e,t)},s.a.prototype.$eval=function(e,t){return IDM.express.eval.call(this,e,t)};var g={name:"Preview",components:{},data:function(){return{pageid:"",PageSettingData:{},dialogVisibleStatus:!1,dialogIsHideing:!1,dialogObjectList:[],drawerVisible:!1,drawerIframeUrl:"",drawerControlSetPanelOption:null,pagePropData:{}}},mounted:function(){this.windowResizeEvent((function(){IDM.broadcast.send({type:"pageResize",rangeModule:"",message:IDM.getClientWH()})}))},created:function(){var e=this;this.pageid=this.$route.params.pageid,"devpreview"==this.pageid?(this.PageSettingData=JSON.parse(window.localStorage["devpreview"]),this.pageid=this.PageSettingData.id,this.loadPageElement()):this.$previewApi.fetchPageSettingDataForVersion({pageid:this.pageid,version:""}).then((function(t){e.PageSettingData=t.data.data,e.loadPageElement()})),this.injectInnerActionToWindow()},methods:{windowResizeEvent:function(e){window.onresize=function(){var t=this;t.resizeFlag&&clearTimeout(t.resizeFlag),t.resizeFlag=setTimeout((function(){e(),t.resizeFlag=null}),100)}},drawerOnClose:function(){this.drawerVisible=!1,this.commonCustomEventFunHandle(null,"drawerCloseFunction")},drawerOnAfterVisibleChange:function(){this.commonCustomEventFunHandle(null,"drawerAfterVisibleChangeFunction")},beforeLoadingFunction:function(){var e=this.PageSettingData.page.layout.props.compositeAttr;e.beforeLoadingFunction&&e.beforeLoadingFunction.length>0&&this.commonCustomEventFunHandle(e,"beforeLoadingFunction")},afterLoadingFunction:function(){var e=this.PageSettingData.page.layout.props.compositeAttr;e.afterLoadingFunction&&e.afterLoadingFunction.length>0&&this.commonCustomEventFunHandle(e,"afterLoadingFunction")},layerClickHandle:function(e){var t=e.target.getAttribute("dialog-id");t&&this.IdmBuiltin_CloseDialog({targetModule:[{moduleId:t}]})},injectInnerActionToWindow:function(){window.IdmBuiltin_OpenControlSetPanel=this.IdmBuiltin_OpenControlSetPanel,window.IdmBuiltin_CloseControlSetPanel=this.IdmBuiltin_CloseControlSetPanel,window.IdmBuiltin_OpenUrl=this.IdmBuiltin_OpenUrl,window.IdmBuiltin_OpenDialog=this.IdmBuiltin_OpenDialog,window.IdmBuiltin_CloseDialog=this.IdmBuiltin_CloseDialog,window.IdmBuiltin_ShowModule=this.IdmBuiltin_ShowModule,window.IdmBuiltin_HideModule=this.IdmBuiltin_HideModule},IdmBuiltin_OpenControlSetPanel:function(e){var t=this.pagePropData.moduleControlCenterSettingUrl;if(t){if(t+=-1==t.indexOf("?")?"?":"&",e&&e.controlSetPanelOption){if(!(e.controlSetPanelOption.param&&e.controlSetPanelOption.param.marketModuleId&&e.controlSetPanelOption.param.pageId&&e.controlSetPanelOption.param.packageid))return;Object.keys(e.controlSetPanelOption.param).forEach((function(a,n){n>0&&(t+="&"),t=t+a+"="+e.controlSetPanelOption.param[a]}))}this.drawerIframeUrl=IDM.url.getWebPath(t),this.drawerControlSetPanelOption=e.controlSetPanelOption||null,this.drawerVisible=!0,this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.success&&this.drawerControlSetPanelOption.success(e.controlSetPanelOption.controlSetPanelId)}},IdmBuiltin_CloseControlSetPanel:function(e){if(e&&e.innerClose||e&&e.controlSetPanelOption&&e.controlSetPanelOption.controlSetPanelId&&this.drawerControlSetPanelOption&&e.controlSetPanelOption.controlSetPanelId==this.drawerControlSetPanelOption.controlSetPanelId)switch(this.drawerOnClose(),e.actionType){case"close":case"other":this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.other&&this.drawerControlSetPanelOption.other();break;case"commit":this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.yes&&this.drawerControlSetPanelOption.yes();break;case"reset":this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.reset&&this.drawerControlSetPanelOption.reset();break}},IdmBuiltin_OpenUrl:function(e){var t=e.customParam?e.customParam:e;window.open(IDM.url.getWebPath(t.openUrl),t.openName,t.openFeatures)},IdmBuiltin_OpenDialog:function(e){var t=this,a=e.customParam?e.customParam:e,n=[],o=0;if(a.targetModule.forEach((function(a){n.push(a.moduleId);var i=t.renderDialog(a.moduleId);!1!==i&&(i.dialogIsHideing=!1,e.layerOption&&(i.layerOption=e.layerOption),t.dialogObjectList.push(i),o++,$("#"+a.moduleId).css("display","flex"))})),0!=o){this.dialogVisibleStatus=!0,this.dialogIsHideing=!1;var i=this;this.$nextTick((function(){setTimeout((function(){i.sendBroadcastMessage({type:"linkageOpenDialog",message:e,rangeModule:n})}),5)})),e.callback&&e.callback()}},IdmBuiltin_CloseDialog:function(e){var t=this,a=e.customParam?e.customParam:e,n=[];a.targetModule.forEach((function(a){n.push(a.moduleId),t.dialogObjectList.forEach((function(t,n){t.packageid==a.moduleId&&(t.dialogIsHideing=!0,$(".idm_dialog_shade_layer_"+a.moduleId).attr("hideing","hideing"),t.layerOption&&t.layerOption.cancel&&t.layerOption.cancel(t),e.isOkEvent&&t.layerOption&&t.layerOption.yes&&t.layerOption.yes(t))}))})),this.dialogObjectList.length<=n.length&&(this.dialogIsHideing=!0);var o=this;o.sendBroadcastMessage({type:"linkageCloseDialog",message:e,rangeModule:n}),setTimeout((function(){a.targetModule.forEach((function(e){if($("#"+e.moduleId).css("display","none"),o.destroyDialog(e.moduleId),1!=o.dialogObjectList.length){var t=-1;o.dialogObjectList.forEach((function(a,n){a.packageid==e.moduleId&&(t=n,a.layerOption&&a.layerOption.end&&a.layerOption.end(a))})),t>-1&&o.dialogObjectList.splice(t,1)}else o.dialogObjectList=[]})),0==o.dialogObjectList.length&&(o.dialogVisibleStatus=!1,o.dialogIsHideing=!1)}),500),e.callback&&e.callback()},IdmBuiltin_ShowModule:function(e){var t=e.customParam?e.customParam:e,a=[];t.targetModule.forEach((function(e){a.push(e.moduleId),$("#"+e.moduleId).show()})),this.sendBroadcastMessage({type:"linkageShowModule",message:e,rangeModule:a}),e.callback&&e.callback()},IdmBuiltin_HideModule:function(e){var t=e.customParam?e.customParam:e,a=[];t.targetModule.forEach((function(e){a.push(e.moduleId),$("#"+e.moduleId).hide()})),this.sendBroadcastMessage({type:"linkageHideModule",message:e,rangeModule:a}),e.callback&&e.callback()},sendBroadcastMessage:function(e){window.IDM.broadcast&&window.IDM.broadcast.send(e)},initAppAndUserInfo:function(e){var t=this;return Object(r["a"])(l.a.mark((function a(){var n,o,r,d,c,s,u;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t,o=e.compositeAttr,!o.openFetchApplicationInfo||!o.applicationInfoUrl){a.next=5;break}return a.next=5,t.$previewApi.fetchApplicationInfo(o.applicationInfoUrl,Object(i["a"])({pageid:t.pageid},t.commonParam())).then((function(e){IDM.app.setAppInfo(e.data)})).catch((function(e){}));case 5:if(!o.openFetchUserInfo||!o.userInfoUrl){a.next=8;break}return a.next=8,t.$previewApi.fetchUserInfo(o.userInfoUrl,Object(i["a"])({pageid:t.pageid},t.commonParam())).then((function(e){IDM.user.setCurrentUserInfo(e.data)})).catch((function(e){}));case 8:if(r="",o.switchUserInfo&&o.switchUserInfoFiledName?(d=o.switchUserInfoFiledName,c="userObject",s={IDM:window.IDM},s[c]=IDM.user.getCurrentUserInfo(),d&&(d=c+(d.startsWiths("[")?"":".")+d,r=window.IDM.express.replace.call(t,"@["+d+"]",s))):o.switchUserInfo&&(r=IDM.user.getCurrentUserInfo()&&IDM.user.getCurrentUserInfo().data?IDM.user.getCurrentUserInfo().data.userid:""),o.switchUserInfo&&!r&&(o.loginPageUrl?window.location.href=IDM.url.getWebPath(o.loginPageUrl):window.location.href=""),!o.openIdmTheme||"customInterface"!=o.themeFetchType||!o.themeInterfaceUrl){a.next=16;break}return a.next=14,t.$previewApi.fetchThemeInfo(o.themeInterfaceUrl,Object(i["a"])({pageid:t.pageid},t.commonParam())).then((function(e){n.themeInterfaceHandle(e.data,"resultData")})).catch((function(e){}));case 14:a.next=17;break;case 16:o.openIdmTheme&&"customFunction"==o.themeFetchType&&o.themeCustomFunction&&o.themeCustomFunction.length>0&&(u="",o.themeCustomFunction.forEach((function(e){try{u=window[e.name]&&window[e.name].call(t,Object(i["a"])(Object(i["a"])({},t.commonParam()),{},{customParam:e.param,_this:n}))}catch(a){}})),IDM.theme.setCurrentThemeInfo(u));case 17:case"end":return a.stop()}}),a)})))()},themeInterfaceHandle:function(e,t){var a=this,n=this,o=this.PageSettingData.page.layout.props.compositeAttr,r=o.themeDataFiled,d=o.themeDataFunction,l=e;if(r){var c=r,s={IDM:window.IDM};s[t]=e,c&&(c=t+(c.startsWiths("[")?"":".")+c,l=window.IDM.express.replace.call(this,"@["+c+"]",s))}if(d&&d.length>0){var u=Object(i["a"])(Object(i["a"])({},n.commonParam()),{},{_this:n});u[t]=e,d.forEach((function(e){try{l=window[e.name]&&window[e.name].call(a,Object(i["a"])({customParam:e.param},u))}catch(t){}}))}IDM.theme.setCurrentThemeInfo(l)},loadPageElement:function(){var e=this;return Object(r["a"])(l.a.mark((function t(){var a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.PageSettingData.page.actions&&e.PageSettingData.page.actions.compiled&&(a=$('<script type="text/javascript" id="idm_page_script"/>'),$("body").append(a.html("var exports={};"+e.PageSettingData.page.actions.compiled))),e.PageSettingData.page.componentsMap.forEach((function(e){e.env="production"})),e.IDM.broadcast.registerModule(e.PageSettingData),document.title=e.PageSettingData.pageBaseInfo.title||"IDM预览",t.next=6,e.initAppAndUserInfo(e.PageSettingData.page.layout.props);case 6:e.beforeLoadingFunction(),e.pageAttrPropHandle(e.PageSettingData.page.layout.props),e.$nextTick((function(){this.initModuleTreeToPage(null,!0,this.PageSettingData.page.layout)}));case 9:case"end":return t.stop()}}),t)})))()},requestPageCommonInterfaceData:function(){if(this.IDM.broadcast.pageLoadCompleteAfter(),!this.isloadPageCommonInterface){this.isloadPageCommonInterface=!0,this.afterLoadingFunction();var e=(this.PageSettingData.page.layout.props.compositeAttr?this.PageSettingData.page.layout.props.compositeAttr.interfaceList:[])||[];if(0!=e.length){var t=this.pageid,a=[],n=[];this.PageSettingData.page.componentsMap.forEach((function(e){e.packageid!=t&&(a.push(e.packageid),n.push(e.comId))}));var o={idmPageId:t,moduleIds:a.join(","),componentIds:n.join(",")},i=IDM.url.queryObject();Object.keys(i).forEach((function(e){o[e]=i[e]})),this.orderlyRequestInterface(e,0,o)}}},orderlyRequestInterface:function(e,t,a){if(!(e.length<=t)){var n=e[t];t+=1;var o=this;if(n.preAllowFunction&&n.preAllowFunction.length>0)try{var r=Object(i["a"])(Object(i["a"])({},o.commonParam()),n.preAllowFunction[0].param),d=window[n.preAllowFunction[0].name]&&window[n.preAllowFunction[0].name].call(this,r);if(!1===d)return void o.orderlyRequestInterface(e,t,a)}catch(c){}if("post"==n.interfaceMode&&n.interfaceUrl){if(n.formDataFunction&&n.formDataFunction.length>0)try{r=Object(i["a"])(Object(i["a"])({},o.commonParam()),n.formDataFunction[0].param);var l=window[n.formDataFunction[0].name]&&window[n.formDataFunction[0].name].call(this,r);a=Object(i["a"])(Object(i["a"])({},a),l)}catch(c){}this.$previewApi.postPageInterfaceInfo(n.interfaceUrl,a,{headers:n.interfaceContentType?{"Content-Type":n.interfaceContentType||"application/json;charset=UTF-8"}:{}}).then((function(i){o.callbackModuleSetContext(n,i.data),o.orderlyRequestInterface(e,t,a)})).catch((function(n){o.orderlyRequestInterface(e,t,a)}))}else"get"==n.interfaceMode&&n.interfaceUrl?this.$previewApi.getPageInterfaceInfo(n.interfaceUrl,a).then((function(i){o.callbackModuleSetContext(n,i.data),o.orderlyRequestInterface(e,t,a)})).catch((function(n){o.orderlyRequestInterface(e,t,a)})):o.orderlyRequestInterface(e,t,a)}},callbackModuleSetContext:function(e,t){var a=this;if(this.PageSettingData.page.componentsMap.forEach((function(a){a.idmSetContextValue&&a.idmSetContextValue({type:"pageCommonInterface",key:e.resultDataName,data:t})})),e.interfaceRunLaterFunction&&e.interfaceRunLaterFunction.length>0){var n=e.interfaceRunLaterFunction;n.forEach((function(e){try{window[e.name]&&window[e.name].call(a,Object(i["a"])(Object(i["a"])({},a.commonParam()),{},{customParam:e.param,resultData:t,_this:a}))}catch(n){}}))}var o=this.PageSettingData.page.layout.props.compositeAttr||{};o.openIdmTheme&&"pageInterfaceResult"==o.themeFetchType&&o.themeDataName&&e.resultDataName==o.themeDataName&&this.themeInterfaceHandle(t,o.themeDataName)},pageAttrPropHandle:function(e){var t=e.compositeAttr;this.pagePropData=t;var a={};for(var n in t.bgSize&&"custom"==t.bgSize?a["background-size"]=(t.bgSizeWidth?t.bgSizeWidth.inputVal+t.bgSizeWidth.selectVal:"auto")+" "+(t.bgSizeHeight?t.bgSizeHeight.inputVal+t.bgSizeHeight.selectVal:"auto"):t.bgSize&&(a["background-size"]=t.bgSize),t.positionX&&t.positionX.inputVal&&(a["background-position-x"]=t.positionX.inputVal+t.positionX.selectVal),t.positionY&&t.positionY.inputVal&&(a["background-position-y"]=t.positionY.inputVal+t.positionY.selectVal),t)if(t.hasOwnProperty.call(t,n)){var o=t[n];if(!o&&!1!==o)continue;switch(n){case"width":case"height":a[n]=o;break;case"bgColor":o.hex8&&(a["background-color"]=o.hex8);break;case"box":o.marginTopVal&&(a["margin-top"]="".concat(o.marginTopVal)),o.marginRightVal&&(a["margin-right"]="".concat(o.marginRightVal)),o.marginBottomVal&&(a["margin-bottom"]="".concat(o.marginBottomVal)),o.marginLeftVal&&(a["margin-left"]="".concat(o.marginLeftVal)),o.paddingTopVal&&(a["padding-top"]="".concat(o.paddingTopVal)),o.paddingRightVal&&(a["padding-right"]="".concat(o.paddingRightVal)),o.paddingBottomVal&&(a["padding-bottom"]="".concat(o.paddingBottomVal)),o.paddingLeftVal&&(a["padding-left"]="".concat(o.paddingLeftVal));break;case"bgImgUrl":a["background-image"]="url(".concat(IDM.url.getWebPath(o),")");break;case"icoImgUrl":var i=document.createElement("link");i.type="image/x-icon",i.rel="shortcut icon",i.href=IDM.url.getWebPath(o),document.getElementsByTagName("head")[0].appendChild(i);break;case"positionX":break;case"positionY":break;case"bgRepeat":a["background-repeat"]=o;break;case"bgAttachment":a["background-attachment"]=o;break;case"border":o.border.top.width>0&&(a["border-top-width"]=o.border.top.width+o.border.top.widthUnit,a["border-top-style"]=o.border.top.style,o.border.top.colors.hex8&&(a["border-top-color"]=o.border.top.colors.hex8)),o.border.right.width>0&&(a["border-right-width"]=o.border.right.width+o.border.right.widthUnit,a["border-right-style"]=o.border.right.style,o.border.right.colors.hex8&&(a["border-right-color"]=o.border.right.colors.hex8)),o.border.bottom.width>0&&(a["border-bottom-width"]=o.border.bottom.width+o.border.bottom.widthUnit,a["border-bottom-style"]=o.border.bottom.style,o.border.bottom.colors.hex8&&(a["border-bottom-color"]=o.border.bottom.colors.hex8)),o.border.left.width>0&&(a["border-left-width"]=o.border.left.width+o.border.left.widthUnit,a["border-left-style"]=o.border.left.style,o.border.left.colors.hex8&&(a["border-left-color"]=o.border.left.colors.hex8)),a["border-top-left-radius"]=o.radius.leftTop.radius+o.radius.leftTop.radiusUnit,a["border-top-right-radius"]=o.radius.rightTop.radius+o.radius.rightTop.radiusUnit,a["border-bottom-left-radius"]=o.radius.leftBottom.radius+o.radius.leftBottom.radiusUnit,a["border-bottom-right-radius"]=o.radius.rightBottom.radius+o.radius.rightBottom.radiusUnit;break;case"font":a["font-family"]=o.fontFamily,o.fontColors.hex8&&(a["color"]=o.fontColors.hex8),a["font-weight"]=o.fontWeight&&o.fontWeight.split(" ")[0],a["font-style"]=o.fontStyle,a["font-size"]=o.fontSize+o.fontSizeUnit,a["line-height"]=o.fontLineHeight+("-"==o.fontLineHeightUnit?"":o.fontLineHeightUnit),a["text-align"]=o.fontTextAlign,a["text-decoration"]=o.fontDecoration;break;case"layout":o.display&&"flex"==o.display?(a["display"]="flex",o.direction&&(a["flex-direction"]=o.direction),o.direction&&(a["align-items"]=o.align),o.direction&&(a["justify-content"]=o.justify)):o.display&&(a["display"]=o.display);break;case"pageMinWidth":o.inputVal&&o.selectVal&&(a["min-width"]=o.inputVal+o.selectVal);break}}this.$nextTick((function(e){if(t.watermarkType&&"none"!=t.watermarkType){var a=this.$replace(t.watermarkFont,{IDM:IDM}),n=this.$replace(t.watermarkFont1,{IDM:IDM});IDM.watermark.set(this.$refs.idm_page_root,t.watermarkZindex,"font"!=t.watermarkType?t.watermarkImg:a,"image"==t.watermarkType?"":n,{fontColor:t.watermarkColor&&t.watermarkColor.hex8,fontSize:"".concat(t.watermarkFontSize,"px"),width:t.watermarkSize,height:t.watermarkSize,rotate:t.watermarkRotate,imgSize:t.watermarkImgSize,imgLeftSize:t.watermarkImgLeftSize,fontLeftSize:t.watermarkFontLeftSize,opacity:t.watermarkOpacity/100,topSize:t.watermarkTopSize})}else IDM.watermark.close(this.$refs.idm_page_root)})),IDM.setStyleToPageHead("PAGE_"+this.PageSettingData.id,a),t.resourceList&&t.resourceList.length>0&&t.resourceList.forEach((function(e){"js"==e.resourceType?IDM.module.loadJs(IDM.url.getWebPath(e.resourceUrl),!0,(function(){}),{async:e.async,defer:e.defer}):IDM.module.loadCss(IDM.url.getWebPath(e.resourceUrl),!0,(function(){}))}))},renderDialog:function(e){var t=this.getModuleTree(this.PageSettingData.page.layout.children,e);if(!t)return!1;if("firstrender"==t.renderType||"activerender"==t.renderType){if(t.renderLicence=!0,"firstrender"==t.renderType&&t.loaded)return _.cloneDeep(t);this.IDM.broadcast.pageModuleLoadCompleteBefore(),this.resetLayoutInnerModuleLoadedStatus(t),this.initModuleTreeToPage(t)}return _.cloneDeep(t)},destroyDialog:function(e){var t=this.getModuleTree(this.PageSettingData.page.layout.children,e);t&&"activerender"==t.renderType&&$("#"+e).remove()},initModuleTreeToPage:function(e,t,a,n){var o,i=this;if(e=e||i.PageSettingData.page.layout.children,e instanceof Array||(e=[e]),e.forEach((function(e){if("dialog"==e.comType&&!0!==e.renderLicence){var t=e.props.compositeAttr.dialogRenderType;if(e.renderType=t,e.renderLicence=!("firstrender"==t||"activerender"==t),!e.renderLicence)return}e.loaded||o||(o=e,e.loaded=!0)})),o){var r=o;r.mountComplete=this.moduleMountComplete,r.moduleReload=this.moduleReload;var d=i.createModuleDom(r),l="";if("dialog"==r.comType)l=i.PageSettingData.id,$("#idm_dialog_wrap").append(d);else if(n)l=n,$("#"+l).after(d);else if(t&&a)if(l=a.packageid,l==i.PageSettingData.id)$("#PAGE_"+l).append(d);else{var c=$("#"+l);c.removeClass("drag_container_empty");var s=c.find(">*[idm-ctrl]");if(s.show(),r.containerIndex||"0"==r.containerIndex){var u=s.find(".drag_container[idm-ctrl-id='"+a.id+"'][idm-container-index="+r.containerIndex+"]");u&&u.append(d),u&&u.removeClass("drag_container_empty")}else s.append(d)}r.env="production",i.IDM.module.addModuleToQueue(r)}else e.forEach((function(e){("dialog"!=e.comType||e.renderLicence)&&e.children&&e.children.length>0&&i.initModuleTreeToPage(e.children,!0,e)}));return o},pageModuleDataIsLoaded:function(e,t){var a=this,n=this,o=!0;return e=e||n.PageSettingData.page.layout.children,e instanceof Array||(e=[e]),e.forEach((function(e){("dialog"!=e.comType||e.renderLicence)&&(e.loaded||(o=!1))})),o&&e.forEach((function(e){("dialog"!=e.comType||e.renderLicence)&&e.children&&e.children.length>0&&o&&(o=a.pageModuleDataIsLoaded(e.children,t))})),o},createModuleDom:function(e){e.packageid=e.packageid||"component_"+IDM.UUID(),e.id=e.id||e.packageid+"_inner";var t=$("<div />");return t.attr("id",e.packageid),t.attr("idm-com-anchor-id",e.packageid),t.attr("idm-com-id",e.comId),t.attr("idm-com-classid",e.classId),t.attr("idm-com-classname",e.className),t.addClass("idm_module"),t.addClass(e.packageid),t.append($("<div />").attr("id",e.id)),t},getModuleTree:function(e,t){var a,n=this;return e instanceof Array||(e=[e]),e.forEach((function(e){e.packageid==t?a=e:!a&&e.children&&(a=n.getModuleTree(e.children,t))})),a},moduleReload:function(e,t){var a,n=this.getModuleTree(this.PageSettingData.page.layout.children,e),o=[n];if(t||"0"==t)o=[],n&&n.children&&n.children.forEach((function(e){e.containerIndex==t&&o.push(e)})),a=n;else{var i=n.globalId.split("."),r=i.length<=2?i[0]:i[i.length-2];a=this.getModuleTree(this.PageSettingData.page.layout.children,r)}this.resetLayoutInnerModuleLoadedStatus(o),o&&o.forEach((function(e){$("#"+e.packageid).remove()})),this.initModuleTreeToPage(o,!0,a,!1)},moduleMountComplete:function(e){var t=this;this.PageSettingData.page.componentsMap.forEach((function(t){t.packageid==e.packageid&&(t.idmBroadcastMessage=e.idmBroadcastMessage,t.idmSetContextValue=e.idmSetContextValue,t.idmGetContextValue=e.idmGetContextValue)}));var a=this.getModuleTree(this.PageSettingData.page.layout.children,e.packageid);if(a.children&&a.children.length>0){var n=$("#"+e.packageid);if(0==n.find(":visible").length)var o=0,i=setInterval((function(){o++,0==$("#"+e.packageid).find(":visible").length&&o<=20||(clearInterval(i),t.moduleMountCompleteCommon(e))}),5);else setTimeout((function(){t.moduleMountCompleteCommon(e)}),3)}else setTimeout((function(){t.moduleMountCompleteCommon(e)}),3)},moduleMountCompleteCommon:function(e){var t=$("#"+e.packageid),a=t.find(">*[idm-ctrl]"),n=a.attr("idm-ctrl"),o=a.attr("idm-ctrl-id"),i=a.attr("id");switch(i||a.attr("id",o),n){case"drag_container":t.addClass("drag_container");break;case"drag_container_inlineblock":t.addClass("drag_container drag_container_inlineblock");break;case"idm_module":break}this.pageModuleDataIsLoaded(null,!0)?this.requestPageCommonInterfaceData():this.$nextTick((function(){this.initModuleTreeToPage(null,!0,this.PageSettingData.page.layout)}))},initModuleInnerEventHandle:function(e){var t=$("#"+e.packageid),a=t.find(".drag_container[idm-ctrl-id='"+e.id+"'][idm-ctrl-inner]");if(a.length>0){var n=this.getModuleTree(this.PageSettingData.page.layout.children,e.packageid);this.resetLayoutInnerModuleLoadedStatus(n.children),n.children&&n.children.length>0&&(n.children.forEach((function(e){$("#"+e.packageid).remove()})),this.initModuleTreeToPage(n.children,!0,n))}},resetLayoutInnerModuleLoadedStatus:function(e){var t=this;e instanceof Array||(e=[e]),e.forEach((function(e){delete e.loaded,e.children&&e.children.length>0&&t.resetLayoutInnerModuleLoadedStatus(e.children)}))},commonCustomEventFunHandle:function(e,t){var a=this,n=this;e=e||this.pagePropData;var o,r=e[t];return r&&r.forEach((function(e){o=window[e.name]&&window[e.name].call(a,Object(i["a"])(Object(i["a"])({},n.commonParam()),{},{customParam:e.param,_this:n}))})),o},commonParam:function(){var e=IDM.url.queryObject(),t={pageId:window.IDM.broadcast&&window.IDM.broadcast.pageModule?window.IDM.broadcast.pageModule.id:"",urlData:JSON.stringify(e)};return t}}},p=g,m=(a("a081"),a("cba8")),h=Object(m["a"])(p,n,o,!1,null,null,null);t["default"]=h.exports},"799e":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("2c45");function n(e,t,a,n,o,i,r){try{var d=e[i](r),l=d.value}catch(c){return void a(c)}d.done?t(l):Promise.resolve(l).then(n,o)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(o,i){var r=e.apply(t,a);function d(e){n(r,o,i,d,l,"next",e)}function l(e){n(r,o,i,d,l,"throw",e)}d(void 0)}))}}},"7da1":function(e,t,a){e.exports=a("e186")},a081:function(e,t,a){"use strict";a("fe54")},fe54:function(e,t,a){}}]);
//# sourceMappingURL=preview.50a95c3c.js.map