(window["idmcore_webpackJsonp"]=window["idmcore_webpackJsonp"]||[]).push([["preview"],{"1da1":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("d3b7");function n(e,t,a,n,o,i,r){try{var s=e[i](r),c=s.value}catch(l){return void a(l)}s.done?t(c):Promise.resolve(c).then(n,o)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(o,i){var r=e.apply(t,a);function s(e){n(r,o,i,s,c,"next",e)}function c(e){n(r,o,i,s,c,"throw",e)}s(void 0)}))}}},"5b0b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"idm_render_engine_container"},[a("transition-group",{staticClass:"idm_render_engine_router_container",attrs:{tag:"div",name:"slide-fade"},on:{"after-enter":e.transitionAfterEnter}},[e._l(e.AppPageList,(function(t,n){return[t.keep?a("Page",{key:t.pageid+n,ref:"idm_page_"+t.routerId,refInFor:!0,tag:"component",attrs:{styleObject:!1===t.display?{display:"none"}:{},pageid:t.pageid,routerId:t.routerId,devpreview:t.devpreview,mainPage:t.mainPage,index:n},on:{mainPageSettingHandle:e.mainPageSettingHandle}}):e._e()]}))],2),a("idm-a-drawer",{attrs:{title:e.pagePropData.drawerTitleShow?e.pagePropData.drawerTitle:"",placement:e.pagePropData.drawerPlacement||"right",closable:!1!==e.pagePropData.drawerClosable,destroyOnClose:e.pagePropData.drawerDestroyOnClose,maskClosable:!1!==e.pagePropData.drawerMaskClosable,mask:!1!==e.pagePropData.drawerMask,keyboard:!1!==e.pagePropData.drawerKeyboarde,maskStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerMaskStyleFunction")||{},wrapStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerWrapStyleFunction")||{},drawerStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerStyleFunction")||{},headerStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerHeaderStyleFunction")||{},bodyStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerBodyStyleFunction")||{},width:e.pagePropData.drawerWidth||256,height:e.pagePropData.drawerHeight||256,zIndex:e.pagePropData.drawerZIndex||1e3,wrapClassName:(e.pagePropData.drawerWrapClassName||"")+" idm_module_setting_drawer",visible:e.drawerVisible},on:{close:e.drawerOnClose,afterVisibleChange:e.drawerOnAfterVisibleChange}},[a("iframe",{staticClass:"idm_drawer_iframe_basestyle",attrs:{src:e.drawerIframeUrl,name:"idm_drawer_iframe"}})])],1)},o=[],i=a("5530"),r=a("1da1"),s=(a("a434"),a("159b"),a("b64b"),a("1276"),a("ac1f"),a("b0c0"),a("a34a")),c=a.n(s),l=(a("5319"),a("8bbf")),d=a.n(l),p={fetchPageSettingDataForVersion:function(e){return e.savetype=IDM.setting.pageSchema.saveType,"disk"==IDM.setting.pageSchema.saveType&&e.version?IDM.http.get(IDM.setting.pageSchema.jsonDir.replace(/{projectNo}/g,e.projectNo||IDM.setting.webRoot.projectNo).replace(/{pageid}/g,e.pageid).replace(/{version}/g,e.version)):IDM.http.get(IDM.setting.api.pageSettingDataUrl||IDM.setting.mockurl.pageSettingDataUrl,e)},fetchApplicationInfo:function(e,t){return IDM.http.get(e,t)},fetchUserInfo:function(e,t){return IDM.http.get(e,t)},fetchUserCustomizationInfo:function(e,t){return IDM.http.get(e,t)},fetchThemeInfo:function(e,t){return IDM.http.get(e,t)},getPageInterfaceInfo:function(e,t){return IDM.http.get(e,t)},postPageInterfaceInfo:function(e,t,a){return IDM.http.post(e,t,a)}};d.a.prototype.$previewApi=p,d.a.prototype.$replace=function(e,t){return IDM.express.replace.call(this,e,t)},d.a.prototype.$eval=function(e,t){return IDM.express.eval.call(this,e,t)};var u={props:{},data:function(){return{}},watch:{},methods:{themeInterfaceHandle:function(e,t){var a=this,n=this,o=this.PageSettingData.page.layout.props.compositeAttr,r=o.themeDataFiled,s=o.themeDataFunction,c=e;if(r){var l=r,d={IDM:window.IDM};d[t]=e,l&&(l=t+(l.startsWiths("[")?"":".")+l,c=window.IDM.express.replace.call(this,"@["+l+"]",d))}if(s&&s.length>0){var p=Object(i["a"])(Object(i["a"])({},n.commonParam()),{},{_this:n});p[t]=e,s.forEach((function(e){try{c=window[e.name]&&window[e.name].call(a,Object(i["a"])({customParam:e.param},p))}catch(t){}}))}n.mainPage&&IDM.theme.setCurrentThemeInfo(c),n.themeSetObject=c},setCurrentPageTitle:function(e){var t=this;if(document.title=IDM.express.replace(this.PageSettingData.pageBaseInfo.title||IDM.setting.applications.defaultTitle,Object(i["a"])({IDM:IDM,window:window},this.pageInterfaceResultObject)),this.mainPage&&e&&IDM.setting.applications.pageDynamicHeadMetaConfig&&IDM.setting.applications.pageDynamicHeadMetaConfig.length)try{for(var a=function(e){var a=IDM.setting.applications.pageDynamicHeadMetaConfig[e];o=document.createElement("meta"),Object.keys(a).forEach((function(e){var n=IDM.express.replace(a[e],Object(i["a"])({IDM:IDM,window:window},t.pageInterfaceResultObject));o.setAttribute(e,n)})),document.head.appendChild(o)},n=0;n<IDM.setting.applications.pageDynamicHeadMetaConfig.length;n++){var o;a(n)}}catch(r){console.error(r)}},svgComponentPropsHandle:function(e,t){var a=this,n=t&&t.props.compositeAttr?t.props.compositeAttr:{};e.attr("title",n.title),e.bind("click",(function(e){a.commonCustomEventFunHandle(n,"clickFunction")}))},commonCustomEventFunHandle:function(e,t,a){var n=this,o=this;e=e||this.pagePropData;var r,s=e[t],c=Object(i["a"])(Object(i["a"])({},o.commonParam()),{},{_this:o});return a&&(c=Object(i["a"])(Object(i["a"])({},c),a)),s&&s.forEach((function(e){r=window[e.name]&&window[e.name].call(n,Object(i["a"])(Object(i["a"])({},c),{},{customParam:e.param}))})),r},commonParam:function(){var e=IDM.url.queryObject(),t={pageId:window.IDM.broadcast&&window.IDM.broadcast.pageModule?window.IDM.broadcast.pageModule.id:"",urlData:JSON.stringify(e)};return t},sendBroadcastMessage:function(e,t){window.IDM.broadcast&&window.IDM.broadcast.send(e,t||"")},deleteLayoutAttachAttr:function(e){var t=this;e instanceof Array||(e=[e]),e.forEach((function(e){delete e.env,delete e.hasLoading,delete e.loaded,delete e.loading,delete e.moduleReload,delete e.mountComplete,delete e.props,delete e.routerId,e.children&&e.children.length>0&&t.deleteLayoutAttachAttr(e.children)}))}},mounted:function(){}},g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"idm_render_engine_page_container idm_page_box",class:e.IDM.setting.applications.themeNamePrefix+("object"===typeof e.themeSetObject?JSON.stringify(e.themeSetObject):e.themeSetObject),style:Object.assign({},{zIndex:e.index},e.styleObject,e.containerStyleObject),attrs:{id:"router_page_"+e.routerId,"data-pageid":e.pageid}},[a("div",{staticClass:"idm_render_engine_page_content",style:e.contentStyleObject},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogVisibleStatus,expression:"dialogVisibleStatus"}],staticClass:"idm_dialog_wrap_preview",attrs:{id:"idm_dialog_wrap_"+e.routerId,hideing:e.dialogIsHideing?"hideing":""}},e._l(e.dialogObjectList,(function(t,n){return a("div",{key:n,staticClass:"idm_dialog_shade_layer",class:"idm_dialog_shade_layer_"+t.packageid,attrs:{"dialog-id":t.packageid},on:{click:function(a){return e.layerClickHandle(t,a)}}})})),0),a("div",{staticClass:"idm_hover_layer_wrap_preview",attrs:{id:"idm_hover_layer_wrap"}}),a("div",{ref:"idm_page_root",staticClass:"idm_page_root",class:""+e.PageSettingData.id,attrs:{id:"PAGE_"+e.PageSettingData.id+"_"+e.routerId,"idm-com-anchor-id":e.PageSettingData.id}})]),a("transition",{attrs:{name:"idm_page_user_defined_topbar"}},[e.pageUserDefinedStatus&&e.hiddenCustomizationToolBar?a("div",{staticClass:"idm_page_user_defined_topbar"},[a("div",{staticClass:"idm_page_user_defined_logo"},[a("svg",{staticClass:"user-defined-logo-svg",attrs:{t:"1659591467192",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1396",width:"32",height:"32"}},[a("path",{attrs:{d:"M727.008 487.232l194.016-184.32a99.2 99.2 0 0 0 0-140.288l-48.416-48.416a99.2 99.2 0 0 0-138.464-1.76L544.64 292.384l-184.064-196.64-1.504-1.568a64.832 64.832 0 0 0-91.712-0.384L129.184 231.968a64.8 64.8 0 0 0-1.12 90.144l181.344 193.728-171.456 162.88a99.264 99.264 0 0 0-28.256 49.28l-28.992 123.744a65.632 65.632 0 0 0 82.4 77.92l119.296-35.136a99.744 99.744 0 0 0 40.32-23.232l169.056-160.608 203.616 217.536 1.504 1.568a64.832 64.832 0 0 0 91.712 0.384l138.176-138.176a64.8 64.8 0 0 0 1.12-90.144l-200.896-214.624zM319.424 786.176l-90.112-90.112a31.488 31.488 0 0 0-9.792-6.496L667.104 264.352l94.272 94.272c1.408 1.408 3.168 2.08 4.768 3.168L319.424 786.176zM778.208 158.784a35.2 35.2 0 0 1 49.12 0.64l48.416 48.416c13.76 13.76 13.76 36.032-0.64 50.4l-64.448 61.216c-1.28-2.08-2.24-4.288-4.064-6.112l-93.12-93.12 64.736-61.44zM288.512 399.904c8-0.128 16-3.168 22.112-9.28l48-48a31.968 31.968 0 1 0-45.248-45.248l-48 48a31.68 31.68 0 0 0-8.928 20.256L174.816 278.4c-0.512-0.512-0.512-1.024-0.352-1.152L312.64 139.04c0.128-0.128 0.672-0.128 1.248 0.416l184.384 196.992-142.432 135.328-67.328-71.872zM145.024 868.288a1.6 1.6 0 0 1-2.016-1.92l28.992-123.744c0.992-4.16 2.944-7.968 5.312-11.488a31.808 31.808 0 0 0 6.752 10.144l88.288 88.288a35.072 35.072 0 0 1-8 3.552l-119.328 35.168z m598.336 16.672c-0.128 0.128-0.672 0.128-1.248-0.416l-125.6-134.176a31.232 31.232 0 0 0 14.08-7.712l48-48a31.968 31.968 0 1 0-45.248-45.248l-48 48a31.68 31.68 0 0 0-7.296 11.904l-39.904-42.656 142.432-135.328 200.576 214.304c0.48 0.512 0.48 1.024 0.352 1.152l-138.144 138.176z","p-id":"1397"}})]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("自定义工作台")]),e.pagePropData.switchUserCustomizationCommutant?e._e():a("svg",{staticClass:"fold-svg",style:{transform:"rotate("+(e.openUserCustomizationLeftBar?180:0)+"deg)"},attrs:{t:"1659592354438",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"17129",width:"24",height:"24"},on:{click:function(t){e.openUserCustomizationLeftBar=!e.openUserCustomizationLeftBar}}},[a("path",{attrs:{d:"M130.901333 529.493333l149.205334 130.517334a8.533333 8.533333 0 0 0 14.122666-6.4V392.533333a8.533333 8.533333 0 0 0-14.122666-6.4L130.901333 516.608a8.533333 8.533333 0 0 0 0 12.8z","p-id":"17130"}}),a("path",{attrs:{d:"M128 213.333333m42.666667 0l682.666666 0q42.666667 0 42.666667 42.666667l0 0q0 42.666667-42.666667 42.666667l-682.666666 0q-42.666667 0-42.666667-42.666667l0 0q0-42.666667 42.666667-42.666667Z","p-id":"17131"}}),a("path",{attrs:{d:"M128 725.333333m42.666667 0l682.666666 0q42.666667 0 42.666667 42.666667l0 0q0 42.666667-42.666667 42.666667l-682.666666 0q-42.666667 0-42.666667-42.666667l0 0q0-42.666667 42.666667-42.666667Z","p-id":"17132"}}),a("path",{attrs:{d:"M384 469.333333m42.666667 0l426.666666 0q42.666667 0 42.666667 42.666667l0 0q0 42.666667-42.666667 42.666667l-426.666666 0q-42.666667 0-42.666667-42.666667l0 0q0-42.666667 42.666667-42.666667Z","p-id":"17133"}})])]),a("div",{staticClass:"idm_page_user_defined_tip"},[e._v(" "+e._s(e.pagePropData.switchUserCustomizationCommutant?"当前模式只支持组件位置对调，您可以移动组svgComponentPropsHandle件进行组件换位等操作":"您可以对可调整的卡片组件进行移动、添加、删除等操作")+" ")]),a("div",[a("idm-a-button",{attrs:{loading:e.userDefinedSaveLoading,type:"primary"},on:{click:e.userDefinedSave}},[e._v("保 存")]),a("idm-a-button",{staticStyle:{margin:"auto 10px"},on:{click:e.userDefinedQuit}},[e._v("退出编辑")]),a("idm-a-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:e.userDefinedSaveLoading},on:{click:e.userDefinedReset}},[e._v("重置")])],1)]):e._e()]),a("transition",{attrs:{name:"idm_page_user_defined_leftbar"}},[e.pageUserDefinedStatus&&e.openUserCustomizationLeftBar&&e.hiddenCustomizationToolBar?a("div",{staticClass:"idm_page_user_defined_leftbar"},e._l(e.originalUserCustomizationModuleObject.children,(function(t,n){return a("div",{key:n,staticClass:"idm_page_user_defined_allmodule_item",class:!0!==t.hidden?"hover-show-remove":""},[a("span",{attrs:{title:t.props&&t.props.basicAttr&&t.props.basicAttr.title||t.props&&t.props.compositeAttr&&t.props.compositeAttr.title||t.asName}},[e._v(" "+e._s(t.props&&t.props.basicAttr&&t.props.basicAttr.title||t.props&&t.props.compositeAttr&&t.props.compositeAttr.title||t.asName)+" ")]),a("div",{staticClass:"idm_page_user_defined_allmodule_item_op",attrs:{title:!0===t.hidden?"添加组件":"移除组件"}},[!0!==t.hidden?a("svg",{staticClass:"user-defined-selected-svg",attrs:{t:"1659636928260",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9243",width:"18",height:"18"}},[a("path",{attrs:{d:"M944.78369497 156.71660696l38.8044445 32.66674931a25.36238224 25.36238224 0 0 1 3.04348577 35.76095873L486.63761776 818.67478965a76.08714794 76.08714794 0 0 1-107.20679132 9.18118218l-2.40942618-2.10507822-2.28261403-2.20652672L58.64741395 508.44212703a25.36238224 25.36238224 0 0 1-0.07608729-35.86240846l35.81168359-35.93849576a25.36238224 25.36238224 0 0 1 35.88777088-0.05072486l296.56233848 295.6239297 482.21497784-572.42897249a25.36238224 25.36238224 0 0 1 35.73559752-3.0688482z","p-id":"9244"}})]):e._e(),!0===t.hidden?a("svg",{staticClass:"user-defined-add-svg",attrs:{t:"1659636887235",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9088",width:"18",height:"18"},on:{click:function(a){return e.addUserDefinedSelect(t)}}},[a("path",{attrs:{d:"M462.80754569 45.96622222m10.35630616 0l77.6722963 0q10.35630617 0 10.35630616 10.35630617l0 911.35494322q0 10.35630617-10.35630616 10.35630617l-77.6722963 0q-10.35630617 0-10.35630616-10.35630617l0-911.35494322q0-10.35630617 10.35630616-10.35630617Z","p-id":"9089"}}),a("path",{attrs:{d:"M66.67883457 462.80754569m10.35630618 0l869.9297185 0q10.35630617 0 10.35630618 10.35630616l0 77.6722963q0 10.35630617-10.35630618 10.35630616l-869.9297185 0q-10.35630617 0-10.35630618-10.35630616l0-77.6722963q0-10.35630617 10.35630618-10.35630616Z","p-id":"9090"}})]):e._e(),!0!==t.hidden?a("svg",{staticClass:"user-defined-remove-svg",attrs:{t:"1659629683475",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9221",width:"18",height:"18"},on:{click:function(a){return e.removeUserDefinedSelect(t)}}},[a("path",{attrs:{d:"M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z","p-id":"9222"}})]):e._e()])])})),0):e._e()]),a("idm-a-modal",{attrs:{title:"组件替换",visible:e.pageUserDefinedModalVisible,footer:null,width:"666px"},on:{cancel:function(t){e.pageUserDefinedModalVisible=!1}}},[a("div",{staticClass:"idm_page_user_defined_modal_alert"},[e._v(" 当前位置已显示 "),a("span",[e._v(e._s(e.currentContainerShowModuleName))]),e._v(" 组件，您可以选择其他组件交换当前组件显示的位置 ")]),e.customModuleObject?a("div",{staticClass:"idm_page_user_defined_modal_modulelist"},e._l(e.customModuleObject.children||[],(function(t,n){return a("div",{key:n,staticClass:"idm_page_user_defined_modal_moduleitem",class:{active:t.packageid==e.currentContainerShowPackageid}},[a("div",{attrs:{title:t.props&&t.props.basicAttr&&t.props.basicAttr.title||t.props&&t.props.compositeAttr&&t.props.compositeAttr.title||t.asName}},[a("label",[e._v(e._s(t.props&&t.props.basicAttr&&t.props.basicAttr.title||t.props&&t.props.compositeAttr&&t.props.compositeAttr.title||t.asName))]),t.containerIndex<999999999?a("span",[e._v("已显示在序号 "+e._s(t.containerIndex)+" 容器中 ")]):e._e()]),a("div",[t.packageid==e.currentContainerShowPackageid?a("div",{staticClass:"user-defined-modal-selected"},[a("svg",{attrs:{t:"1659636928260",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9243",width:"18",height:"18"}},[a("path",{attrs:{d:"M944.78369497 156.71660696l38.8044445 32.66674931a25.36238224 25.36238224 0 0 1 3.04348577 35.76095873L486.63761776 818.67478965a76.08714794 76.08714794 0 0 1-107.20679132 9.18118218l-2.40942618-2.10507822-2.28261403-2.20652672L58.64741395 508.44212703a25.36238224 25.36238224 0 0 1-0.07608729-35.86240846l35.81168359-35.93849576a25.36238224 25.36238224 0 0 1 35.88777088-0.05072486l296.56233848 295.6239297 482.21497784-572.42897249a25.36238224 25.36238224 0 0 1 35.73559752-3.0688482z","p-id":"9244"}})]),e._v(" 已选 ")]):t.containerIndex<999999999?a("div",{staticClass:"user-defined-modal-changeseats",on:{click:function(a){return e.userDefinedModuleReplace(t,"changeseats")}}},[a("svg",{attrs:{t:"1660186463623",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7012",width:"18",height:"18"}},[a("path",{attrs:{d:"M629.419 104.311c113.459 11.333 204.663 79.736 224.05 196.882h-65.672l106.087 157.832L999.97 301.193h-73.182c-19.524-157.833-138.99-260.37-289.86-274.979-20.89-1.638-40.277 16.248-40.277 39.049 1.365 19.524 14.745 37.41 32.768 39.048z m-164.25-79.735H96.256c-20.89 0-37.274 17.886-37.274 40.687V416.7c0 22.8 16.384 40.687 37.274 40.687h368.913c20.89 0 37.274-17.886 37.274-40.687V65.263c0-22.801-16.384-40.687-37.274-40.687zM429.261 379.29H132.164V102.673h297.233l-0.136 276.617z m-35.908 540.125c-126.976-11.332-224.052-95.982-228.557-235.93h70.178L129.16 525.79 23.074 683.486h70.178c2.867 180.633 129.843 297.78 292.728 314.027 20.89 1.638 40.277-16.248 40.277-39.049 0.41-19.388-13.653-36.045-32.904-39.049z m534.8-353.075H559.242c-21.027 0-37.274 18.023-37.274 40.687v353.075c0 22.665 16.384 40.55 37.274 40.55h368.913c20.89 0 37.273-17.885 37.273-40.55V607.027c0-22.664-17.886-40.687-37.273-40.687z m-35.908 354.714H595.012V646.076h297.233v274.978z m0 0","p-id":"7013"}})]),e._v(" 换位 ")]):a("div",{staticClass:"user-defined-modal-replace",on:{click:function(a){return e.userDefinedModuleReplace(t,"replace")}}},[a("svg",{attrs:{t:"1660186765079",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7166",width:"18",height:"18"}},[a("path",{attrs:{d:"M911.14666667 610.98666667H112.85333333c-23.57333333 0-42.66666667 19.09333333-42.66666666 42.66666666 0 8.96 2.77333333 17.28 7.46666666 24.10666667 2.02666667 4.8 5.12 9.28 8.96 13.22666667L274.66666667 878.93333333c8.32 8.32 19.2 12.48 30.18666666 12.48s21.86666667-4.16 30.18666667-12.48c16.64-16.64 16.64-43.62666667 0-60.37333333L212.58666667 696.32h698.45333333c23.57333333 0 42.66666667-19.09333333 42.66666667-42.66666667s-18.98666667-42.66666667-42.56-42.66666666zM112.85333333 413.01333333h798.29333334c23.57333333 0 42.66666667-19.09333333 42.66666666-42.66666666 0-8.96-2.77333333-17.28-7.46666666-24.10666667-1.49333333-3.52-3.62666667-6.93333333-6.18666667-10.13333333L786.34666667 148.16c-14.93333333-18.24-41.81333333-20.90666667-60.05333334-5.97333333-18.24 14.93333333-20.90666667 41.81333333-5.97333333 60.05333333l102.72 125.44H112.85333333c-23.57333333 0-42.66666667 19.09333333-42.66666666 42.66666667s19.09333333 42.66666667 42.66666666 42.66666666z","p-id":"7167"}})]),e._v(" 替换 ")])])])})),0):e._e()])],1)},h=[],m=a("ade3"),f=(a("a9e3"),a("4de4"),a("99af"),a("7db0"),a("a15b"),a("d81d"),a("18a5"),a("46f3")),v=a.n(f),w=a("392c"),I={mixins:[u],name:"Page",components:{jsplumb:v.a},data:function(){return{containerStyleObject:{width:null,height:null,"min-height":null},contentStyleObject:{width:null,height:null,overflow:null,"transform-origin":null,transform:null},themeSetObject:"",PageSettingData:{},dialogVisibleStatus:!1,dialogIsHideing:!1,dialogObjectList:[],drawerVisible:!1,pagePropData:{},pageUserDefinedStatus:!1,userDefinedSaveLoading:!1,openUserCustomizationLeftBar:!1,hiddenCustomizationToolBar:!1,originalUserCustomizationModuleObject:{children:[]},pageUserDefinedModalVisible:!1,currentContainerShowPackageid:"",currentContainerShowModuleName:"",currentContainerShowModuleObject:{},customModuleObject:null,pageInterfaceResultObject:{}}},props:{pageid:{type:String},routerId:{type:String},devpreview:{type:Boolean},mainPage:{type:Boolean},index:{type:Number},styleObject:{type:Object,default:function(){return{}}}},created:function(){var e=this,t=this;t.initJsPlumb(),this.devpreview?(this.PageSettingData=JSON.parse(window.localStorage["devpreview"]),console.log("当前预览的缓存数据",this.PageSettingData),this.setCachePageData(this.PageSettingData),this.loadPageElement()):IDM.router.pageDataCachePool.get(this.pageid)?(this.PageSettingData=_.cloneDeep(IDM.router.pageDataCachePool.get(this.pageid)),console.log("从缓存池中获取到页面配置数据（同pageid情况下）",this.PageSettingData),this.loadPageElement()):this.$previewApi.fetchPageSettingDataForVersion({pageid:this.pageid,version:"",urlData:this.commonParam().urlData}).then((function(t){e.PageSettingData=t.data.data,e.setCachePageData(e.PageSettingData),console.log("从数据接口中获取页面配置数据返回数据结果",e.PageSettingData),e.loadPageElement()})).catch((function(e){IDM.message.error("页面配置信息加载失败！message："+e.message)}))},methods:{pageResize:function(e){var t=this.PageSettingData.page.layout.props.basicAttr;if(t&&t.openPageWH){e||(e=IDM.getClientWH()),this.containerStyleObject.width=e.width+"px",this.containerStyleObject.height=e.height+"px",this.containerStyleObject["min-height"]="initial";var a=t.pageWH||"1920,1080";a=a.split(",");var n=a[0],o=a[1];this.contentStyleObject["width"]=n+"px",this.contentStyleObject["height"]=o+"px",this.contentStyleObject["overflow"]="hidden";var i=t.pageWHType||"X",r=1,s=1,c={};switch(i){case"X":s=r=e.width/n,c["overflow-y"]="auto",c["overflow-x"]="hidden";break;case"Y":s=r=e.height/o,c["overflow-y"]="hidden",c["overflow-x"]="auto";break;case"XY":r=e.width/n,s=e.height/o,c["overflow-y"]="hidden",c["overflow-x"]="hidden";break}this.$nextTick((function(){$("body").css(c)})),this.contentStyleObject["transform"]="scale("+r+", "+s+")",this.contentStyleObject["transform-origin"]="0 0"}},setCachePageData:function(e){var t=this;try{this.propsCompletion(e.page.layout,e.page.componentsMap)}catch(a){}IDM.router.pageDataCachePool.put(t.pageid,_.cloneDeep(e))},propsCompletion:function(e,t){var a=this;e instanceof Array||(e=[e]);for(var n=function(n){var o=e[n];if(o.packageid){var i=t.filter((function(e){return e.packageid==o.packageid}));i&&i.length>0&&(o.props=i[0].props,i[0].svgData&&(o.svgData=i[0].svgData))}o.children&&o.children.length>0&&a.propsCompletion(o.children,t)},o=0;o<e.length;o++)n(o)},loadPageElement:function(){var e=this;return Object(r["a"])(c.a.mark((function t(){var a,n,o,i;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=!1,n=0;n<e.PageSettingData.page.componentsMap.length;n++)o=e.PageSettingData.page.componentsMap[n],o.comLangue&&"react"==o.comLangue.toLocaleLowerCase()&&(a=!0);return t.next=4,e.initReactOrOtherLib(a);case 4:return e.PageSettingData.page.actions&&e.PageSettingData.page.actions.compiled&&(i=$('<script type="text/javascript" id="'+e.pageid+'"/>'),$("body").append(i.html("\n       (function(){\n        var exports={};\n        ".concat(e.PageSettingData.page.actions.compiled,"\n        var functionList = Object.keys(exports);\n        for(var i=0;i<functionList.length;i++){\n          window[functionList[i]] = exports[functionList[i]];\n        }\n       })();\n       ")))),e.PageSettingData.page.componentsMap.forEach((function(t){t.env="production",t.routerId=e.routerId,t.pageid=e.pageid})),e.IDM.broadcast.registerModule(e.PageSettingData,e.pageid,e.routerId),e.setCurrentPageTitle(),t.next=10,e.initAppAndUserInfo(e.PageSettingData.page.layout.props);case 10:e.requestPageCommonInterfaceDataBefore((function(){e.setCurrentPageTitle(!0),e.mainPage&&e.$emit("mainPageSettingHandle",e.PageSettingData),e.beforeLoadingFunction(),e.pageResize(),e.pageAttrPropHandle(e.PageSettingData.page.layout.props),e.$nextTick((function(){this.initModuleTreeToPage(null,!0,this.PageSettingData.page.layout)}))}));case 11:case"end":return t.stop()}}),t)})))()},silentReLogin:function(e,t){var a=this;return Object(r["a"])(c.a.mark((function t(){var n,o,i;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e&&e.openSessionKeep&&e.silentReLoginUrl)){t.next=10;break}return n=!1,o=IDM.setting.sessionKeep.cacheKeyName,i="",console.log("当前页面cookie信息",document.cookie),console.log("获取到的cookie信息："+o,IDM.getCookie(o)),window.localStorage[o]?i=window.localStorage[o]:IDM.getCookie(o)?i=IDM.getCookie(o):IDM.url.queryObject()[o]&&(i=IDM.url.queryObject()[o]),t.next=7,IDM.http.post(e.silentReLoginUrl,Object(m["a"])({},o,i)).then((function(e){var t=e.data;"200"==t.code&&(n=!0)})).catch((function(e){}));case 7:if(!n){t.next=10;break}return t.next=10,a.fetchUserInfo(e,!1,!0,!0);case 10:case"end":return t.stop()}}),t)})))()},fetchUserInfo:function(e,t,a,n){var o=this;return Object(r["a"])(c.a.mark((function r(){var s,l;return c.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=!0,l=o,r.next=3,o.$previewApi.fetchUserInfo(e.userInfoUrl,Object(i["a"])({pageid:o.pageid},o.commonParam())).then((function(e){var t=e.data;"200"==t.code&&t.data?t=t.data:"200"!=t.code&&(s=!1),(l.mainPage||n)&&IDM.user.setCurrentUserInfo(t),(l.mainPage||n)&&s&&a&&IDM.broadcast.send({type:"linkageReload",rangeModule:"",message:(new Date).getTime()},l.routerId)})).catch((function(e){s=!1}));case 3:if(!t||s){r.next=6;break}return r.next=6,o.silentReLogin(e,a);case 6:case"end":return r.stop()}}),r)})))()},initAppAndUserInfo:function(e){var t=this;return Object(r["a"])(c.a.mark((function a(){var n,o,r,s,l,d,p,u;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t,o=e.compositeAttr,!(o.openFetchApplicationInfo&&o.applicationInfoUrl&&t.mainPage)){a.next=5;break}return a.next=5,t.$previewApi.fetchApplicationInfo(o.applicationInfoUrl,Object(i["a"])({pageid:t.pageid},t.commonParam())).then((function(e){var t=e.data;"200"==t.code&&t.data&&(t=t.data),IDM.app.setAppInfo(t)})).catch((function(e){}));case 5:if(!o.openFetchUserInfo||!o.userInfoUrl){a.next=8;break}return a.next=8,t.fetchUserInfo(o,!0);case 8:if(r="",o.switchUserInfo&&o.switchUserInfoFiledName?(s=o.switchUserInfoFiledName,l="userObject",d={IDM:window.IDM},d[l]=IDM.user.getCurrentUserInfo(),s&&(s=l+(s.startsWiths("[")?"":".")+s,r=window.IDM.express.replace.call(t,"@["+s+"]",d))):o.switchUserInfo&&(r=IDM.user.getCurrentUserInfo()&&IDM.user.getCurrentUserInfo().data?IDM.user.getCurrentUserInfo().data.userid:""),o.switchUserInfo&&!r&&(o.loginPageUrl?window.location.href=IDM.url.getWebPath(o.loginPageUrl):window.location.href=""),!(o.openFetchUserInfo&&o.switchUserCustomization&&o.userCustomizationFetchUrl)){a.next=17;break}return p=o.userCustomizationModuleContainer&&o.userCustomizationModuleContainer.length>0?o.userCustomizationModuleContainer[0].moduleId:"",p||(p=n.PageSettingData.id),n.originalUserCustomizationModuleObject=_.cloneDeep(n.getModuleTree(n.PageSettingData.page.layout,p)),a.next=17,t.$previewApi.fetchUserCustomizationInfo(o.userCustomizationFetchUrl,{pageid:t.pageid,version:t.PageSettingData.pageBaseInfo.version,urlData:JSON.stringify(t.commonParam())}).then((function(e){if(e&&e.data&&e.data.data&&e.data.data.customData){var t=e.data.data.customData instanceof Object?e.data.data.customData:JSON.parse(e.data.data.customData),a=t.children;if(!a||a&&0==a.length)return;var i=n.getModuleTree(n.PageSettingData.page.layout,t.packageid);if(i&&i.children){var r=[],s=[];a.forEach((function(e,t){if(s.push(e.packageid),!o.switchUserCustomizationCommutant){var a=n.getModuleTree(n.originalUserCustomizationModuleObject,e.packageid);a&&(a.hidden=e.hidden)}for(var c=0;c<i.children.length;c++){var l=i.children[c];if(e.packageid==l.packageid&&!0!==e.hidden){l.containerIndex=e.containerIndex,l.relationType=e.relationType,l.relationId=e.relationId,r.push(l);break}}}));for(var c=0;c<i.children.length;c++){var l=i.children[c];-1==s.indexOf(l.packageid)&&r.push(l)}i.children=r}}})).catch((function(e){}));case 17:if(!(n.mainPage&&o.openIdmTheme&&"customInterface"==o.themeFetchType&&o.themeInterfaceUrl)){a.next=22;break}return a.next=20,t.$previewApi.fetchThemeInfo(o.themeInterfaceUrl,Object(i["a"])({pageid:t.pageid},t.commonParam())).then((function(e){n.themeInterfaceHandle(e.data,"resultData")})).catch((function(e){}));case 20:a.next=23;break;case 22:n.mainPage&&o.openIdmTheme&&"customFunction"==o.themeFetchType&&o.themeCustomFunction&&o.themeCustomFunction.length>0&&(u="",o.themeCustomFunction.forEach((function(e){try{u=window[e.name]&&window[e.name].call(t,Object(i["a"])(Object(i["a"])({},t.commonParam()),{},{customParam:e.param,_this:n}))}catch(a){}})),IDM.theme.setCurrentThemeInfo(u),n.themeSetObject=u);case 23:case"end":return a.stop()}}),a)})))()},pageUserDefinedStatusChangeHandle:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this;this.pageUserDefinedStatus=e;var n=this.PageSettingData.page.layout.props.compositeAttr;this.hiddenCustomizationToolBar=!0!==n.hiddenCustomizationToolBar;var o,i,r,s={},c=n.switchUserCustomizationCommutant;if(this.openUserCustomizationLeftBar=!c,n.customizationToolBarToogleEvent&&n.customizationToolBarToogleEvent.length>0){var l=this.commonCustomEventFunHandle(n,"customizationToolBarToogleEvent",{status:e,save:t,pageData:this.PageSettingData.page,routerId:a.routerId});if(!1===l)return}var d=n.userCustomizationModuleContainer&&n.userCustomizationModuleContainer.length>0?n.userCustomizationModuleContainer[0].moduleId:"";if(d){var p=this.getModuleTree(this.PageSettingData.page.layout.children,d);if(!p)return!1;this.customModuleObject=p;var u,g,h,m,f=document.querySelector("#router_page_".concat(a.routerId)).querySelector("#".concat(p.packageid)).getBoundingClientRect(),v="";!this.moduleMoveEvent&&(this.moduleMoveEvent=function(e){e.stopPropagation(),e.preventDefault();e.target.dataset.packageid;var t={};t.x=e.clientX-s.x,t.y=e.clientY-s.y,r.style.left=t.x+"px",r.style.top=t.y+"px";var a=t.x+r.getBoundingClientRect().width/2,n=t.y+r.getBoundingClientRect().height/2,l=t.x,d=t.x+r.getBoundingClientRect().width,p=t.y,u=t.y+r.getBoundingClientRect().height,w=!1;(f.x>d||f.x+f.width<l||f.y>u||f.y+f.height<p)&&(w=!0);var I=[],b=[],y=[];o&&o.forEach((function(e){var t=e.parentElement.getBoundingClientRect(),n=t.y,o=t.y+t.height;(n<=p&&p<=o||o>=u&&n<=u)&&I.push(e.parentElement),n>p&&o<p&&(t.x<l&&t.x+t.width>l||t.x+t.width<d&&t.x+t.width>l||l<t.x&&t.x+t.width>l&&t.x<d)&&b.push(e.parentElement),a>t.x&&a<t.x+t.width&&y.push(e.parentElement)}));var D=[];I.length>0&&I.forEach((function(e){var t=e.getBoundingClientRect();a>t.x&&a<t.x+t.width&&D.push(e)}));var M=999999999;if(D.length>0?D.forEach((function(e){var t=e.getBoundingClientRect(),a=t.y,n=t.y+t.height;p-a<M&&(m=e,M=p-a,v="top"),n-u<M&&(m=e,M=n-u,v="bottom")})):b.length>0?(b.forEach((function(e){var t=e.getBoundingClientRect();n>t.y+t.height&&n-t.y-t.height<M&&(m=e,M=p-t.y-t.height,v="bottom"),n<t.y&&t.y-n<M&&(m=e,M=t.y-u,v="top")})),m||b.forEach((function(e){var t=e.getBoundingClientRect();n<=t.y+t.height&&n>=t.y&&(Math.abs(a-(t.x+t.width/2))<M&&(m=e,M=Math.abs(a-(t.x+t.width/2))),v="bottom")}))):y.length>0&&w&&y.forEach((function(e){var t=e.getBoundingClientRect();p>t.y+t.height&&p-t.y-t.height<M&&(m=e,M=p-t.y-t.height,v="bottom"),u<t.y&&t.y-u<M&&(m=e,M=t.y-u,v="top")})),i.forEach((function(e){var t=e.getBoundingClientRect();a>t.x&&a<t.x+t.width&&n>t.y&&n<t.y+t.height&&(h=e)})),c&&(i.forEach((function(e){IDM.removeClasss(e,"idm_module_user_defined_placeholderstyle")})),h&&IDM.addClasss(h,"idm_module_user_defined_placeholderstyle")),m&&!c){var S=m.parentElement;"top"==v?S.insertBefore(g,m):S.lastChild==m?S.appendChild(g):S.insertBefore(g,m.nextSibling)}else c||0!=h.childElementCount||h.appendChild(g)}),!this.moduleMoveUpEvent&&(this.moduleMoveUpEvent=function(e){if(e.stopPropagation(),e.preventDefault(),document.removeEventListener("mousemove",a.moduleMoveEvent),document.removeEventListener("mouseup",a.moduleMoveUpEvent),c&&h){var t=g,n=g.parentElement;if(console.log("🚀 ~ file: Page.vue ~ line 568 ~ moveUpEvent ~ hoverContainerDom",h.childNodes),h.childNodes)for(var o=_.cloneDeep(h.childElementCount),s=0;s<o;s++){var l=h.childNodes[0];a.changePageSettingModuleSort(l.id,0==s?u.id:t.id,"bottom"),n.insertBefore(l,t.nextSibling),t=l}h.appendChild(u),a.changePageSettingModuleSort(u.id,h.getAttribute("idm-container-index"),"inner")}else g.parentElement.insertBefore(u,g),m?a.changePageSettingModuleSort(u.id,m.id,v):h&&a.changePageSettingModuleSort(u.id,h.getAttribute("idm-container-index"),"inner");$(g).remove(),$(r).remove(),i.forEach((function(e){IDM.removeClasss(e,"idm_module_user_defined_placeholderstyle")})),m=null,v="",IDM.broadcast.send({type:"resendAutoLayout",rangeModule:"",message:{}})}),!this.moduleMousedownEvent&&(this.moduleMousedownEvent=function(e){e.stopPropagation(),e.preventDefault();var t=e.target.dataset.packageid;if(t&&(a.isChangeUserDefined=!0,document.addEventListener("mousemove",a.moduleMoveEvent),document.addEventListener("mouseup",a.moduleMoveUpEvent),console.log("🚀 ~ file: Page.vue ~ line 397 ~ mousedownEvent ~ e",e),u=document.querySelector("#router_page_".concat(a.routerId)).querySelector("#".concat(t)),u)){var n=u.getBoundingClientRect();console.log("🚀 ~ file: Page.vue ~ line 401 ~ mousedownEvent ~ rectInfo",n),r=document.createElement("div"),r.id="idm_module_user_defined_movebox",r.className="idm_module_user_defined_movebox",r.style.width=n.width+"px",r.style.height=n.height+"px",s.x=e.clientX-n.x,s.y=e.clientY-n.y,r.style.left=e.clientX-s.x+"px",r.style.top=e.clientY-s.y+"px",r.style.position="absolute",g=document.createElement("div"),g.id="idm_module_user_defined_placeholderbox",g.className="idm_module idm_module_user_defined_placeholderbox",g.style.height=n.height+"px",g.dataset.styleHeight=n.height+"px",u.parentElement.insertBefore(g,u),r.appendChild(u),document.body.appendChild(r),o=document.querySelector("#router_page_".concat(a.routerId)).querySelectorAll(".idm_module_user_defined")}}),i=document.querySelector("#router_page_".concat(a.routerId)).querySelectorAll(".drag_container[idm-ctrl-id='"+p.id+"']"),a.registerModuleMouseDownEvent(),t&&!1===this.pageUserDefinedStatus&&this.userDefinedSave()}else IDM.message.info("没有可以自定义的容器组件！")},registerModuleMouseDownEvent:function(e){var t=this,a=this.PageSettingData.page.layout.props.compositeAttr;this.customModuleObject.children&&this.customModuleObject.children.forEach((function(n){if(!e||e===n.packageid){var o=$("#router_page_".concat(t.routerId," #").concat(n.packageid)),i=document.querySelector("#router_page_".concat(t.routerId)).querySelector("#".concat(n.packageid));if(i)if(t.pageUserDefinedStatus){var r=o.find(">div[idm-ctrl='idm_module']").css("marginLeft"),s=o.find(">div[idm-ctrl='idm_module']").css("marginRight"),c=document.createElement("div");c.className="idm_module_user_defined",c.style.marginLeft=r,c.style.marginRight=s,c.dataset.packageid=n.packageid,a.switchUserCustomizationCommutant?(c.innerHTML='\n            <div title="设置要显示的组件">\n            <svg t="1660125485320" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23286" width="16" height="16"><path d="M510.37806 337.803609c-98.010221 0-177.748287 78.842673-177.748287 175.75284 0 96.91426 79.738066 175.763073 177.748287 175.763073 9.537214 0 19.620873-0.978281 31.797194-3.088338 18.196431-3.281743 30.290887-20.538779 26.963095-38.471197-2.924609-15.732309-16.693194-27.152407-32.747845-27.152407-2.071172 0-4.15974 0.196475-6.123464 0.563842-7.937786 1.402953-14.233166 2.056845-19.807115 2.056845-61.159942 0-110.915136-49.201585-110.915136-109.671819 0-60.467163 49.679469-109.661585 110.747313-109.661585 61.116963 0 110.832248 49.194422 110.832248 109.661585 0 5.892197-0.656963 12.0832-2.088568 19.531845-3.327792 17.928325 8.769734 35.189454 26.959002 38.464033 2.006703 0.360204 4.045129 0.546446 6.070252 0.546446 16.204054 0 30.019711-11.43033 32.832779-27.116591 2.13871-11.45182 3.13848-21.435195 3.13848-31.41857 0.042979-46.873564-18.435884-90.990341-52.033074-124.223233C602.407056 356.106464 557.790906 337.803609 510.37806 337.803609zM938.476161 432.79917c-2.185782-11.426237-11.037381-20.499893-22.563902-23.12058-41.909505-9.508561-76.781734-34.929534-98.185206-71.550593-21.334911-36.560684-26.191522-79.099523-13.68979-119.709429 3.52836-11.123338 0.007163-23.235191-8.951883-30.840402-41.860387-35.721573-89.536222-62.938448-141.695163-80.885192-3.152806-1.088798-6.437619-1.639337-9.776667-1.639337-8.256034 0-16.182564 3.431146-21.724791 9.376555-29.236881 31.04404-68.840878 48.140417-111.5107 48.140417-42.673915 0-82.305541-17.125029-111.607914-48.230468-7.877411-8.333806-20.510126-11.512195-31.580253-7.726985-52.483328 18.171871-100.131535 45.416376-141.640927 80.988546-8.815783 7.591909-12.322653 19.620873-8.934486 30.67258 12.586666 40.645722 7.759731 83.180468-13.597693 119.78106-21.306258 36.5965-56.149834 62.006216-98.17395 71.561849-11.540847 2.709715-20.396539 11.812023-22.559808 23.166629-5.228071 27.169803-7.877411 54.346769-7.877411 80.770582 0 26.426883 2.64934 53.603849 7.873318 80.763418 2.174526 11.411911 11.023054 20.488637 22.552645 23.12058 41.913599 9.512654 76.785827 34.922371 98.19237 71.547523 21.349237 36.59343 26.177196 79.128175 13.583366 119.795387-3.363607 10.969842 0.121773 23.013133 8.973372 30.758538 41.84913 35.707246 89.494267 62.920028 141.662417 80.902588 11.466146 3.885494 23.738657 0.549515 31.454386-7.680936 29.29828-31.091112 68.925812-48.216141 111.593588-48.216141s82.302471 17.125029 111.560842 48.183396c5.556553 5.955642 13.494339 9.380648 21.782096 9.380648 3.27765 0 6.537903-0.520863 9.829879-1.599428 52.126194-17.968234 99.774401-45.184085 141.652184-80.912821 8.791224-7.577582 12.308327-19.628036 8.94165-30.758538-12.597923-40.678468-7.745405-83.20605 13.672394-119.773897 21.324678-36.625152 56.192813-62.030775 98.19237-71.547523 11.390421-2.592035 20.23588-11.633968 22.549575-23.106254 5.223978-27.184129 7.870248-54.358025 7.870248-80.770582C946.342316 487.171522 943.697069 459.965903 938.476161 432.79917zM728.572524 789.878798c-26.02677 20.157085-54.736649 36.553521-85.487 48.818869-36.682457-32.144094-83.60207-49.779753-132.792399-49.779753-48.926316 0-95.838765 17.635659-132.767839 49.786916-30.744211-12.262278-59.45716-28.655643-85.491093-48.812729 9.894348-47.441499 1.889023-96.449679-22.763446-138.627291-24.448832-41.966811-63.427588-73.339332-110.186542-88.840374-2.381234-16.343223-3.584642-32.758078-3.584642-48.869011 0-16.043395 1.203408-32.451086 3.584642-48.851615 46.612621-15.389502 85.584214-46.758953 110.186542-88.850607 24.523533-42.024116 32.525788-91.033319 22.74912-138.620128 26.0237-20.149922 54.735625-36.543288 85.494163-48.815799 36.821627 32.201399 83.73817 49.861618 132.778072 49.861618 49.194422 0 96.109941-17.635659 132.792399-49.779753 30.751375 12.269441 59.45716 28.662807 85.48086 48.812729-9.809413 47.63388-1.835811 96.634898 22.667256 138.620128 24.445762 41.966811 63.416332 73.343425 110.182448 88.850607 2.381234 16.386202 3.584642 32.801057 3.584642 48.940642 0.143263 15.443737-1.031493 31.797194-3.499707 48.701189-46.763047 15.504112-85.73771 46.873564-110.186542 88.836281C726.84416 693.189665 718.845998 742.190683 728.572524 789.878798z" p-id="23287"></path></svg>\n            </div>\n            ',c.querySelector("div").addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault();var a=e.currentTarget.parentElement.dataset.packageid;t.pageUserDefinedModalVisible=!0,t.currentContainerShowPackageid=a,t.currentContainerShowModuleObject=t.getModuleTree(t.PageSettingData.page.layout.children,a),t.currentContainerShowModuleName=t.currentContainerShowModuleObject.props&&t.currentContainerShowModuleObject.props.compositeAttr&&t.currentContainerShowModuleObject.props.compositeAttr.title||t.currentContainerShowModuleObject.asName}))):(c.innerHTML='\n            <div title="移除组件">\n            <svg t="1659629683475" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9221" width="16" height="16"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z" p-id="9222"></path></svg>\n            </div>\n            ',c.querySelector("div").addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault();var a=e.currentTarget.parentElement.dataset.packageid;t.customModuleObject.children.forEach((function(e){e.packageid==a&&(e.hidden=!0)}));var n=t.getModuleTree(t.originalUserCustomizationModuleObject,a);n&&(n.hidden=!0),t.$forceUpdate(),$(document.querySelector("#router_page_".concat(t.routerId)).querySelector("#".concat(a))).remove()}))),i.appendChild(c),i.addEventListener("mousedown",t.moduleMousedownEvent)}else i&&$(i.querySelector(".idm_module_user_defined")).remove(),i&&i.removeEventListener("mousedown",t.moduleMousedownEvent)}}))},changePageSettingModuleSort:function(e,t,a){var n=this.PageSettingData.page.layout.props.compositeAttr,o=n.userCustomizationModuleContainer&&n.userCustomizationModuleContainer.length>0?n.userCustomizationModuleContainer[0].moduleId:"",i=this.getModuleTree(this.PageSettingData.page.layout.children,o);if(!i)return!1;var r=-1,s=-1;i.children&&i.children.forEach((function(n,o){n.packageid==e&&"inner"==a&&(n.containerIndex=t,n.relationType&&n.relationType.startsWiths("inner_")&&(n.relationType="inner_"+t)),n.packageid==e&&(r=o),n.packageid==t&&(s=o)})),s>-1&&r>-1&&"inner"!=a&&(i.children[r].containerIndex=i.children[s].containerIndex,i.children[r].relationType=a,i.children[r].relationId=t,i.children.splice(s+("bottom"==a?1:0),0,i.children[r]),i.children.splice(r+(s<r?1:0),1))},removeUserDefinedSelect:function(e){var t=this;e.hidden=!0;var a=t.getModuleTree(this.PageSettingData.page.layout.children,e.packageid);a&&(a.hidden=!0),t.$forceUpdate(),$(document.querySelector("#router_page_".concat(t.routerId)).querySelector("#".concat(e.packageid))).remove()},addUserDefinedSelect:function(e){var t=this;e.hidden=!1;var a,n=t.getModuleTree(this.PageSettingData.page.layout.children,e.packageid);if(!n){var o=this.PageSettingData.page.layout.props.compositeAttr,i=o.userCustomizationModuleContainer&&o.userCustomizationModuleContainer.length>0?o.userCustomizationModuleContainer[0].moduleId:"",r=t.getModuleTree(this.PageSettingData.page.layout.children,i);r.children.push(_.cloneDeep(e))}n&&(n.hidden=!1),t.$forceUpdate(),t.moduleReload(e.packageid),t.registerModuleMouseDownEvent(e.packageid),this.customModuleObject.children&&this.customModuleObject.children.forEach((function(e){e.containerIndex==n.containerIndex&&!0!==e.hidden&&(a=e)})),a?t.changePageSettingModuleSort(e.packageid,a.packageid,"bottom"):t.changePageSettingModuleSort(e.packageid,n.containerIndex,"inner")},userDefinedModuleReplace:function(e,t){var a=this,n=a.currentContainerShowModuleObject.containerIndex;a.currentContainerShowModuleObject.containerIndex=e.containerIndex,a.currentContainerShowModuleObject.relationType=e.relationType,a.currentContainerShowModuleObject.relationId=e.relationId,a.changePageSettingModuleSort(e.packageid,n,"inner"),e.relationType="inner_"+n,"changeseats"==t&&$(document.querySelector("#router_page_".concat(a.routerId)).querySelector("#".concat(e.packageid))).remove(),$(document.querySelector("#router_page_".concat(a.routerId)).querySelector("#".concat(a.currentContainerShowModuleObject.packageid))).remove(),a.moduleReload(e.packageid),a.registerModuleMouseDownEvent(e.packageid),"changeseats"==t&&(a.moduleReload(a.currentContainerShowModuleObject.packageid),a.registerModuleMouseDownEvent(a.currentContainerShowModuleObject.packageid)),a.pageUserDefinedModalVisible=!1,IDM.broadcast.send({type:"resendAutoLayout",rangeModule:"",message:{}})},userDefinedSave:function(){var e=this,t=this.PageSettingData.page.layout.props.compositeAttr;if(t.customizationToolBarSaveEvent&&t.customizationToolBarSaveEvent.length>0){var a=this.commonCustomEventFunHandle(t,"customizationToolBarSaveEvent",{pageData:this.PageSettingData.page,routerId:e.routerId,pageid:this.pageid,version:this.PageSettingData.pageBaseInfo.version});if(!1===a)return}e.userDefinedSaveLoading=!0;var n=t.userCustomizationModuleContainer&&t.userCustomizationModuleContainer.length>0?t.userCustomizationModuleContainer[0].moduleId:"",o=this.getModuleTree(this.PageSettingData.page.layout.children,n);if(!o)return e.userDefinedSaveLoading=!1,!1;var i=_.cloneDeep(o);this.deleteLayoutAttachAttr(i),t.userCustomizationSaveUrl&&IDM.http.post(t.userCustomizationSaveUrl,{pageid:this.pageid,version:this.PageSettingData.pageBaseInfo.version,customData:JSON.stringify(i)}).then((function(t){t=t?t.data:{},e.userDefinedSaveLoading=!1,"200"===t.code?(IDM.message.success("保存成功！"),IDM.page.changePageUserDefinedStatus({routerId:e.routerId,status:!1})):IDM.message.error("个性化定制保存失败！message："+t.message)})).catch((function(t){IDM.message.error("个性化定制保存失败！message："+t.message),e.userDefinedSaveLoading=!1}))},userDefinedReset:function(){var e=this,t=this.PageSettingData.page.layout.props.compositeAttr;if(t.customizationToolBarResetEvent&&t.customizationToolBarResetEvent.length>0){var a=this.commonCustomEventFunHandle(t,"customizationToolBarResetEvent",{pageData:this.PageSettingData.page,routerId:e.routerId,pageid:this.pageid,version:this.PageSettingData.pageBaseInfo.version});if(!1===a)return}e.userDefinedSaveLoading=!0,t.userCustomizationSaveUrl&&IDM.http.post(t.userCustomizationSaveUrl,{pageid:this.pageid,version:this.PageSettingData.pageBaseInfo.version,reset:1}).then((function(t){if(t=t?t.data:{},"200"!==t.code)return e.userDefinedSaveLoading=!1,void IDM.message.error("重置操作失败！message："+t.message);IDM.message.success("重置成功！3秒后即将刷新本页面。"),setTimeout((function(){window.location.reload()}),3e3)})).catch((function(t){IDM.message.error("重置操作失败！message："+t.message),e.userDefinedSaveLoading=!1}))},userDefinedQuit:function(){var e=this,t=this.PageSettingData.page.layout.props.compositeAttr;if(t.customizationToolBarQuitEvent&&t.customizationToolBarQuitEvent.length>0){var a=this.commonCustomEventFunHandle(t,"customizationToolBarQuitEvent",{pageData:this.PageSettingData.page,routerId:e.routerId,pageid:this.pageid,version:this.PageSettingData.pageBaseInfo.version});if(!1===a)return}!0===this.isChangeUserDefined?window.location.reload():IDM.page.changePageUserDefinedStatus({routerId:this.routerId,status:!1})},layerClickHandle:function(e,t){var a=e?e.packageid:"";a&&(e&&e.props&&e.props.compositeAttr&&!1===e.props.compositeAttr.shadeClose||window.IdmBuiltin_CloseDialog({routerId:this.routerId,targetModule:[{moduleId:a}]}))},initReactOrOtherLib:function(e){return Object(r["a"])(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e||IDM.router.getReact()){t.next=4;break}return IDM.router.setReact(),t.next=4,IDM.http.importFiles([IDM.url.getWebPath("~/lib/react.min.js"),IDM.url.getWebPath("~/lib/react-dom.min.js")]).then((function(){console.log("react文件加载成功")})).catch((function(e){console.log("react文件加载出错")}));case 4:case"end":return t.stop()}}),t)})))()},beforeLoadingFunction:function(){var e=this.PageSettingData.page.layout.props.compositeAttr;e.beforeLoadingFunction&&e.beforeLoadingFunction.length>0&&this.commonCustomEventFunHandle(e,"beforeLoadingFunction")},afterLoadingFunction:function(){var e=this.PageSettingData.page.layout.props.compositeAttr;e.afterLoadingFunction&&e.afterLoadingFunction.length>0&&this.commonCustomEventFunHandle(e,"afterLoadingFunction")},requestPageCommonInterfaceDataBefore:function(e){var t=(this.PageSettingData.page.layout.props.compositeAttr?this.PageSettingData.page.layout.props.compositeAttr.interfaceList:[])||[];0!=t.length?(t=t.filter((function(e){return"pageloadbefore"==e.loadTimingType})),0!=t.length?this.orderlyRequestInterface(t,0,this.InterfaceParam(),e):e&&e()):e&&e()},requestPageCommonInterfaceData:function(e){if((!e||!this.pageCommonInterfaceLoaded)&&(this.pageCommonInterfaceLoaded=!0,this.IDM.broadcast.pageLoadCompleteAfter(this.routerId),!this.isloadPageCommonInterface)){this.isloadPageCommonInterface=!0,this.PageSettingData.page.linkList&&this.PageSettingData.page.linkList.length&&this.reconnectionAllModule(),console.log("页面首屏组件已全部加载完毕！！！"),this.afterLoadingFunction();var t=(this.PageSettingData.page.layout.props.compositeAttr?this.PageSettingData.page.layout.props.compositeAttr.interfaceList:[])||[];0!=t.length&&(t=t.filter((function(e){return!e.loadTimingType||"pageloadlater"==e.loadTimingType})),0!=t.length&&this.orderlyRequestInterface(t,0,this.InterfaceParam()))}},InterfaceParam:function(){var e=this.pageid,t=[],a=[];this.PageSettingData.page.componentsMap.forEach((function(n){n.packageid!=e&&(t.push(n.packageid),a.push(n.comId))}));var n={idmPageId:e,moduleIds:t.join(","),componentIds:a.join(",")},o=IDM.url.queryObject();return Object.keys(o).forEach((function(e){n[e]=o[e]})),n},orderlyRequestInterface:function(e,t,a,n){if(e.length<=t)n&&n();else{var o=e[t];t+=1;var r=this;if(o.preAllowFunction&&o.preAllowFunction.length>0)try{var s=Object(i["a"])(Object(i["a"])({},r.commonParam()),o.preAllowFunction[0].param),c=window[o.preAllowFunction[0].name]&&window[o.preAllowFunction[0].name].call(this,s);if(!1===c)return void r.orderlyRequestInterface(e,t,a,n)}catch(g){}if("datasource"==o.interfaceType&&o.dataSourceSelectData&&o.dataSourceSelectData.length){if(o.formDataFunction&&o.formDataFunction.length>0)try{var l=Object(i["a"])(Object(i["a"])({},r.commonParam()),o.formDataFunction[0].param),d=window[o.formDataFunction[0].name]&&window[o.formDataFunction[0].name].call(this,l);a=Object(i["a"])(Object(i["a"])({},a),d)}catch(g){}IDM.datasource.request(o.dataSourceSelectData[0].id,{moduleObject:{},param:a},(function(i){r.callbackModuleSetContext(o,i),r.orderlyRequestInterface(e,t,a,n)}),(function(o){r.orderlyRequestInterface(e,t,a,n)}))}else if("post"==o.interfaceMode&&o.interfaceUrl){if(o.formDataFunction&&o.formDataFunction.length>0)try{var p=Object(i["a"])(Object(i["a"])({},r.commonParam()),o.formDataFunction[0].param),u=window[o.formDataFunction[0].name]&&window[o.formDataFunction[0].name].call(this,p);a=Object(i["a"])(Object(i["a"])({},a),u)}catch(g){}this.$previewApi.postPageInterfaceInfo(o.interfaceUrl,a,{headers:o.interfaceContentType?{"Content-Type":o.interfaceContentType||"application/json;charset=UTF-8"}:{}}).then((function(i){r.callbackModuleSetContext(o,i.data||i),r.orderlyRequestInterface(e,t,a,n)})).catch((function(o){r.orderlyRequestInterface(e,t,a,n)}))}else"get"==o.interfaceMode&&o.interfaceUrl?this.$previewApi.getPageInterfaceInfo(o.interfaceUrl,a).then((function(i){r.callbackModuleSetContext(o,i.data||i),r.orderlyRequestInterface(e,t,a,n)})).catch((function(o){r.orderlyRequestInterface(e,t,a,n)})):r.orderlyRequestInterface(e,t,a,n)}},callbackModuleSetContext:function(e,t){var a=this;if(this.pageInterfaceResultObject[e.resultDataName]=t,this.sendBroadcastMessage({type:"pageCommonInterface",message:t,messageKey:e.resultDataName,rangeModule:""}),"pageloadbefore"!=e.loadTimingType&&this.PageSettingData.page.componentsMap.forEach((function(a){a.idmSetContextValue&&a.idmSetContextValue({type:"pageCommonInterface",key:e.resultDataName,data:t})})),e.interfaceRunLaterFunction&&e.interfaceRunLaterFunction.length>0){var n=e.interfaceRunLaterFunction;n.forEach((function(e){try{window[e.name]&&window[e.name].call(a,Object(i["a"])(Object(i["a"])({},a.commonParam()),{},{customParam:e.param,resultData:t,_this:a}))}catch(n){}}))}var o=this.PageSettingData.page.layout.props.compositeAttr||{};this.mainPage&&o.openIdmTheme&&"pageInterfaceResult"==o.themeFetchType&&o.themeDataName&&e.resultDataName==o.themeDataName&&this.themeInterfaceHandle(t,o.themeDataName)},pageAttrPropHandle:function(e){var t=e.compositeAttr;this.pagePropData=t;var a={};for(var n in t.bgSize&&"custom"==t.bgSize?a["background-size"]=(t.bgSizeWidth?t.bgSizeWidth.inputVal+t.bgSizeWidth.selectVal:"auto")+" "+(t.bgSizeHeight?t.bgSizeHeight.inputVal+t.bgSizeHeight.selectVal:"auto"):t.bgSize&&(a["background-size"]=t.bgSize),t.positionX&&t.positionX.inputVal&&(a["background-position-x"]=t.positionX.inputVal+t.positionX.selectVal),t.positionY&&t.positionY.inputVal&&(a["background-position-y"]=t.positionY.inputVal+t.positionY.selectVal),t)if(t.hasOwnProperty.call(t,n)){var o=t[n];if(!o&&!1!==o)continue;switch(n){case"defaultIdmTheme":!this.themeSetObject&&this.mainPage&&(IDM.theme.setCurrentThemeInfo(o),this.themeSetObject=o);break;case"width":case"height":a[n]=o;break;case"bgColor":o.hex8&&(a["background-color"]=IDM.hex8ToRgbaString(o.hex8));break;case"box":IDM.style.setBoxStyle(a,o);break;case"bgImgUrl":a["background-image"]="url(".concat(IDM.url.getWebPath(o),")");break;case"icoImgUrl":try{document.head.querySelector("link[rel='icon']").setAttribute("href",IDM.url.getWebPath(o))}catch(s){}var i=document.createElement("link");i.type="image/x-icon",i.rel="shortcut icon",i.href=IDM.url.getWebPath(o),document.getElementsByTagName("head")[0].appendChild(i);break;case"positionX":break;case"positionY":break;case"bgRepeat":a["background-repeat"]=o;break;case"bgAttachment":a["background-attachment"]=o;break;case"border":IDM.style.setBorderStyle(a,o);break;case"font":IDM.style.setFontStyle(a,o);break;case"layout":IDM.style.setLayoutStyle(a,o);break;case"pageMinWidth":o.inputVal&&o.selectVal&&(a["min-width"]=o.inputVal+o.selectVal);break}}var r={};IDM.style.setFilterStyle(r,e.basicAttr,{opacity:"pageOpacity"}),IDM.setStyleToPageHead("router_page_"+this.routerId,r),this.$nextTick((function(e){if(t.watermarkType&&"none"!=t.watermarkType){var a=this.$replace(t.watermarkFont,{IDM:IDM}),n=this.$replace(t.watermarkFont1,{IDM:IDM});IDM.watermark.set(this.$refs.idm_page_root,t.watermarkZindex,"font"!=t.watermarkType?t.watermarkImg:a,"image"==t.watermarkType?"":n,{fontColor:t.watermarkColor&&IDM.hex8ToRgbaString(t.watermarkColor.hex8),fontSize:"".concat(t.watermarkFontSize,"px"),width:t.watermarkSize,height:t.watermarkSize,rotate:t.watermarkRotate,imgSize:t.watermarkImgSize,imgLeftSize:t.watermarkImgLeftSize,fontLeftSize:t.watermarkFontLeftSize,opacity:t.watermarkOpacity/100,topSize:t.watermarkTopSize})}else IDM.watermark.close(this.$refs.idm_page_root)})),IDM.setStyleToPageHead("PAGE_"+this.PageSettingData.id+"_"+this.routerId,a),t.resourceList&&t.resourceList.length>0&&t.resourceList.forEach((function(e){"js"==e.resourceType?IDM.module.loadJs(IDM.url.getWebPath(e.resourceUrl),!0,(function(){}),{async:e.async,defer:e.defer}):IDM.module.loadCss(IDM.url.getWebPath(e.resourceUrl),!0,(function(){}))})),this.convertThemeListAttrToStyleObject(t)},convertThemeListAttrToStyleObject:function(e){var t=e.themeList;if(t)for(var a=IDM.setting&&IDM.setting.applications&&IDM.setting.applications.themeNamePrefix?IDM.setting.applications.themeNamePrefix:"idm-theme-",n=0;n<t.length;n++){var o=t[n];if(o.key==IDM.theme.getCurrentThemeInfo()){var r={color:o.mainColor?o.mainColor.hex8+" !important":""},s={"border-color":o.mainColor?o.mainColor.hex8:""},c={"background-color":o.mainColor?o.mainColor.hex8:""},l={color:o.minorColor?o.minorColor.hex8:""},d={"border-color":o.minorColor?o.minorColor.hex8:""},p={"background-color":o.minorColor?o.minorColor.hex8:""};IDM.setStyleToPageHead(".".concat(a+o.key," .idm_module_user_defined"),Object(i["a"])({},s)),IDM.setStyleToPageHead(".".concat(a+o.key," .idm_module_user_defined>div"),Object(i["a"])({},c)),IDM.setStyleToPageHead(".".concat(a+o.key," .user-defined-logo-svg,\n          .").concat(a+o.key," .idm_page_user_defined_leftbar svg.user-defined-add-svg,\n          .").concat(a+o.key," .idm_page_user_defined_modal_moduleitem .user-defined-modal-changeseats,\n          .").concat(a+o.key," .idm_page_user_defined_modal_moduleitem .user-defined-modal-replace"),Object(i["a"])({},r)),IDM.setStyleToPageHead(".".concat(a+o.key," .idm-ant-btn:active,\n          .").concat(a+o.key," .idm-ant-btn.active,\n          .").concat(a+o.key," .idm-ant-btn-dashed:active,\n          .").concat(a+o.key," .idm-ant-btn-dashed.active"),Object(i["a"])(Object(i["a"])({},r),s)),IDM.setStyleToPageHead(".".concat(a+o.key," .idm-ant-btn-primary,\n          .").concat(a+o.key," .idm-ant-btn-primary:hover,\n          .").concat(a+o.key," .idm-ant-btn-primary:focus"),Object(i["a"])(Object(i["a"])({},c),s)),IDM.setStyleToPageHead(".".concat(a+o.key," .idm-ant-btn:hover,\n          .").concat(a+o.key," .idm-ant-btn:focus,\n          .").concat(a+o.key," .idm-ant-btn-dashed:hover,\n          .").concat(a+o.key," .idm-ant-btn-dashed:focus"),Object(i["a"])(Object(i["a"])({},l),d)),IDM.setStyleToPageHead(".".concat(a+o.key," .idm-ant-btn-primary:hover,\n          .").concat(a+o.key," .idm-ant-btn-primary:focus"),Object(i["a"])(Object(i["a"])({color:"#FFFFFF"},p),d))}}},renderDialog:function(e){var t=this.getModuleTree(this.PageSettingData.page.layout.children,e);if(!t)return!1;if("firstrender"==t.renderType||"activerender"==t.renderType){if(t.renderLicence=!0,"firstrender"==t.renderType&&t.loaded)return _.cloneDeep(t);this.IDM.broadcast.pageModuleLoadCompleteBefore(this.routerId),this.resetLayoutInnerModuleLoadedStatus(t),this.initModuleTreeToPage(t)}return _.cloneDeep(t)},setShowDialog:function(e){this.dialogObjectList.push(e),$("#router_page_"+this.routerId+" #"+e.packageid).css("display","flex"),this.dialogVisibleStatus=!0,this.dialogIsHideing=!1},closeThisOpenDialog:function(e){var t=this,a=e.customParam?e.customParam:e,n=[];a.targetModule.forEach((function(a){n.push(a.moduleId),t.dialogObjectList.forEach((function(n,o){n.packageid==a.moduleId&&(n.dialogIsHideing=!0,$("#router_page_"+t.routerId+" .idm_dialog_shade_layer_"+a.moduleId).attr("hideing","hideing"),n.layerOption&&n.layerOption.cancel&&n.layerOption.cancel(n),e.isOkEvent&&n.layerOption&&n.layerOption.yes&&n.layerOption.yes(n))}))})),this.dialogObjectList.length<=n.length&&(this.dialogIsHideing=!0);var o=this;o.sendBroadcastMessage({type:"linkageCloseDialog",message:e,rangeModule:n}),setTimeout((function(){a.targetModule.forEach((function(e){if($("#router_page_"+t.routerId+" #"+e.moduleId).css("display","none"),o.destroyDialog(e.moduleId),1!=o.dialogObjectList.length){var a=-1;o.dialogObjectList.forEach((function(t,n){t.packageid==e.moduleId&&(a=n,t.layerOption&&t.layerOption.end&&t.layerOption.end(t))})),a>-1&&o.dialogObjectList.splice(a,1)}else o.dialogObjectList=[]})),0==o.dialogObjectList.length&&(o.dialogVisibleStatus=!1,o.dialogIsHideing=!1)}),500),e.callback&&e.callback()},destroyDialog:function(e){var t=this.getModuleTree(this.PageSettingData.page.layout.children,e);t&&"activerender"==t.renderType&&$("#router_page_"+this.routerId+" #"+e).remove()},showHideNoLoadModule:function(e){this.resetLayoutInnerModuleLoadedStatus(this.PageSettingData.page.layout.children,e),this.initModuleTreeToPage()},initModuleTreeToPage:function(e,t,a,n){var o,r,s,c=this,l=this;if(e=e||l.PageSettingData.page.layout.children,e instanceof Array||(e=[e]),e.forEach((function(t,a){if("dialog"==t.comType&&!0!==t.renderLicence){var n=t.props.compositeAttr.dialogRenderType;if(t.renderType=n,t.renderLicence=!("firstrender"==n||"activerender"==n),!t.renderLicence)return}if(!t.hasLoading&&!o){t.hasLoading=!0,t.loading=!0,o=t;var l=IDM.setting.applications.basicAttributeAuthorizeConfig,d=l.openAuthorize;if(t.props&&t.props.basicAttr&&"show"==t.props.basicAttr.showType||!0===t.againLoad&&t.props&&t.props.basicAttr&&"role"!=t.props.basicAttr.showType)console.log("🚀 ~ file: Page.vue ~ line 1888 ~ moduleData.forEach ~ item.againLoad",t.againLoad);else if(t.props&&t.props.basicAttr&&"hide"==t.props.basicAttr.showType)"load"==t.props.basicAttr.hideType?o.loadAndHide=!0:o=null,t.loaded=!0;else if(!0===d){var p=l.privilege||{},u=-1,g=l.role||{},h=-1,m=l.dept||{},f=-1,v=l.user||{},w=-1;if(!0===p.open&&p.comparisonObject&&t.props&&t.props.basicAttr&&t.props.basicAttr.privilegeList&&t.props.basicAttr.privilegeList.length){var I=IDM.express.replace("@["+p.comparisonObject+"]",Object(i["a"])({IDM:IDM,window:window},c.pageInterfaceResultObject));p.separator&&"array"!=IDM.type(I)&&(I=I.split(p.separator)),u=!1,t.props.basicAttr.privilegeList.forEach((function(e){var t=IDM.express.replace("@["+(p.comparisonKey||"key")+"]",e);(void 0===I||I.indexOf(t)>-1)&&(u=!0)}))}if(!0===g.open&&g.comparisonObject&&t.props&&t.props.basicAttr&&t.props.basicAttr.roleList&&t.props.basicAttr.roleList.length){var b=IDM.express.replace("@["+g.comparisonObject+"]",Object(i["a"])({IDM:IDM,window:window},c.pageInterfaceResultObject));g.separator&&"array"!=IDM.type(b)&&(b=b.split(g.separator)),h=!1,t.props.basicAttr.roleList.forEach((function(e){var t=IDM.express.replace("@["+(g.comparisonKey||"key")+"]",e);(void 0===b||b.indexOf(t)>-1)&&(h=!0)}))}if(!0===m.open&&m.comparisonObject&&t.props&&t.props.basicAttr&&t.props.basicAttr.deptList&&t.props.basicAttr.deptList.length){var y=IDM.express.replace("@["+m.comparisonObject+"]",Object(i["a"])({IDM:IDM,window:window},c.pageInterfaceResultObject));m.separator&&"array"!=IDM.type(y)&&(y=y.split(m.separator)),f=!1,t.props.basicAttr.deptList.forEach((function(e){var t=IDM.express.replace("@["+(m.comparisonKey||"key")+"]",e);(void 0===y||y.indexOf(t)>-1)&&(f=!0)}))}if(!0===m.open&&m.comparisonObject&&t.props&&t.props.basicAttr&&t.props.basicAttr.deptColumns&&t.props.basicAttr.deptColumns.length){var D=IDM.express.replace("@["+m.comparisonObject+"]",Object(i["a"])({IDM:IDM,window:window},c.pageInterfaceResultObject));m.separator&&"array"!=IDM.type(D)&&(D=D.split(m.separator)),f=!1,void 0===D?f=!0:t.props.basicAttr.deptColumns.forEach((function(e){var t=e.deptList,a=e.includeChild;t&&t.forEach((function(e){var t=IDM.express.replace("@["+(m.comparisonKey||"key")+"]",e);("0"==a&&"array"==IDM.type(D)&&D[D.length-1]==t||"1"==a&&D.indexOf(t)>-1)&&(f=!0)}))}))}if(!0===v.open&&v.comparisonObject&&t.props&&t.props.basicAttr&&t.props.basicAttr.userList&&t.props.basicAttr.userList.length){var M=IDM.express.replace("@["+v.comparisonObject+"]",Object(i["a"])({IDM:IDM,window:window},c.pageInterfaceResultObject));w=!1;var S=t.props.basicAttr.userList.map((function(e){var t=IDM.express.replace("@["+(v.comparisonKey||"key")+"]",e);return t}));S.indexOf(M)>-1&&(w=!0)}-1===u&&-1===h&&-1===f&&-1===w||-1!==u&&u||-1!==h&&h||-1!==f&&f||-1!==w&&w||(o=null,t.loaded=!0)}if(o)for(var P=0;P<e.length;P++)if("dialog"!=e[P].comType&&a>P?r=e[P]:a<P&&"dialog"!=e[P].comType&&!s&&(s=e[P]),r&&s)break}})),o){var d=o;d.mountComplete=this.moduleMountComplete,d.moduleReload=this.moduleReload;var p=l.createModuleDom(d),u="";if("dialog"==d.comType)u=l.PageSettingData.id,$("#idm_dialog_wrap_"+l.routerId).append(p);else if("absolute"==d.positionMode&&(!t||t&&a&&"0"==a.comId))u=l.PageSettingData.id,$("#idm_hover_layer_wrap").append(p),this.addModuleEndpoint(d);else if(n)u=n,$("#router_page_"+l.routerId+" #"+u).after(p);else if(t&&a)if(u=a.packageid,u==l.PageSettingData.id)$("#PAGE_"+u+"_"+l.routerId).append(p);else{var g=$("#router_page_"+l.routerId+" #"+u);g.removeClass("drag_container_empty");var h=g.find(">*[idm-ctrl]");if(h.show(),d.containerIndex||"0"==d.containerIndex){var m=h.find(".drag_container[idm-ctrl-id='"+a.id+"'][idm-container-index="+d.containerIndex+"]");if(m&&m.append(p),m&&m.removeClass("drag_container_empty"),!m||m&&0==m.length)return o.nocontainer=!0,l.initModuleTreeToPage(),void(l.pageModuleDataIsLoaded(null,!0)&&l.requestPageCommonInterfaceData())}else r&&h.find("#"+r.packageid).length?h.find("#"+r.packageid).after(p):s&&h.find("#"+s.packageid).length?h.find("#"+s.packageid).before(p):h.append(p)}else a||(r?$("#router_page_"+l.routerId+" #"+r.packageid).after(p):s&&$("#router_page_"+l.routerId+" #"+s.packageid).before(p));d.env="production",d.routerId=this.routerId,d.pageid=this.pageid,"svg"==d.comType?l.moduleMountComplete(d):l.IDM.module.addModuleToQueue(d)}else e.forEach((function(e){("dialog"!=e.comType||e.renderLicence)&&e.loaded&&e.children&&e.children.length>0&&l.initModuleTreeToPage(e.children,!0,e)})),null==o&&this.pageModuleDataIsLoaded(null,!0,"loaded")&&this.requestPageCommonInterfaceData(!0);return o},pageModuleDataIsLoaded:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hasLoading",o=this,i=!0;return e=e||o.PageSettingData.page.layout.children,e instanceof Array||(e=[e]),e.forEach((function(e){("dialog"!=e.comType||e.renderLicence)&&(e[n]||!0===e.nocontainer||(i=!1))})),i&&e.forEach((function(e){("dialog"!=e.comType||e.renderLicence)&&e.children&&e.children.length>0&&i&&(i=a.pageModuleDataIsLoaded(e.children,t,n))})),i},createModuleDom:function(e){var t=this;e.packageid=e.packageid||"component_"+IDM.UUID(),e.id=e.id||e.packageid+"_inner";var a=$("<div />");a.attr("id",e.packageid),a.attr("idm-com-anchor-id",e.packageid),a.attr("idm-com-id",e.comId),a.attr("idm-com-classid",e.classId),a.attr("idm-com-classname",e.className),e.loadAndHide&&a.attr("style","display:none"),a.addClass("idm_module"),a.addClass(e.packageid);var n=$("<div />").attr("id","idm_"+e.id+this.routerId);return"svg"==e.comType&&e.svgData&&(n.append(e.svgData),t.svgComponentPropsHandle(n,e)),a.append(n),"absolute"==e.positionMode&&t.createHoverLayoutHandle(a,e),a},createHoverLayoutHandle:function(e,t){e.addClass("idm_module_absolute"),this.resetHoverModuleStyleInfo(e,t)},resetHoverModuleStyleInfo:function(e,t){var a=this,n=t.props&&t.props.basicAttr?t.props&&t.props.basicAttr:{},o=n.positionOrigin||"leftTop",i=n.positionWH||"".concat(a.defaultModuleSize.width,".").concat(a.defaultModuleSize.height);i=i.split(",");var r=i.length>0?parseFloat(i[0]):0,s=i.length>1?parseFloat(i[1]):0,c=n.positionXY||"0,0";c=c.split(",");var l=c.length>0?parseFloat(c[0]):0,d=c.length>1?parseFloat(c[1]):0,p=n.zIndex||0,u=0==n.opacity?0:n.opacity||100,g=n.scale||1,h=n.rotateX||0,m=n.rotateY||0,f=n.rotateZ||0,v={};switch(o){case"leftTop":v={left:l+"px",top:d+"px",right:"auto",bottom:"auto",width:r+"px",height:s+"px"};break;case"rightTop":v={left:"auto",top:d+"px",right:l+"px",bottom:"auto",width:r+"px",height:s+"px"};break;case"rightBottom":v={left:"auto",top:"auto",right:l+"px",bottom:d+"px",width:r+"px",height:s+"px"};break;case"leftBottom":v={left:l+"px",top:"auto",right:"auto",bottom:d+"px",width:r+"px",height:s+"px"};break}v["z-index"]=p,v["opacity"]=u/100,v["transform"]="scale(".concat(g,") rotateX(").concat(h,"deg) rotateY(").concat(m,"deg) rotateZ(").concat(f,"deg)"),e&&e.css(v)},getModuleTree:function(e,t){var a,n=this;return e instanceof Array||(e=[e]),e.forEach((function(e){e.packageid==t?a=e:!a&&e.children&&(a=n.getModuleTree(e.children,t))})),a},moduleReload:function(e,t){var a,n=this,o=this.getModuleTree(this.PageSettingData.page.layout.children,e),i=[o];if(t||"0"==t)i=[],o&&o.children&&o.children.forEach((function(e){e.containerIndex==t&&i.push(e)})),a=o;else{var r=o.globalId.split("."),s=r.length<=2?r[0]:r[r.length-2];a=this.getModuleTree(this.PageSettingData.page.layout.children,s)}this.resetLayoutInnerModuleLoadedStatus(i),i&&i.forEach((function(e){$("#router_page_"+n.routerId+" #"+e.packageid).remove()})),this.initModuleTreeToPage(i,!0,a,!1)},moduleMountComplete:function(e){var t=this;this.PageSettingData.page.componentsMap.forEach((function(t){t.packageid==e.packageid&&(t.idmBroadcastMessage=e.idmBroadcastMessage,t.idmSetContextValue=e.idmSetContextValue,t.idmGetContextValue=e.idmGetContextValue)})),console.log("挂载完成，回调返回的数据",e);var a=this.getModuleTree(this.PageSettingData.page.layout.children,e.packageid);if(a.loading=!1,a.loaded=!0,a.children&&a.children.length>0){var n=$("#"+e.packageid);if(0==n.find(":visible").length)var o=0,i=setInterval((function(){o++,0==$("#router_page_"+t.routerId+" #"+e.packageid).find(":visible").length&&o<=20||(clearInterval(i),t.moduleMountCompleteCommon(e))}),5);else setTimeout((function(){t.moduleMountCompleteCommon(e)}),3)}else setTimeout((function(){t.moduleMountCompleteCommon(e)}),3)},moduleMountCompleteCommon:function(e){var t=$("#router_page_"+this.routerId+" #"+e.packageid),a=t.find(">*[idm-ctrl]"),n=a.attr("idm-ctrl"),o=a.attr("idm-ctrl-id"),i=a.attr("id");switch(i||a.attr("id",o),n){case"drag_container":t.addClass("drag_container");break;case"drag_container_inlineblock":t.addClass("drag_container drag_container_inlineblock");break;case"idm_module":break}this.pageModuleDataIsLoaded(null,!0)?this.pageModuleDataIsLoaded(null,!0,"loaded")&&this.requestPageCommonInterfaceData():this.$nextTick((function(){this.initModuleTreeToPage(null,!0,this.PageSettingData.page.layout)}))},initModuleInnerEventHandle:function(e){var t=this,a=$("#router_page_"+t.routerId+" #"+e.packageid),n=a.find(".drag_container[idm-ctrl-id='"+e.id+"'][idm-ctrl-inner]");if(n.length>0){var o=this.getModuleTree(this.PageSettingData.page.layout.children,e.packageid);this.resetLayoutInnerModuleLoadedStatus(o.children),o.children&&o.children.length>0&&(o.children.forEach((function(e){$("#"+e.packageid).remove()})),this.initModuleTreeToPage(o.children,!0,o))}},resetLayoutInnerModuleLoadedStatus:function(e,t){var a=this;e instanceof Array||(e=[e]),e.forEach((function(e){var n=t&&t.indexOf(e.packageid)>-1,o=t;t&&!n||(delete e.loaded,delete e.loading,delete e.hasLoading,n&&(e.againLoad=!0,o=null)),e.children&&e.children.length>0&&a.resetLayoutInnerModuleLoadedStatus(e.children,o)}))},addModuleEndpoint:function(e){var t={isSource:!0,isTarget:!0,endpoint:"Dot"},a=e.props&&e.props.basicAttr?e.props&&e.props.basicAttr:{},n=[0,0],o=[0,0],i=[0,0],r=[0,0],s=[0,0],c=[0,0],l=[0,0],d=[0,0];a.AnchorsTopLeft&&(n=a.AnchorsTop.split(","),o=a.AnchorsTopRight.split(","),i=a.AnchorsRight.split(","),r=a.AnchorsBottomRight.split(","),s=a.AnchorsBottom.split(","),c=a.AnchorsBottomLeft.split(","),l=a.AnchorsLeft.split(","),d=a.AnchorsTopLeft.split(","));var p=[{anchor:[.5,0,0,-1,parseFloat(n[0]),parseFloat(n[1])],cssClass:e.packageid+"_endpoint idm_flow_endpoint endpoint-top"},{anchor:[1,0,0,-1,parseFloat(o[0]),parseFloat(o[1])],cssClass:e.packageid+"_endpoint idm_flow_endpoint endpoint-top-right"},{anchor:[1,.5,1,0,parseFloat(i[0]),parseFloat(i[1])],cssClass:e.packageid+"_endpoint idm_flow_endpoint endpoint-right"},{anchor:[1,1,0,1,parseFloat(r[0]),parseFloat(r[1])],cssClass:e.packageid+"_endpoint idm_flow_endpoint endpoint-bottom-right"},{anchor:[.5,1,0,1,parseFloat(s[0]),parseFloat(s[1])],cssClass:e.packageid+"_endpoint idm_flow_endpoint endpoint-bottom"},{anchor:[0,1,0,1,parseFloat(c[0]),parseFloat(c[1])],cssClass:e.packageid+"_endpoint idm_flow_endpoint endpoint-bottom-left"},{anchor:[0,.5,-1,0,parseFloat(l[0]),parseFloat(l[1])],cssClass:e.packageid+"_endpoint idm_flow_endpoint endpoint-left"},{anchor:[0,0,0,-1,parseFloat(d[0]),parseFloat(d[1])],cssClass:e.packageid+"_endpoint idm_flow_endpoint endpoint-top-left"}];this.plumbIns.addEndpoints(e.packageid,p,t)},linkConnectionStyleChange:function(e){var t=this,a=this.PageSettingData.page.linkList.filter((function(t){return t.id==e.id}));if(a.length){var n=a[0],o=n.propData;this.plumbIns.select().each((function(e){if(e.id==n.connId){if(o.linkType){var a=[o.linkType];switch(o.linkType){case"Bezier":a[1]={curviness:o.BezierCurviness||0==o.BezierCurviness?o.BezierCurviness:150};break;case"Straight":a[1]={stub:o.StraightStub||0==o.StraightStub?o.StraightStub:0,gap:o.StraightGap||0==o.StraightGap?o.StraightGap:0};break;case"Flowchart":a[1]={stub:o.FlowchartStub||0==o.FlowchartStub?o.FlowchartStub:30,gap:o.FlowchartGap||0==o.FlowchartGap?o.FlowchartGap:2,alwaysRespectStubs:!0,cornerRadius:o.FlowchartCornerRadius||0==o.FlowchartCornerRadius?o.FlowchartCornerRadius:8,midpoint:o.FlowchartMidpoint||0==o.FlowchartMidpoint?o.FlowchartMidpoint:0};break;case"StateMachine":a[1]={curviness:o.StateMachineCurviness||0==o.StateMachineCurviness?o.StateMachineCurviness:10,margin:o.StateMachineMargin||0==o.StateMachineMargin?o.StateMachineMargin:5,proximityLimit:o.StateMachineProximityLimit||0==o.StateMachineProximityLimit?o.StateMachineProximityLimit:80};break}e.setConnector(a)}var i=_.cloneDeep(w["a"].ins.PaintStyle);o.PaintStyleStroke&&o.PaintStyleStroke.hex8&&(i.stroke=o.PaintStyleStroke.hex8),o.PaintStyleStrokeWidth&&(i.strokeWidth=o.PaintStyleStrokeWidth),e.setPaintStyle(i);var r=_.cloneDeep(w["a"].ins.HoverPaintStyle);o.HoverPaintStyleStroke&&o.HoverPaintStyleStroke.hex8&&(r.stroke=o.HoverPaintStyleStroke.hex8),o.HoverPaintStyleStrokeWidth&&(r.strokeWidth=o.HoverPaintStyleStrokeWidth),e.setHoverPaintStyle(r),e.removeAllOverlays(),o.overlayList&&o.overlayList.forEach((function(a){var n={id:a.overlayId};if(a.location&&a.location.split(",").length>1){var o=a.location.split(",");n.location=[parseFloat(o[0]),parseFloat(o[1])]}else a.location&&(n.location=parseFloat(a.location));switch(n.direction=a.direction||1,a.type){case"Arrow":case"PlainArrow":case"Diamond":if(a.arrowSize){var i=a.arrowSize.split(",");i.length>0&&(n.width=parseFloat(i[0]),n.length=parseFloat(i[0])),i.length>1&&(n.length=parseFloat(i[1]))}break;case"Label":n.label=a.labelText;var r={};a.font&&(r.font=a.font),a.padding&&a.padding.inputVal&&a.padding.selectVal&&(r.padding=a.padding.inputVal+a.padding.selectVal),a.borderWidth&&(r.borderWidth=a.borderWidth),a.fillStyle&&a.fillStyle.hex8&&(r.fill=a.fillStyle.hex8),a.color&&a.color.hex8&&(r.color=a.color.hex8),a.borderStyle&&a.borderStyle.hex8&&(r.borderStyle=a.borderStyle.hex8),n.labelStyle=r,n.cssClass="idm-overlay-label";break;case"Custom":if(!(a.contentFunction&&a.contentFunction.length>0))return;n.create=function(e){return t.commonCustomEventFunHandle(a,"contentFunction",{component:e,overlaySetData:a})};break}a.clickFunction&&a.clickFunction.length>0&&(n.events={click:function(e,n){t.commonCustomEventFunHandle(a,"clickFunction",{event:e,overlay:n,overlaySetData:a})}}),e.addOverlay([a.type,n])}))}}))}},reconnectionAllModule:function(){var e=this,t=this.plumbIns.select();e.PageSettingData.page.linkList.forEach((function(a){var n=!1;try{t.each((function(e){e.endpoints&&e.endpoints.length>1&&e.endpoints[0].anchor.x==a.sourceEndpoint.x&&e.endpoints[0].anchor.y==a.sourceEndpoint.y&&e.endpoints[1].anchor.x==a.targetEndpoint.x&&e.endpoints[1].anchor.y==a.targetEndpoint.y&&(n=!0)}))}catch(i){}if(!n){var o={source:e.getModuleEndpoint(a.sourceId,a.sourceEndpoint.x,a.sourceEndpoint.y),target:e.getModuleEndpoint(a.targetId,a.targetEndpoint.x,a.targetEndpoint.y),parameters:{isreconnection:!0,linkObjectId:a.id}};e.plumbIns.connect(o),e.linkConnectionStyleChange(a)}}))},getModuleEndpoint:function(e,t,a){var n=null;return this.plumbIns.selectEndpoints({source:e}).each((function(e){n||e.anchor.x==t&&e.anchor.y==a&&(n=e)})),n},initJsPlumb:function(){var e=this;this.plumbIns=jsPlumb.getInstance(w["a"].ins),this.plumbIns.ready((function(){e.plumbIns.setContainer("idm_hover_layer_wrap")})),this.plumbIns.bind("connection",(function(t,a){var n=t.connection.getParameters();if(n&&n.isreconnection){var o=e.PageSettingData.page.linkList.filter((function(e){return e.id==n.linkObjectId}));o.length>0&&(t.connection.canvas.id=o[0].canvasId,t.connection.id=o[0].connId)}else;}))}}},b=I,y=a("2877"),D=Object(y["a"])(b,g,h,!1,null,null,null),M=D.exports,S={mixins:[u],name:"Preview",components:{Page:M},data:function(){return{pageid:"",PageSettingData:{},dialogVisibleStatus:!1,dialogIsHideing:!1,dialogObjectList:[],drawerVisible:!1,drawerIframeUrl:"",drawerControlSetPanelOption:null,pagePropData:{},AppPageList:[],currentTransitionType:1}},mounted:function(){this.windowResizeEvent((function(){IDM.broadcast.send({type:"pageResize",rangeModule:"",message:IDM.getClientWH()})}))},created:function(){if(IDM.router.pageDataCachePool=IDM.cachePool(100),this.initCommonRequireJsCss(),IDM.setting.applications.faviconIcoSrc)try{document.head.querySelector("link[rel='icon']").setAttribute("href",IDM.url.getWebPath(IDM.setting.applications.faviconIcoSrc))}catch(e){}this.pageid=this.$route.params.pageid,this.AppPageList.push({routerId:"",pageid:this.pageid,devpreview:"devpreview"==this.pageid,display:!0,mainPage:!0,keep:!0}),this.injectInnerActionToWindow()},methods:{windowResizeEvent:function(e){var t=this;window.onresize=function(){var a=this;t.executePageResize(),a.resizeFlag&&clearTimeout(a.resizeFlag),a.resizeFlag=setTimeout((function(){e(),a.resizeFlag=null}),100)}},executePageResize:function(){for(var e=0;e<this.AppPageList.length;e++){var t=this.AppPageList[e],a=this.$refs["idm_page_"+t.routerId];a instanceof Array&&(a=a[0]),a.pageResize&&a.pageResize(IDM.getClientWH())}},mainPageSettingHandle:function(e){var t=this;return Object(r["a"])(c.a.mark((function a(){return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.PageSettingData=e,a.next=3,t.loadPageElement();case 3:case"end":return a.stop()}}),a)})))()},drawerOnClose:function(){this.drawerVisible=!1,this.commonCustomEventFunHandle(null,"drawerCloseFunction")},drawerOnAfterVisibleChange:function(){this.commonCustomEventFunHandle(null,"drawerAfterVisibleChangeFunction")},injectInnerActionToWindow:function(){window.IdmBuiltin_OpenControlSetPanel=this.IdmBuiltin_OpenControlSetPanel,window.IdmBuiltin_CloseControlSetPanel=this.IdmBuiltin_CloseControlSetPanel,window.IdmBuiltin_OpenUrl=this.IdmBuiltin_OpenUrl,window.IdmBuiltin_OpenDialog=this.IdmBuiltin_OpenDialog,window.IdmBuiltin_CloseDialog=this.IdmBuiltin_CloseDialog,window.IdmBuiltin_ShowModule=this.IdmBuiltin_ShowModule,window.IdmBuiltin_HideModule=this.IdmBuiltin_HideModule,window.IdmBuiltin_InitNewPage=this.IdmBuiltin_InitNewPage,window.IdmBuiltin_backPage=this.IdmBuiltin_backPage,window.IdmBuiltin_changePageUserDefinedStatus=this.IdmBuiltin_changePageUserDefinedStatus,window.IdmBuiltin_executeUserDefinedEvent=this.IdmBuiltin_executeUserDefinedEvent},IdmBuiltin_changePageUserDefinedStatus:function(e){for(var t=e&&e.routerId||"",a=0;a<this.AppPageList.length;a++){var n=this.AppPageList[a];if(t==n.routerId){var o=this.$refs["idm_page_"+n.routerId];o instanceof Array&&(o=o[0]),o.pageUserDefinedStatusChangeHandle(e.status,e.save)}}},IdmBuiltin_executeUserDefinedEvent:function(e,t){for(var a=e&&e.routerId||"",n=0;n<this.AppPageList.length;n++){var o=this.AppPageList[n];if(a==o.routerId){var i=this.$refs["idm_page_"+o.routerId];switch(i instanceof Array&&(i=i[0]),t){case"save":i.userDefinedSave();break;case"reset":i.userDefinedReset();break;case"quit":i.userDefinedQuit();break}}}},transitionAfterEnter:function(){},IdmBuiltin_InitNewPage:function(e){var t=this;this.AppPageList.push({routerId:e.routerId,pageid:e.next,devpreview:"devpreview"==e.next,mainPage:!1,keep:!0,display:!0,scrollTop:$(window).scrollTop()});var a=!1;if(e.meta&&!1===e.meta.keep)this.AppPageList[this.AppPageList.length-2].keep=!1,a=!0;else if(e.meta&&"memory"===e.meta.keep){this.AppPageList[this.AppPageList.length-2].routerId;a=!0}$(window).scrollTop(0),a||setTimeout((function(){try{t.AppPageList[t.AppPageList.length-2].display=!1}catch(e){}}),600),a&&this.$nextTick((function(){var a=IDM.router.pageDataCachePool.get(e.from);if(a){for(var n=null,o=0;o<a.page.componentsMap.length;o++){var i=a.page.componentsMap[o];if(i.packageid==a.page.layout.packageid){n=i.props.compositeAttr;break}}IDM.router.commonCustomEventFunHandle(n,"pageNoKeepDestroyedFunction",e,t.AppPageList[t.AppPageList.length-2].pageid)}}))},IdmBuiltin_backPage:function(e,t){for(var a=this,n=null,o=0;o<this.AppPageList.length;o++){var i=this.AppPageList[o];i.routerId==e.routerId&&this.AppPageList.splice(o,1),e&&!1===e.meta.keep&&(t&&t.routerId==i.routerId||!t&&i.mainPage)&&(i.keep=!0),(t&&t.routerId==i.routerId||!t&&i.mainPage)&&(n=i,i.display=!0,$(window).scrollTop(i.scrollTop))}this.$nextTick((function(){var o=IDM.router.pageDataCachePool.get(e.next),i=null;if(o){for(var r=0;r<o.page.componentsMap.length;r++){var s=o.page.componentsMap[r];if(s.packageid==o.page.layout.packageid){i=s.props.compositeAttr;break}}IDM.router.commonCustomEventFunHandle(i,"pageBackDestroyedFunction",e,e.next)}if(IDM.broadcast.unRegisterModule(e.routerId),o=IDM.router.pageDataCachePool.get(n.pageid),o){for(var c=0;c<o.page.componentsMap.length;c++){var l=o.page.componentsMap[c];if(l.packageid==o.page.layout.packageid){i=l.props.compositeAttr;break}}IDM.router.commonCustomEventFunHandle(i,"pageActivatedFunction",t,n.pageid),a.sendBroadcastMessage({type:"pageActivated",message:n},n.routerId)}}))},IdmBuiltin_OpenControlSetPanel:function(e){var t=this.pagePropData.moduleControlCenterSettingUrl;if(t){if(t+=-1==t.indexOf("?")?"?":"&",e&&e.controlSetPanelOption){if(!(e.controlSetPanelOption.param&&e.controlSetPanelOption.param.marketModuleId&&e.controlSetPanelOption.param.pageId&&e.controlSetPanelOption.param.packageid))return;Object.keys(e.controlSetPanelOption.param).forEach((function(a,n){n>0&&(t+="&"),t=t+a+"="+e.controlSetPanelOption.param[a]}))}this.drawerIframeUrl=IDM.url.getWebPath(t),this.drawerControlSetPanelOption=e.controlSetPanelOption||null,this.drawerVisible=!0,this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.success&&this.drawerControlSetPanelOption.success(e.controlSetPanelOption.controlSetPanelId)}},IdmBuiltin_CloseControlSetPanel:function(e){if(e&&e.innerClose||e&&e.controlSetPanelOption&&e.controlSetPanelOption.controlSetPanelId&&this.drawerControlSetPanelOption&&e.controlSetPanelOption.controlSetPanelId==this.drawerControlSetPanelOption.controlSetPanelId)switch(this.drawerOnClose(),e.actionType){case"close":case"other":this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.other&&this.drawerControlSetPanelOption.other();break;case"commit":this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.yes&&this.drawerControlSetPanelOption.yes();break;case"reset":this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.reset&&this.drawerControlSetPanelOption.reset();break}},IdmBuiltin_OpenUrl:function(e){var t=e.customParam?e.customParam:e;window.open(IDM.url.getWebPath(t.openUrl),t.openName,t.openFeatures)},IdmBuiltin_OpenDialog:function(e){var t=this,a=e.customParam?e.customParam:e,n=e.routerId||"",o=[],i=0,r=[];if(a.targetModule.forEach((function(a){o.push(a.moduleId);for(var s=0;s<t.AppPageList.length;s++){var c=t.AppPageList[s];if(n==c.routerId){var l=t.$refs["idm_page_"+c.routerId];l instanceof Array&&(l=l[0]);var d=l.renderDialog(a.moduleId);!1!==d&&(r.push(l),d.dialogIsHideing=!1,e.layerOption&&(d.layerOption=e.layerOption),t.dialogObjectList.push(d),i++,l.setShowDialog(d))}}})),0!=i){var s=this;this.$nextTick((function(){setTimeout((function(){s.sendBroadcastMessage({type:"linkageOpenDialog",message:e,rangeModule:o})}),5)})),e.callback&&e.callback()}},IdmBuiltin_CloseDialog:function(e){for(var t=e.routerId||"",a=0;a<this.AppPageList.length;a++){var n=this.AppPageList[a];if(t==n.routerId){var o=this.$refs["idm_page_"+n.routerId];o instanceof Array&&(o=o[0]),o.closeThisOpenDialog(e)}}},IdmBuiltin_ShowModule:function(e){var t=e.customParam?e.customParam:e,a=e.routerId||"",n=[],o=[];if(t.targetModule.forEach((function(e){n.push(e.moduleId);var t=$((a?"#router_page_"+a+" ":"")+"#"+e.moduleId);t&&0==t.length?o.push(e.moduleId):t.show()})),o.length){var i=this.$refs["idm_page_"+a];i&&(i instanceof Array&&(i=i[0]),i.showHideNoLoadModule(o))}this.sendBroadcastMessage({type:"linkageShowModule",message:e,rangeModule:n}),e.callback&&e.callback()},IdmBuiltin_HideModule:function(e){var t=e.customParam?e.customParam:e,a=e.routerId||"",n=[];t.targetModule.forEach((function(e){n.push(e.moduleId),$((a?"#router_page_"+a+" ":"")+"#"+e.moduleId).hide()})),this.sendBroadcastMessage({type:"linkageHideModule",message:e,rangeModule:n}),e.callback&&e.callback()},weixinEventHandle:function(e){var t=this,a=this,n=e.compositeAttr;if(n.switchWeixinJSSDK){var o=IDM.setting.weixin.requireJsCss;if(o&&"string"==IDM.type(o)&&(o=[o]),o&&IDM.setting.weixin.signatureUrl){var r=[];o.forEach((function(e){return r.push(IDM.url.getWebPath(e))})),IDM.http.importFiles(r).then((function(){console.log("加载微信requireJsCss文件完成",r),IDM.http.get(IDM.setting.weixin.signatureUrl,{url:window.location.href.split("#")[0]}).then((function(e){var o=e.data;"200"==o.code&&o.data&&(o=o.data),wx.config({beta:!0,debug:!0===IDM.setting.weixin.debug,appId:o.appId,timestamp:o.timestamp,nonceStr:o.nonceStr,signature:o.signature,jsApiList:IDM.setting.weixin.jsApiList}),wx.ready((function(){var e=n.weixinReadyFunction;e&&e.forEach((function(e){try{window[e.name]&&window[e.name].call(t,Object(i["a"])(Object(i["a"])({},a.commonParam()),{},{customParam:e.param,_this:t}))}catch(n){}}))})),wx.error((function(e){var o=n.weixinErrorFunction;o&&o.forEach((function(n){try{window[n.name]&&window[n.name].call(t,Object(i["a"])(Object(i["a"])({},a.commonParam()),{},{customParam:n.param,_this:t,error:e}))}catch(o){}}))}))})).catch((function(e){console.log("微信授权出错",e)}))})).catch((function(e){console.log("加载微信requireJsCss文件出错")}))}}},webSocketEventHandle:function(e){var t=this,a=e.compositeAttr;a.switchWebSocket&&(a.websocketInitName&&"function"==typeof window[a.websocketInitName]&&window[a.websocketInitName](),a.websocketOpenEvent&&(window[a.websocketOpenEvent]=function(){var e=this,n=a.websocketOpenFunction;n&&n.forEach((function(a){try{window[a.name]&&window[a.name].call(e,Object(i["a"])(Object(i["a"])({},t.commonParam()),{},{customParam:a.param,_this:e}))}catch(n){}}))}),a.websocketMessageEvent&&(window[a.websocketMessageEvent]=function(e){var n=this;IDM.broadcast.send({type:"websocket",rangeModule:"",globalSend:!0,message:e});var o=a.websocketMessageFunction;o&&o.forEach((function(a){try{window[a.name]&&window[a.name].call(n,Object(i["a"])(Object(i["a"])({},t.commonParam()),{},{customParam:a.param,msgData:e,_this:n}))}catch(o){}}))}))},initCommonRequireJsCss:function(){if(IDM.setting.applications.commonRequireJsCss&&IDM.setting.applications.commonRequireJsCss instanceof Array){var e=[];IDM.setting.applications.commonRequireJsCss.forEach((function(t){return e.push(IDM.url.getWebPath(t))}));try{IDM.http.importFiles(e).then((function(){console.log("加载commonRequireJsCss文件完成",IDM.setting.applications.commonRequireJsCss)})).catch((function(e){console.log("加载commonRequireJsCss文件出错")}))}catch(t){console.error("加载commonRequireJsCss文件脚本内部出错")}}},initPulltorefreshPlugin:function(){var e=this,t=this.PageSettingData.page.layout.props.compositeAttr;t.openPulltorefresh?IDM.http.importFiles([IDM.url.getWebPath("~/lib/pulltorefreshjs/index.umd.min.js")]).then((function(){console.log("加载pulltorefreshjs文件完成");try{var t=PullToRefresh.init({mainElement:"body",instructionsPullToRefresh:"下拉刷新",instructionsReleaseToRefresh:"松手刷新",instructionsRefreshing:"刷新中",onRefresh:function(){e.initPulltorefreshHandle()},shouldPullToRefresh:function(){return IDM.page.getPullToRefreshStatus()&&!$(window).scrollTop()}});IDM.page.startPullToRefresh(t)}catch(a){console.log("加载pulltorefreshjs出错",a)}})).catch((function(e){console.error("加载pulltorefreshjs文件出错",e)})):IDM.page.stopPullToRefresh()},initPulltorefreshHandle:function(){var e=this,t=this.AppPageList[this.AppPageList.length-1].pageid,a=this.AppPageList[this.AppPageList.length-1].routerId,n=IDM.router.pageDataCachePool.get(t)||this.PageSettingData,o=n.page.layout.props.compositeAttr;switch(o.pulltorefreshType){case"page":window.location.reload();break;case"data":try{var i=this.$refs["idm_page_"+a];i instanceof Array&&(i=i[0]),i.fetchUserInfo(o,!0,!0,!0)}catch(s){}break;case"custom":var r=o.pulltorefreshFunction;r&&r.forEach((function(t){window[t.name]&&window[t.name].call(e,{customParam:t.param})}));break}},initVconsolePlugin:function(){var e=this.PageSettingData.page.layout.props.compositeAttr,t=e.showVconsole;t&&IDM.http.importFiles([IDM.url.getWebPath("~/lib/vconsole/vconsole.min.js")]).then((function(){new window.VConsole})).catch((function(e){console.log("加载vconsole插件出错")}))},initLoadbarResource:function(){var e=this.PageSettingData.page.layout.props.compositeAttr;if(e.openPreviewLoadStyle){var t=e.previewLoadColor;t&&t.hex8&&document.documentElement.style.setProperty("--idmPreviewLoadColor",IDM.hex8ToRgbaString(t.hex8)),IDM.http.importFiles([IDM.url.getWebPath("~/lib/pace/pace.min.js"),IDM.url.getWebPath("~/lib/pace/minimal.css")]).then((function(){idmPace.stop(),Pace.start()})).catch((function(e){console.log("加载进度条文件出错")}))}else idmPace.stop()},loadPageElement:function(){var e=this;return Object(r["a"])(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.pagePropData=e.PageSettingData.page.layout.props.compositeAttr,e.initLoadbarResource(),e.initVconsolePlugin(),e.webSocketEventHandle(e.PageSettingData.page.layout.props),e.weixinEventHandle(e.PageSettingData.page.layout.props),e.initPulltorefreshPlugin();case 6:case"end":return t.stop()}}),t)})))()}},watch:{$route:function(e,t){IDM.router.idmInnerRouterEvent?IDM.router.idmInnerRouterEvent=!1:(console.log("🚀 ~ file: Preview.vue ~ line 861 ~ $route ~ from",t),console.log("🚀 ~ file: Preview.vue ~ line 861 ~ $route ~ to",e),IDM.router.innerRouterChangeEvent(e,t))}}},P=S,C=(a("a081"),Object(y["a"])(P,n,o,!1,null,null,null));t["default"]=C.exports},a081:function(e,t,a){"use strict";a("c29e")},a34a:function(e,t,a){e.exports=a("96cf")},c29e:function(e,t,a){}}]);
//# sourceMappingURL=preview.9477c70a.js.map