(window["idmcore_webpackJsonp"]=window["idmcore_webpackJsonp"]||[]).push([["preview"],{"0a1c":function(e,t,a){"use strict";a("0f92")},"0f92":function(e,t,a){},"5b0b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"idm_render_engine_container"},[t("transition-group",{staticClass:"idm_render_engine_router_container",attrs:{tag:"div",name:"slide-fade"},on:{"after-enter":e.transitionAfterEnter}},[e._l(e.AppPageList,(function(a,o){return[a.keep?t("Page",{key:a.pageid+o,ref:"idm_page_".concat(a.routerId),refInFor:!0,tag:"component",attrs:{styleObject:!1===a.display?{display:"none"}:{},pageid:a.pageid,routerId:a.routerId,devpreview:a.devpreview,mainPage:a.mainPage,index:o},on:{mainPageSettingHandle:e.mainPageSettingHandle}}):e._e()]}))],2),t("idm-a-drawer",{attrs:{title:e.pagePropData.drawerTitleShow?e.pagePropData.drawerTitle:"",placement:e.pagePropData.drawerPlacement||"right",closable:!1!==e.pagePropData.drawerClosable,destroyOnClose:e.pagePropData.drawerDestroyOnClose,maskClosable:!1!==e.pagePropData.drawerMaskClosable,mask:!1!==e.pagePropData.drawerMask,keyboard:!1!==e.pagePropData.drawerKeyboarde,maskStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerMaskStyleFunction")||{},wrapStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerWrapStyleFunction")||{},drawerStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerStyleFunction")||{},headerStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerHeaderStyleFunction")||{},bodyStyle:e.commonCustomEventFunHandle(e.pagePropData,"drawerBodyStyleFunction")||{},width:e.pagePropData.drawerWidth||256,height:e.pagePropData.drawerHeight||256,zIndex:e.pagePropData.drawerZIndex||1e3,wrapClassName:(e.pagePropData.drawerWrapClassName||"")+" idm_module_setting_drawer",visible:e.drawerVisible},on:{close:e.drawerOnClose,afterVisibleChange:e.drawerOnAfterVisibleChange}},[t("iframe",{staticClass:"idm_drawer_iframe_basestyle",attrs:{src:e.drawerIframeUrl,name:"idm_drawer_iframe"}})])],1)},n=[],i=a("8ee2"),r=a("dff4"),s=a("d34b"),c=(a("0b41"),a("77b0"),a("aa56"),a("08e2"),a("6687"),a("a361"),a("3d2c"),a("8bbf")),d=a.n(c),l={fetchPageSettingDataForVersion:function(e){return e.savetype=IDM.setting.pageSchema.saveType,"disk"==IDM.setting.pageSchema.saveType&&e.version?IDM.http.get(IDM.setting.pageSchema.jsonDir.replace(/{projectNo}/g,e.projectNo||IDM.setting.webRoot.projectNo).replace(/{pageid}/g,e.pageid).replace(/{version}/g,e.version)):IDM.http.get(IDM.setting.api.pageSettingDataUrl||IDM.setting.mockurl.pageSettingDataUrl,e)},fetchApplicationInfo:function(e,t){return IDM.http.get(e,t)},fetchUserInfo:function(e,t){return IDM.http.get(e,t)},fetchUserCustomizationInfo:function(e,t){return IDM.http.get(e,t)},fetchThemeInfo:function(e,t){return IDM.http.get(e,t)},getPageInterfaceInfo:function(e,t){return IDM.http.get(e,t)},postPageInterfaceInfo:function(e,t,a){return IDM.http.post(e,t,a)}};d.a.prototype.$previewApi=l,d.a.prototype.$replace=function(e,t){return IDM.express.replace.call(this,e,t)},d.a.prototype.$eval=function(e,t){return IDM.express.eval.call(this,e,t)};var u={props:{},data:function(){return{}},watch:{},methods:{themeInterfaceHandle:function(e,t){var a=this,o=this,n=this.PageSettingData.page.layout.props.compositeAttr,r=n.themeDataFiled,s=n.themeDataFunction,c=e;if(r){var d=r,l={IDM:window.IDM};l[t]=e,d&&(d=t+(d.startsWiths("[")?"":".")+d,c=window.IDM.express.replace.call(this,"@["+d+"]",l))}if(s&&s.length>0){var u=Object(i["a"])(Object(i["a"])({},o.commonParam()),{},{_this:o});u[t]=e,s.forEach((function(e){try{c=window[e.name]&&window[e.name].call(a,Object(i["a"])({customParam:e.param},u))}catch(t){}}))}o.mainPage&&IDM.theme.setCurrentThemeInfo(c),o.themeSetObject=c},setCurrentPageTitle:function(e){var t=this;if(document.title=IDM.express.replace(this.PageSettingData.pageBaseInfo.title||IDM.setting.applications.defaultTitle,Object(i["a"])({IDM:IDM,window:window},this.pageInterfaceResultObject)),this.mainPage&&e&&IDM.setting.applications.pageDynamicHeadMetaConfig&&IDM.setting.applications.pageDynamicHeadMetaConfig.length)try{for(var a=function(e){var a=IDM.setting.applications.pageDynamicHeadMetaConfig[e];n=document.createElement("meta"),Object.keys(a).forEach((function(e){var o=IDM.express.replace(a[e],Object(i["a"])({IDM:IDM,window:window},t.pageInterfaceResultObject));n.setAttribute(e,o)})),document.head.appendChild(n)},o=0;o<IDM.setting.applications.pageDynamicHeadMetaConfig.length;o++){var n;a(o)}}catch(r){console.error(r)}},commonCustomEventFunHandle:function(e,t){var a=this,o=this;e=e||this.pagePropData;var n,r=e[t];return r&&r.forEach((function(e){n=window[e.name]&&window[e.name].call(a,Object(i["a"])(Object(i["a"])({},o.commonParam()),{},{customParam:e.param,_this:o}))})),n},commonParam:function(){var e=IDM.url.queryObject(),t={pageId:window.IDM.broadcast&&window.IDM.broadcast.pageModule?window.IDM.broadcast.pageModule.id:"",urlData:JSON.stringify(e)};return t},sendBroadcastMessage:function(e,t){window.IDM.broadcast&&window.IDM.broadcast.send(e,t||"")},deleteLayoutAttachAttr:function(e){var t=this;e instanceof Array||(e=[e]),e.forEach((function(e){delete e.env,delete e.hasLoading,delete e.loaded,delete e.loading,delete e.moduleReload,delete e.mountComplete,delete e.props,delete e.routerId,e.children&&e.children.length>0&&t.deleteLayoutAttachAttr(e.children)}))}},mounted:function(){}},p=a("2396"),g=function(){var e=this,t=e._self._c;return t("div",{staticClass:"idm_render_engine_page_container idm_page_box",class:e.IDM.setting.applications.themeNamePrefix+("object"===Object(p["a"])(e.themeSetObject)?JSON.stringify(e.themeSetObject):e.themeSetObject),style:Object(i["a"])({zIndex:e.index},e.styleObject),attrs:{id:"router_page_".concat(e.routerId),"data-pageid":e.pageid}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogVisibleStatus,expression:"dialogVisibleStatus"}],staticClass:"idm_dialog_wrap_preview",attrs:{id:"idm_dialog_wrap_".concat(e.routerId),hideing:"".concat(e.dialogIsHideing?"hideing":"")}},e._l(e.dialogObjectList,(function(a,o){return t("div",{key:o,staticClass:"idm_dialog_shade_layer",class:"idm_dialog_shade_layer_"+a.packageid,attrs:{"dialog-id":a.packageid},on:{click:e.layerClickHandle}})})),0),t("div",{staticClass:"idm_hover_layer_wrap_preview",attrs:{id:"idm_hover_layer_wrap"}}),t("div",{ref:"idm_page_root",staticClass:"idm_page_root",class:"".concat(e.PageSettingData.id),attrs:{id:"PAGE_"+e.PageSettingData.id+"_"+e.routerId,"idm-com-anchor-id":e.PageSettingData.id}}),t("transition",{attrs:{name:"idm_page_user_defined_topbar"}},[e.pageUserDefinedStatus?t("div",{staticClass:"idm_page_user_defined_topbar"},[t("div",{staticClass:"idm_page_user_defined_logo"},[t("svg",{staticClass:"user-defined-logo-svg",attrs:{t:"1659591467192",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1396",width:"32",height:"32"}},[t("path",{attrs:{d:"M727.008 487.232l194.016-184.32a99.2 99.2 0 0 0 0-140.288l-48.416-48.416a99.2 99.2 0 0 0-138.464-1.76L544.64 292.384l-184.064-196.64-1.504-1.568a64.832 64.832 0 0 0-91.712-0.384L129.184 231.968a64.8 64.8 0 0 0-1.12 90.144l181.344 193.728-171.456 162.88a99.264 99.264 0 0 0-28.256 49.28l-28.992 123.744a65.632 65.632 0 0 0 82.4 77.92l119.296-35.136a99.744 99.744 0 0 0 40.32-23.232l169.056-160.608 203.616 217.536 1.504 1.568a64.832 64.832 0 0 0 91.712 0.384l138.176-138.176a64.8 64.8 0 0 0 1.12-90.144l-200.896-214.624zM319.424 786.176l-90.112-90.112a31.488 31.488 0 0 0-9.792-6.496L667.104 264.352l94.272 94.272c1.408 1.408 3.168 2.08 4.768 3.168L319.424 786.176zM778.208 158.784a35.2 35.2 0 0 1 49.12 0.64l48.416 48.416c13.76 13.76 13.76 36.032-0.64 50.4l-64.448 61.216c-1.28-2.08-2.24-4.288-4.064-6.112l-93.12-93.12 64.736-61.44zM288.512 399.904c8-0.128 16-3.168 22.112-9.28l48-48a31.968 31.968 0 1 0-45.248-45.248l-48 48a31.68 31.68 0 0 0-8.928 20.256L174.816 278.4c-0.512-0.512-0.512-1.024-0.352-1.152L312.64 139.04c0.128-0.128 0.672-0.128 1.248 0.416l184.384 196.992-142.432 135.328-67.328-71.872zM145.024 868.288a1.6 1.6 0 0 1-2.016-1.92l28.992-123.744c0.992-4.16 2.944-7.968 5.312-11.488a31.808 31.808 0 0 0 6.752 10.144l88.288 88.288a35.072 35.072 0 0 1-8 3.552l-119.328 35.168z m598.336 16.672c-0.128 0.128-0.672 0.128-1.248-0.416l-125.6-134.176a31.232 31.232 0 0 0 14.08-7.712l48-48a31.968 31.968 0 1 0-45.248-45.248l-48 48a31.68 31.68 0 0 0-7.296 11.904l-39.904-42.656 142.432-135.328 200.576 214.304c0.48 0.512 0.48 1.024 0.352 1.152l-138.144 138.176z","p-id":"1397"}})]),t("span",{staticStyle:{"margin-left":"10px"}},[e._v("自定义工作台")]),e.pagePropData.switchUserCustomizationCommutant?e._e():t("svg",{staticClass:"fold-svg",style:{transform:"rotate(".concat(e.openUserCustomizationLeftBar?180:0,"deg)")},attrs:{t:"1659592354438",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"17129",width:"24",height:"24"},on:{click:function(t){e.openUserCustomizationLeftBar=!e.openUserCustomizationLeftBar}}},[t("path",{attrs:{d:"M130.901333 529.493333l149.205334 130.517334a8.533333 8.533333 0 0 0 14.122666-6.4V392.533333a8.533333 8.533333 0 0 0-14.122666-6.4L130.901333 516.608a8.533333 8.533333 0 0 0 0 12.8z","p-id":"17130"}}),t("path",{attrs:{d:"M128 213.333333m42.666667 0l682.666666 0q42.666667 0 42.666667 42.666667l0 0q0 42.666667-42.666667 42.666667l-682.666666 0q-42.666667 0-42.666667-42.666667l0 0q0-42.666667 42.666667-42.666667Z","p-id":"17131"}}),t("path",{attrs:{d:"M128 725.333333m42.666667 0l682.666666 0q42.666667 0 42.666667 42.666667l0 0q0 42.666667-42.666667 42.666667l-682.666666 0q-42.666667 0-42.666667-42.666667l0 0q0-42.666667 42.666667-42.666667Z","p-id":"17132"}}),t("path",{attrs:{d:"M384 469.333333m42.666667 0l426.666666 0q42.666667 0 42.666667 42.666667l0 0q0 42.666667-42.666667 42.666667l-426.666666 0q-42.666667 0-42.666667-42.666667l0 0q0-42.666667 42.666667-42.666667Z","p-id":"17133"}})])]),t("div",{staticClass:"idm_page_user_defined_tip"},[e._v(" "+e._s(e.pagePropData.switchUserCustomizationCommutant?"当前模式只支持组件位置对调，您可以移动组件进行组件换位等操作":"您可以对可调整的卡片组件进行移动、添加、删除等操作")+" ")]),t("div",[t("idm-a-button",{attrs:{loading:e.userDefinedSaveLoading,type:"primary"},on:{click:e.userDefinedSave}},[e._v("保 存")]),t("idm-a-button",{staticStyle:{margin:"auto 10px"},on:{click:e.userDefinedQuit}},[e._v("退出编辑")]),t("idm-a-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:e.userDefinedSaveLoading},on:{click:e.userDefinedReset}},[e._v("重置")])],1)]):e._e()]),t("transition",{attrs:{name:"idm_page_user_defined_leftbar"}},[e.pageUserDefinedStatus&&e.openUserCustomizationLeftBar?t("div",{staticClass:"idm_page_user_defined_leftbar"},e._l(e.originalUserCustomizationModuleObject.children,(function(a,o){return t("div",{key:o,staticClass:"idm_page_user_defined_allmodule_item",class:!0!==a.hidden?"hover-show-remove":""},[t("span",{attrs:{title:a.props&&a.props.basicAttr&&a.props.basicAttr.title||a.props&&a.props.compositeAttr&&a.props.compositeAttr.title||a.asName}},[e._v(" "+e._s(a.props&&a.props.basicAttr&&a.props.basicAttr.title||a.props&&a.props.compositeAttr&&a.props.compositeAttr.title||a.asName)+" ")]),t("div",{staticClass:"idm_page_user_defined_allmodule_item_op",attrs:{title:!0===a.hidden?"添加组件":"移除组件"}},[!0!==a.hidden?t("svg",{staticClass:"user-defined-selected-svg",attrs:{t:"1659636928260",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9243",width:"18",height:"18"}},[t("path",{attrs:{d:"M944.78369497 156.71660696l38.8044445 32.66674931a25.36238224 25.36238224 0 0 1 3.04348577 35.76095873L486.63761776 818.67478965a76.08714794 76.08714794 0 0 1-107.20679132 9.18118218l-2.40942618-2.10507822-2.28261403-2.20652672L58.64741395 508.44212703a25.36238224 25.36238224 0 0 1-0.07608729-35.86240846l35.81168359-35.93849576a25.36238224 25.36238224 0 0 1 35.88777088-0.05072486l296.56233848 295.6239297 482.21497784-572.42897249a25.36238224 25.36238224 0 0 1 35.73559752-3.0688482z","p-id":"9244"}})]):e._e(),!0===a.hidden?t("svg",{staticClass:"user-defined-add-svg",attrs:{t:"1659636887235",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9088",width:"18",height:"18"},on:{click:function(t){return e.addUserDefinedSelect(a)}}},[t("path",{attrs:{d:"M462.80754569 45.96622222m10.35630616 0l77.6722963 0q10.35630617 0 10.35630616 10.35630617l0 911.35494322q0 10.35630617-10.35630616 10.35630617l-77.6722963 0q-10.35630617 0-10.35630616-10.35630617l0-911.35494322q0-10.35630617 10.35630616-10.35630617Z","p-id":"9089"}}),t("path",{attrs:{d:"M66.67883457 462.80754569m10.35630618 0l869.9297185 0q10.35630617 0 10.35630618 10.35630616l0 77.6722963q0 10.35630617-10.35630618 10.35630616l-869.9297185 0q-10.35630617 0-10.35630618-10.35630616l0-77.6722963q0-10.35630617 10.35630618-10.35630616Z","p-id":"9090"}})]):e._e(),!0!==a.hidden?t("svg",{staticClass:"user-defined-remove-svg",attrs:{t:"1659629683475",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9221",width:"18",height:"18"},on:{click:function(t){return e.removeUserDefinedSelect(a)}}},[t("path",{attrs:{d:"M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z","p-id":"9222"}})]):e._e()])])})),0):e._e()]),t("idm-a-modal",{attrs:{title:"组件替换",visible:e.pageUserDefinedModalVisible,footer:null,width:"666px"},on:{cancel:function(t){e.pageUserDefinedModalVisible=!1}}},[t("div",{staticClass:"idm_page_user_defined_modal_alert"},[e._v(" 当前位置已显示 "),t("span",[e._v(e._s(e.currentContainerShowModuleName))]),e._v(" 组件，您可以选择其他组件交换当前组件显示的位置 ")]),e.customModuleObject?t("div",{staticClass:"idm_page_user_defined_modal_modulelist"},e._l(e.customModuleObject.children||[],(function(a,o){return t("div",{key:o,staticClass:"idm_page_user_defined_modal_moduleitem",class:{active:a.packageid==e.currentContainerShowPackageid}},[t("div",{attrs:{title:a.props&&a.props.basicAttr&&a.props.basicAttr.title||a.props&&a.props.compositeAttr&&a.props.compositeAttr.title||a.asName}},[t("label",[e._v(e._s(a.props&&a.props.basicAttr&&a.props.basicAttr.title||a.props&&a.props.compositeAttr&&a.props.compositeAttr.title||a.asName))]),a.containerIndex<999999999?t("span",[e._v("已显示在序号 "+e._s(a.containerIndex)+" 容器中 ")]):e._e()]),t("div",[a.packageid==e.currentContainerShowPackageid?t("div",{staticClass:"user-defined-modal-selected"},[t("svg",{attrs:{t:"1659636928260",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9243",width:"18",height:"18"}},[t("path",{attrs:{d:"M944.78369497 156.71660696l38.8044445 32.66674931a25.36238224 25.36238224 0 0 1 3.04348577 35.76095873L486.63761776 818.67478965a76.08714794 76.08714794 0 0 1-107.20679132 9.18118218l-2.40942618-2.10507822-2.28261403-2.20652672L58.64741395 508.44212703a25.36238224 25.36238224 0 0 1-0.07608729-35.86240846l35.81168359-35.93849576a25.36238224 25.36238224 0 0 1 35.88777088-0.05072486l296.56233848 295.6239297 482.21497784-572.42897249a25.36238224 25.36238224 0 0 1 35.73559752-3.0688482z","p-id":"9244"}})]),e._v(" 已选 ")]):a.containerIndex<999999999?t("div",{staticClass:"user-defined-modal-changeseats",on:{click:function(t){return e.userDefinedModuleReplace(a,"changeseats")}}},[t("svg",{attrs:{t:"1660186463623",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7012",width:"18",height:"18"}},[t("path",{attrs:{d:"M629.419 104.311c113.459 11.333 204.663 79.736 224.05 196.882h-65.672l106.087 157.832L999.97 301.193h-73.182c-19.524-157.833-138.99-260.37-289.86-274.979-20.89-1.638-40.277 16.248-40.277 39.049 1.365 19.524 14.745 37.41 32.768 39.048z m-164.25-79.735H96.256c-20.89 0-37.274 17.886-37.274 40.687V416.7c0 22.8 16.384 40.687 37.274 40.687h368.913c20.89 0 37.274-17.886 37.274-40.687V65.263c0-22.801-16.384-40.687-37.274-40.687zM429.261 379.29H132.164V102.673h297.233l-0.136 276.617z m-35.908 540.125c-126.976-11.332-224.052-95.982-228.557-235.93h70.178L129.16 525.79 23.074 683.486h70.178c2.867 180.633 129.843 297.78 292.728 314.027 20.89 1.638 40.277-16.248 40.277-39.049 0.41-19.388-13.653-36.045-32.904-39.049z m534.8-353.075H559.242c-21.027 0-37.274 18.023-37.274 40.687v353.075c0 22.665 16.384 40.55 37.274 40.55h368.913c20.89 0 37.273-17.885 37.273-40.55V607.027c0-22.664-17.886-40.687-37.273-40.687z m-35.908 354.714H595.012V646.076h297.233v274.978z m0 0","p-id":"7013"}})]),e._v(" 换位 ")]):t("div",{staticClass:"user-defined-modal-replace",on:{click:function(t){return e.userDefinedModuleReplace(a,"replace")}}},[t("svg",{attrs:{t:"1660186765079",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7166",width:"18",height:"18"}},[t("path",{attrs:{d:"M911.14666667 610.98666667H112.85333333c-23.57333333 0-42.66666667 19.09333333-42.66666666 42.66666666 0 8.96 2.77333333 17.28 7.46666666 24.10666667 2.02666667 4.8 5.12 9.28 8.96 13.22666667L274.66666667 878.93333333c8.32 8.32 19.2 12.48 30.18666666 12.48s21.86666667-4.16 30.18666667-12.48c16.64-16.64 16.64-43.62666667 0-60.37333333L212.58666667 696.32h698.45333333c23.57333333 0 42.66666667-19.09333333 42.66666667-42.66666667s-18.98666667-42.66666667-42.56-42.66666666zM112.85333333 413.01333333h798.29333334c23.57333333 0 42.66666667-19.09333333 42.66666666-42.66666666 0-8.96-2.77333333-17.28-7.46666666-24.10666667-1.49333333-3.52-3.62666667-6.93333333-6.18666667-10.13333333L786.34666667 148.16c-14.93333333-18.24-41.81333333-20.90666667-60.05333334-5.97333333-18.24 14.93333333-20.90666667 41.81333333-5.97333333 60.05333333l102.72 125.44H112.85333333c-23.57333333 0-42.66666667 19.09333333-42.66666666 42.66666667s19.09333333 42.66666667 42.66666666 42.66666666z","p-id":"7167"}})]),e._v(" 替换 ")])])])})),0):e._e()])],1)},h=[],m=a("bcc3"),f=(a("c401"),a("9051"),a("4c49"),a("7e26"),a("aed9"),a("8b51"),a("42b1"),{mixins:[u],name:"Page",components:{},data:function(){return{themeSetObject:"",PageSettingData:{},dialogVisibleStatus:!1,dialogIsHideing:!1,dialogObjectList:[],drawerVisible:!1,pagePropData:{},pageUserDefinedStatus:!1,userDefinedSaveLoading:!1,openUserCustomizationLeftBar:!1,originalUserCustomizationModuleObject:{children:[]},pageUserDefinedModalVisible:!1,currentContainerShowPackageid:"",currentContainerShowModuleName:"",currentContainerShowModuleObject:{},customModuleObject:null,pageInterfaceResultObject:{}}},props:{pageid:{type:String},routerId:{type:String},devpreview:{type:Boolean},mainPage:{type:Boolean},index:{type:Number},styleObject:{type:Object,default:function(){return{}}}},created:function(){var e=this;this.devpreview?(this.PageSettingData=JSON.parse(window.localStorage["devpreview"]),console.log("当前预览的缓存数据",this.PageSettingData),this.setCachePageData(this.PageSettingData),this.loadPageElement()):IDM.router.pageDataCachePool.get(this.pageid)?(this.PageSettingData=_.cloneDeep(IDM.router.pageDataCachePool.get(this.pageid)),console.log("从缓存池中获取到页面配置数据（同pageid情况下）",this.PageSettingData),this.loadPageElement()):this.$previewApi.fetchPageSettingDataForVersion({pageid:this.pageid,version:"",urlData:this.commonParam().urlData}).then((function(t){e.PageSettingData=t.data.data,e.setCachePageData(e.PageSettingData),console.log("从数据接口中获取页面配置数据返回数据结果",e.PageSettingData),e.loadPageElement()})).catch((function(e){IDM.message.error("页面配置信息加载失败！message："+e.message)}))},methods:{setCachePageData:function(e){var t=this;try{this.propsCompletion(e.page.layout,e.page.componentsMap)}catch(a){}IDM.router.pageDataCachePool.put(t.pageid,_.cloneDeep(e))},propsCompletion:function(e,t){var a=this;e instanceof Array||(e=[e]);for(var o=function(o){var n=e[o];if(n.packageid){var i=t.filter((function(e){return e.packageid==n.packageid}));i&&i.length>0&&(n.props=i[0].props)}n.children&&n.children.length>0&&a.propsCompletion(n.children,t)},n=0;n<e.length;n++)o(n)},loadPageElement:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var a,o,n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=!1,o=0;o<e.PageSettingData.page.componentsMap.length;o++)n=e.PageSettingData.page.componentsMap[o],n.comLangue&&"react"==n.comLangue.toLocaleLowerCase()&&(a=!0);return t.next=4,e.initReactOrOtherLib(a);case 4:return e.PageSettingData.page.actions&&e.PageSettingData.page.actions.compiled&&(i=$('<script type="text/javascript" id="'+e.pageid+'"/>'),$("body").append(i.html("\n       (function(){\n        var exports={};\n        ".concat(e.PageSettingData.page.actions.compiled,"\n        var functionList = Object.keys(exports);\n        for(var i=0;i<functionList.length;i++){\n          window[functionList[i]] = exports[functionList[i]];\n        }\n       })();\n       ")))),e.PageSettingData.page.componentsMap.forEach((function(t){t.env="production",t.routerId=e.routerId,t.pageid=e.pageid})),e.IDM.broadcast.registerModule(e.PageSettingData,e.pageid,e.routerId),e.setCurrentPageTitle(),t.next=10,e.initAppAndUserInfo(e.PageSettingData.page.layout.props);case 10:e.requestPageCommonInterfaceDataBefore((function(){e.setCurrentPageTitle(!0),e.mainPage&&e.$emit("mainPageSettingHandle",e.PageSettingData),e.beforeLoadingFunction(),e.pageAttrPropHandle(e.PageSettingData.page.layout.props),e.$nextTick((function(){this.initModuleTreeToPage(null,!0,this.PageSettingData.page.layout)}))}));case 11:case"end":return t.stop()}}),t)})))()},silentReLogin:function(e,t){var a=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var o,n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e&&e.openSessionKeep&&e.silentReLoginUrl)){t.next=10;break}return o=!1,n=IDM.setting.sessionKeep.cacheKeyName,i="",console.log("当前页面cookie信息",document.cookie),console.log("获取到的cookie信息："+n,IDM.getCookie(n)),window.localStorage[n]?i=window.localStorage[n]:IDM.getCookie(n)?i=IDM.getCookie(n):IDM.url.queryObject()[n]&&(i=IDM.url.queryObject()[n]),t.next=7,IDM.http.post(e.silentReLoginUrl,Object(m["a"])({},n,i)).then((function(e){var t=e.data;"200"==t.code&&(o=!0)})).catch((function(e){}));case 7:if(!o){t.next=10;break}return t.next=10,a.fetchUserInfo(e,!1,!0,!0);case 10:case"end":return t.stop()}}),t)})))()},fetchUserInfo:function(e,t,a,o){var n=this;return Object(s["a"])(Object(r["a"])().mark((function s(){var c,d;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return c=!0,d=n,r.next=3,n.$previewApi.fetchUserInfo(e.userInfoUrl,Object(i["a"])({pageid:n.pageid},n.commonParam())).then((function(e){var t=e.data;"200"==t.code&&t.data?t=t.data:"200"!=t.code&&(c=!1),(d.mainPage||o)&&IDM.user.setCurrentUserInfo(t),(d.mainPage||o)&&c&&a&&IDM.broadcast.send({type:"linkageReload",rangeModule:"",message:(new Date).getTime()},d.routerId)})).catch((function(e){c=!1}));case 3:if(!t||c){r.next=6;break}return r.next=6,n.silentReLogin(e,a);case 6:case"end":return r.stop()}}),s)})))()},initAppAndUserInfo:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){var o,n,s,c,d,l,u,p;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=t,n=e.compositeAttr,!(n.openFetchApplicationInfo&&n.applicationInfoUrl&&t.mainPage)){a.next=5;break}return a.next=5,t.$previewApi.fetchApplicationInfo(n.applicationInfoUrl,Object(i["a"])({pageid:t.pageid},t.commonParam())).then((function(e){var t=e.data;"200"==t.code&&t.data&&(t=t.data),IDM.app.setAppInfo(t)})).catch((function(e){}));case 5:if(!n.openFetchUserInfo||!n.userInfoUrl){a.next=8;break}return a.next=8,t.fetchUserInfo(n,!0);case 8:if(s="",n.switchUserInfo&&n.switchUserInfoFiledName?(c=n.switchUserInfoFiledName,d="userObject",l={IDM:window.IDM},l[d]=IDM.user.getCurrentUserInfo(),c&&(c=d+(c.startsWiths("[")?"":".")+c,s=window.IDM.express.replace.call(t,"@["+c+"]",l))):n.switchUserInfo&&(s=IDM.user.getCurrentUserInfo()&&IDM.user.getCurrentUserInfo().data?IDM.user.getCurrentUserInfo().data.userid:""),n.switchUserInfo&&!s&&(n.loginPageUrl?window.location.href=IDM.url.getWebPath(n.loginPageUrl):window.location.href=""),!(n.openFetchUserInfo&&n.switchUserCustomization&&n.userCustomizationFetchUrl)){a.next=17;break}return u=n.userCustomizationModuleContainer&&n.userCustomizationModuleContainer.length>0?n.userCustomizationModuleContainer[0].moduleId:"",u||(u=o.PageSettingData.id),o.originalUserCustomizationModuleObject=_.cloneDeep(o.getModuleTree(o.PageSettingData.page.layout,u)),a.next=17,t.$previewApi.fetchUserCustomizationInfo(n.userCustomizationFetchUrl,{pageid:t.pageid,version:t.PageSettingData.pageBaseInfo.version,urlData:JSON.stringify(t.commonParam())}).then((function(e){if(e&&e.data&&e.data.data&&e.data.data.customData){var t=e.data.data.customData instanceof Object?e.data.data.customData:JSON.parse(e.data.data.customData),a=t.children;if(!a||a&&0==a.length)return;var i=o.getModuleTree(o.PageSettingData.page.layout,t.packageid);if(i&&i.children){var r=[],s=[];a.forEach((function(e,t){if(s.push(e.packageid),!n.switchUserCustomizationCommutant){var a=o.getModuleTree(o.originalUserCustomizationModuleObject,e.packageid);a&&(a.hidden=e.hidden)}for(var c=0;c<i.children.length;c++){var d=i.children[c];if(e.packageid==d.packageid&&!0!==e.hidden){d.containerIndex=e.containerIndex,d.relationType=e.relationType,d.relationId=e.relationId,r.push(d);break}}}));for(var c=0;c<i.children.length;c++){var d=i.children[c];-1==s.indexOf(d.packageid)&&r.push(d)}i.children=r}}})).catch((function(e){}));case 17:if(!(o.mainPage&&n.openIdmTheme&&"customInterface"==n.themeFetchType&&n.themeInterfaceUrl)){a.next=22;break}return a.next=20,t.$previewApi.fetchThemeInfo(n.themeInterfaceUrl,Object(i["a"])({pageid:t.pageid},t.commonParam())).then((function(e){o.themeInterfaceHandle(e.data,"resultData")})).catch((function(e){}));case 20:a.next=23;break;case 22:o.mainPage&&n.openIdmTheme&&"customFunction"==n.themeFetchType&&n.themeCustomFunction&&n.themeCustomFunction.length>0&&(p="",n.themeCustomFunction.forEach((function(e){try{p=window[e.name]&&window[e.name].call(t,Object(i["a"])(Object(i["a"])({},t.commonParam()),{},{customParam:e.param,_this:o}))}catch(a){}})),IDM.theme.setCurrentThemeInfo(p),o.themeSetObject=p);case 23:case"end":return a.stop()}}),a)})))()},pageUserDefinedStatusChangeHandle:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this;this.pageUserDefinedStatus=e;var o=this.PageSettingData.page.layout.props.compositeAttr,n=o.userCustomizationModuleContainer&&o.userCustomizationModuleContainer.length>0?o.userCustomizationModuleContainer[0].moduleId:"";if(n){var i=this.getModuleTree(this.PageSettingData.page.layout.children,n);if(!i)return!1;this.customModuleObject=i;var r,s,c,d,l,u,p=document.querySelector("#router_page_".concat(a.routerId)).querySelector("#".concat(i.packageid)).getBoundingClientRect(),g={},h=o.switchUserCustomizationCommutant;this.openUserCustomizationLeftBar=!h;var m,f="";!this.moduleMoveEvent&&(this.moduleMoveEvent=function(e){e.stopPropagation(),e.preventDefault();e.target.dataset.packageid;var t={};t.x=e.clientX-g.x,t.y=e.clientY-g.y,c.style.left=t.x+"px",c.style.top=t.y+"px";var a=t.x+c.getBoundingClientRect().width/2,o=t.y+c.getBoundingClientRect().height/2,n=t.x,i=t.x+c.getBoundingClientRect().width,d=t.y,v=t.y+c.getBoundingClientRect().height,w=!1;(p.x>i||p.x+p.width<n||p.y>v||p.y+p.height<d)&&(w=!0);var b=[],y=[],I=[];r&&r.forEach((function(e){var t=e.parentElement.getBoundingClientRect(),o=t.y,r=t.y+t.height;(o<=d&&d<=r||r>=v&&o<=v)&&b.push(e.parentElement),o>d&&r<d&&(t.x<n&&t.x+t.width>n||t.x+t.width<i&&t.x+t.width>n||n<t.x&&t.x+t.width>n&&t.x<i)&&y.push(e.parentElement),a>t.x&&a<t.x+t.width&&I.push(e.parentElement)}));var D=[];b.length>0&&b.forEach((function(e){var t=e.getBoundingClientRect();a>t.x&&a<t.x+t.width&&D.push(e)}));var M=999999999;if(D.length>0?D.forEach((function(e){var t=e.getBoundingClientRect(),a=t.y,o=t.y+t.height;d-a<M&&(m=e,M=d-a,f="top"),o-v<M&&(m=e,M=o-v,f="bottom")})):y.length>0?(y.forEach((function(e){var t=e.getBoundingClientRect();o>t.y+t.height&&o-t.y-t.height<M&&(m=e,M=d-t.y-t.height,f="bottom"),o<t.y&&t.y-o<M&&(m=e,M=t.y-v,f="top")})),m||y.forEach((function(e){var t=e.getBoundingClientRect();o<=t.y+t.height&&o>=t.y&&(Math.abs(a-(t.x+t.width/2))<M&&(m=e,M=Math.abs(a-(t.x+t.width/2))),f="bottom")}))):I.length>0&&w&&I.forEach((function(e){var t=e.getBoundingClientRect();d>t.y+t.height&&d-t.y-t.height<M&&(m=e,M=d-t.y-t.height,f="bottom"),v<t.y&&t.y-v<M&&(m=e,M=t.y-v,f="top")})),s.forEach((function(e){var t=e.getBoundingClientRect();a>t.x&&a<t.x+t.width&&o>t.y&&o<t.y+t.height&&(u=e)})),h&&(s.forEach((function(e){IDM.removeClasss(e,"idm_module_user_defined_placeholderstyle")})),u&&IDM.addClasss(u,"idm_module_user_defined_placeholderstyle")),m&&!h){var P=m.parentElement;"top"==f?P.insertBefore(l,m):P.lastChild==m?P.appendChild(l):P.insertBefore(l,m.nextSibling)}else h||0!=u.childElementCount||u.appendChild(l)}),!this.moduleMoveUpEvent&&(this.moduleMoveUpEvent=function(e){if(e.stopPropagation(),e.preventDefault(),document.removeEventListener("mousemove",a.moduleMoveEvent),document.removeEventListener("mouseup",a.moduleMoveUpEvent),h&&u){var t=l,o=l.parentElement;if(console.log("🚀 ~ file: Page.vue ~ line 568 ~ moveUpEvent ~ hoverContainerDom",u.childNodes),u.childNodes)for(var n=_.cloneDeep(u.childElementCount),i=0;i<n;i++){var r=u.childNodes[0];a.changePageSettingModuleSort(r.id,0==i?d.id:t.id,"bottom"),o.insertBefore(r,t.nextSibling),t=r}u.appendChild(d),a.changePageSettingModuleSort(d.id,u.getAttribute("idm-container-index"),"inner")}else l.parentElement.insertBefore(d,l),m?a.changePageSettingModuleSort(d.id,m.id,f):u&&a.changePageSettingModuleSort(d.id,u.getAttribute("idm-container-index"),"inner");$(l).remove(),$(c).remove(),s.forEach((function(e){IDM.removeClasss(e,"idm_module_user_defined_placeholderstyle")})),m=null,f="",IDM.broadcast.send({type:"resendAutoLayout",rangeModule:"",message:{}})}),!this.moduleMousedownEvent&&(this.moduleMousedownEvent=function(e){e.stopPropagation(),e.preventDefault();var t=e.target.dataset.packageid;if(t&&(a.isChangeUserDefined=!0,document.addEventListener("mousemove",a.moduleMoveEvent),document.addEventListener("mouseup",a.moduleMoveUpEvent),console.log("🚀 ~ file: Page.vue ~ line 397 ~ mousedownEvent ~ e",e),d=document.querySelector("#router_page_".concat(a.routerId)).querySelector("#".concat(t)),d)){var o=d.getBoundingClientRect();console.log("🚀 ~ file: Page.vue ~ line 401 ~ mousedownEvent ~ rectInfo",o),c=document.createElement("div"),c.id="idm_module_user_defined_movebox",c.className="idm_module_user_defined_movebox",c.style.width=o.width+"px",c.style.height=o.height+"px",g.x=e.clientX-o.x,g.y=e.clientY-o.y,c.style.left=e.clientX-g.x+"px",c.style.top=e.clientY-g.y+"px",c.style.position="absolute",l=document.createElement("div"),l.id="idm_module_user_defined_placeholderbox",l.className="idm_module idm_module_user_defined_placeholderbox",l.style.height=o.height+"px",l.dataset.styleHeight=o.height+"px",d.parentElement.insertBefore(l,d),c.appendChild(d),document.body.appendChild(c),r=document.querySelector("#router_page_".concat(a.routerId)).querySelectorAll(".idm_module_user_defined")}}),s=document.querySelector("#router_page_".concat(a.routerId)).querySelectorAll(".drag_container[idm-ctrl-id='"+i.id+"']"),a.registerModuleMouseDownEvent(),t&&!1===this.pageUserDefinedStatus&&this.userDefinedSave()}else IDM.message.info("没有可以自定义的容器组件！")},registerModuleMouseDownEvent:function(e){var t=this,a=this.PageSettingData.page.layout.props.compositeAttr;this.customModuleObject.children&&this.customModuleObject.children.forEach((function(o){if(!e||e===o.packageid){var n=$("#router_page_".concat(t.routerId," #").concat(o.packageid)),i=document.querySelector("#router_page_".concat(t.routerId)).querySelector("#".concat(o.packageid));if(i)if(t.pageUserDefinedStatus){var r=n.find(">div[idm-ctrl='idm_module']").css("marginLeft"),s=n.find(">div[idm-ctrl='idm_module']").css("marginRight"),c=document.createElement("div");c.className="idm_module_user_defined",c.style.marginLeft=r,c.style.marginRight=s,c.dataset.packageid=o.packageid,a.switchUserCustomizationCommutant?(c.innerHTML='\n            <div title="设置要显示的组件">\n            <svg t="1660125485320" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23286" width="16" height="16"><path d="M510.37806 337.803609c-98.010221 0-177.748287 78.842673-177.748287 175.75284 0 96.91426 79.738066 175.763073 177.748287 175.763073 9.537214 0 19.620873-0.978281 31.797194-3.088338 18.196431-3.281743 30.290887-20.538779 26.963095-38.471197-2.924609-15.732309-16.693194-27.152407-32.747845-27.152407-2.071172 0-4.15974 0.196475-6.123464 0.563842-7.937786 1.402953-14.233166 2.056845-19.807115 2.056845-61.159942 0-110.915136-49.201585-110.915136-109.671819 0-60.467163 49.679469-109.661585 110.747313-109.661585 61.116963 0 110.832248 49.194422 110.832248 109.661585 0 5.892197-0.656963 12.0832-2.088568 19.531845-3.327792 17.928325 8.769734 35.189454 26.959002 38.464033 2.006703 0.360204 4.045129 0.546446 6.070252 0.546446 16.204054 0 30.019711-11.43033 32.832779-27.116591 2.13871-11.45182 3.13848-21.435195 3.13848-31.41857 0.042979-46.873564-18.435884-90.990341-52.033074-124.223233C602.407056 356.106464 557.790906 337.803609 510.37806 337.803609zM938.476161 432.79917c-2.185782-11.426237-11.037381-20.499893-22.563902-23.12058-41.909505-9.508561-76.781734-34.929534-98.185206-71.550593-21.334911-36.560684-26.191522-79.099523-13.68979-119.709429 3.52836-11.123338 0.007163-23.235191-8.951883-30.840402-41.860387-35.721573-89.536222-62.938448-141.695163-80.885192-3.152806-1.088798-6.437619-1.639337-9.776667-1.639337-8.256034 0-16.182564 3.431146-21.724791 9.376555-29.236881 31.04404-68.840878 48.140417-111.5107 48.140417-42.673915 0-82.305541-17.125029-111.607914-48.230468-7.877411-8.333806-20.510126-11.512195-31.580253-7.726985-52.483328 18.171871-100.131535 45.416376-141.640927 80.988546-8.815783 7.591909-12.322653 19.620873-8.934486 30.67258 12.586666 40.645722 7.759731 83.180468-13.597693 119.78106-21.306258 36.5965-56.149834 62.006216-98.17395 71.561849-11.540847 2.709715-20.396539 11.812023-22.559808 23.166629-5.228071 27.169803-7.877411 54.346769-7.877411 80.770582 0 26.426883 2.64934 53.603849 7.873318 80.763418 2.174526 11.411911 11.023054 20.488637 22.552645 23.12058 41.913599 9.512654 76.785827 34.922371 98.19237 71.547523 21.349237 36.59343 26.177196 79.128175 13.583366 119.795387-3.363607 10.969842 0.121773 23.013133 8.973372 30.758538 41.84913 35.707246 89.494267 62.920028 141.662417 80.902588 11.466146 3.885494 23.738657 0.549515 31.454386-7.680936 29.29828-31.091112 68.925812-48.216141 111.593588-48.216141s82.302471 17.125029 111.560842 48.183396c5.556553 5.955642 13.494339 9.380648 21.782096 9.380648 3.27765 0 6.537903-0.520863 9.829879-1.599428 52.126194-17.968234 99.774401-45.184085 141.652184-80.912821 8.791224-7.577582 12.308327-19.628036 8.94165-30.758538-12.597923-40.678468-7.745405-83.20605 13.672394-119.773897 21.324678-36.625152 56.192813-62.030775 98.19237-71.547523 11.390421-2.592035 20.23588-11.633968 22.549575-23.106254 5.223978-27.184129 7.870248-54.358025 7.870248-80.770582C946.342316 487.171522 943.697069 459.965903 938.476161 432.79917zM728.572524 789.878798c-26.02677 20.157085-54.736649 36.553521-85.487 48.818869-36.682457-32.144094-83.60207-49.779753-132.792399-49.779753-48.926316 0-95.838765 17.635659-132.767839 49.786916-30.744211-12.262278-59.45716-28.655643-85.491093-48.812729 9.894348-47.441499 1.889023-96.449679-22.763446-138.627291-24.448832-41.966811-63.427588-73.339332-110.186542-88.840374-2.381234-16.343223-3.584642-32.758078-3.584642-48.869011 0-16.043395 1.203408-32.451086 3.584642-48.851615 46.612621-15.389502 85.584214-46.758953 110.186542-88.850607 24.523533-42.024116 32.525788-91.033319 22.74912-138.620128 26.0237-20.149922 54.735625-36.543288 85.494163-48.815799 36.821627 32.201399 83.73817 49.861618 132.778072 49.861618 49.194422 0 96.109941-17.635659 132.792399-49.779753 30.751375 12.269441 59.45716 28.662807 85.48086 48.812729-9.809413 47.63388-1.835811 96.634898 22.667256 138.620128 24.445762 41.966811 63.416332 73.343425 110.182448 88.850607 2.381234 16.386202 3.584642 32.801057 3.584642 48.940642 0.143263 15.443737-1.031493 31.797194-3.499707 48.701189-46.763047 15.504112-85.73771 46.873564-110.186542 88.836281C726.84416 693.189665 718.845998 742.190683 728.572524 789.878798z" p-id="23287"></path></svg>\n            </div>\n            ',c.querySelector("div").addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault();var a=e.currentTarget.parentElement.dataset.packageid;t.pageUserDefinedModalVisible=!0,t.currentContainerShowPackageid=a,t.currentContainerShowModuleObject=t.getModuleTree(t.PageSettingData.page.layout.children,a),t.currentContainerShowModuleName=t.currentContainerShowModuleObject.props&&t.currentContainerShowModuleObject.props.compositeAttr&&t.currentContainerShowModuleObject.props.compositeAttr.title||t.currentContainerShowModuleObject.asName}))):(c.innerHTML='\n            <div title="移除组件">\n            <svg t="1659629683475" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9221" width="16" height="16"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z" p-id="9222"></path></svg>\n            </div>\n            ',c.querySelector("div").addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault();var a=e.currentTarget.parentElement.dataset.packageid;t.customModuleObject.children.forEach((function(e){e.packageid==a&&(e.hidden=!0)}));var o=t.getModuleTree(t.originalUserCustomizationModuleObject,a);o&&(o.hidden=!0),t.$forceUpdate(),$(document.querySelector("#router_page_".concat(t.routerId)).querySelector("#".concat(a))).remove()}))),i.appendChild(c),i.addEventListener("mousedown",t.moduleMousedownEvent)}else i&&$(i.querySelector(".idm_module_user_defined")).remove(),i&&i.removeEventListener("mousedown",t.moduleMousedownEvent)}}))},changePageSettingModuleSort:function(e,t,a){var o=this.PageSettingData.page.layout.props.compositeAttr,n=o.userCustomizationModuleContainer&&o.userCustomizationModuleContainer.length>0?o.userCustomizationModuleContainer[0].moduleId:"",i=this.getModuleTree(this.PageSettingData.page.layout.children,n);if(!i)return!1;var r=-1,s=-1;i.children&&i.children.forEach((function(o,n){o.packageid==e&&"inner"==a&&(o.containerIndex=t,o.relationType&&o.relationType.startsWiths("inner_")&&(o.relationType="inner_"+t)),o.packageid==e&&(r=n),o.packageid==t&&(s=n)})),s>-1&&r>-1&&"inner"!=a&&(i.children[r].containerIndex=i.children[s].containerIndex,i.children[r].relationType=a,i.children[r].relationId=t,i.children.splice(s+("bottom"==a?1:0),0,i.children[r]),i.children.splice(r+(s<r?1:0),1))},removeUserDefinedSelect:function(e){var t=this;e.hidden=!0;var a=t.getModuleTree(this.PageSettingData.page.layout.children,e.packageid);a&&(a.hidden=!0),t.$forceUpdate(),$(document.querySelector("#router_page_".concat(t.routerId)).querySelector("#".concat(e.packageid))).remove()},addUserDefinedSelect:function(e){var t=this;e.hidden=!1;var a,o=t.getModuleTree(this.PageSettingData.page.layout.children,e.packageid);if(!o){var n=this.PageSettingData.page.layout.props.compositeAttr,i=n.userCustomizationModuleContainer&&n.userCustomizationModuleContainer.length>0?n.userCustomizationModuleContainer[0].moduleId:"",r=t.getModuleTree(this.PageSettingData.page.layout.children,i);r.children.push(_.cloneDeep(e))}o&&(o.hidden=!1),t.$forceUpdate(),t.moduleReload(e.packageid),t.registerModuleMouseDownEvent(e.packageid),this.customModuleObject.children&&this.customModuleObject.children.forEach((function(e){e.containerIndex==o.containerIndex&&!0!==e.hidden&&(a=e)})),a?t.changePageSettingModuleSort(e.packageid,a.packageid,"bottom"):t.changePageSettingModuleSort(e.packageid,o.containerIndex,"inner")},userDefinedModuleReplace:function(e,t){var a=this,o=a.currentContainerShowModuleObject.containerIndex;a.currentContainerShowModuleObject.containerIndex=e.containerIndex,a.currentContainerShowModuleObject.relationType=e.relationType,a.currentContainerShowModuleObject.relationId=e.relationId,a.changePageSettingModuleSort(e.packageid,o,"inner"),e.relationType="inner_"+o,"changeseats"==t&&$(document.querySelector("#router_page_".concat(a.routerId)).querySelector("#".concat(e.packageid))).remove(),$(document.querySelector("#router_page_".concat(a.routerId)).querySelector("#".concat(a.currentContainerShowModuleObject.packageid))).remove(),a.moduleReload(e.packageid),a.registerModuleMouseDownEvent(e.packageid),"changeseats"==t&&(a.moduleReload(a.currentContainerShowModuleObject.packageid),a.registerModuleMouseDownEvent(a.currentContainerShowModuleObject.packageid)),a.pageUserDefinedModalVisible=!1,IDM.broadcast.send({type:"resendAutoLayout",rangeModule:"",message:{}})},userDefinedSave:function(){var e=this;e.userDefinedSaveLoading=!0;var t=this.PageSettingData.page.layout.props.compositeAttr,a=t.userCustomizationModuleContainer&&t.userCustomizationModuleContainer.length>0?t.userCustomizationModuleContainer[0].moduleId:"",o=this.getModuleTree(this.PageSettingData.page.layout.children,a);if(!o)return e.userDefinedSaveLoading=!1,!1;var n=_.cloneDeep(o);this.deleteLayoutAttachAttr(n),t.userCustomizationSaveUrl&&IDM.http.post(t.userCustomizationSaveUrl,{pageid:this.pageid,version:this.PageSettingData.pageBaseInfo.version,customData:JSON.stringify(n)}).then((function(t){t=t?t.data:{},e.userDefinedSaveLoading=!1,"200"===t.code?(IDM.message.success("保存成功！"),IDM.page.changePageUserDefinedStatus({routerId:e.routerId,status:!1})):IDM.message.error("个性化定制保存失败！message："+t.message)})).catch((function(t){IDM.message.error("个性化定制保存失败！message："+t.message),e.userDefinedSaveLoading=!1}))},userDefinedReset:function(){var e=this;e.userDefinedSaveLoading=!0;var t=this.PageSettingData.page.layout.props.compositeAttr;t.userCustomizationSaveUrl&&IDM.http.post(t.userCustomizationSaveUrl,{pageid:this.pageid,version:this.PageSettingData.pageBaseInfo.version,reset:1}).then((function(t){if(t=t?t.data:{},"200"!==t.code)return e.userDefinedSaveLoading=!1,void IDM.message.error("重置操作失败！message："+t.message);IDM.message.success("重置成功！3秒后即将刷新本页面。"),setTimeout((function(){window.location.reload()}),3e3)})).catch((function(t){IDM.message.error("重置操作失败！message："+t.message),e.userDefinedSaveLoading=!1}))},userDefinedQuit:function(){!0===this.isChangeUserDefined?window.location.reload():IDM.page.changePageUserDefinedStatus({routerId:this.routerId,status:!1})},layerClickHandle:function(e){var t=e.target.getAttribute("dialog-id");t&&window.IdmBuiltin_CloseDialog({routerId:this.routerId,targetModule:[{moduleId:t}]})},initReactOrOtherLib:function(e){return Object(s["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e||IDM.router.getReact()){t.next=4;break}return IDM.router.setReact(),t.next=4,IDM.http.importFiles([IDM.url.getWebPath("~/lib/react.min.js"),IDM.url.getWebPath("~/lib/react-dom.min.js")]).then((function(){console.log("react文件加载成功")})).catch((function(e){console.log("react文件加载出错")}));case 4:case"end":return t.stop()}}),t)})))()},beforeLoadingFunction:function(){var e=this.PageSettingData.page.layout.props.compositeAttr;e.beforeLoadingFunction&&e.beforeLoadingFunction.length>0&&this.commonCustomEventFunHandle(e,"beforeLoadingFunction")},afterLoadingFunction:function(){var e=this.PageSettingData.page.layout.props.compositeAttr;e.afterLoadingFunction&&e.afterLoadingFunction.length>0&&this.commonCustomEventFunHandle(e,"afterLoadingFunction")},requestPageCommonInterfaceDataBefore:function(e){var t=(this.PageSettingData.page.layout.props.compositeAttr?this.PageSettingData.page.layout.props.compositeAttr.interfaceList:[])||[];0!=t.length?(t=t.filter((function(e){return"pageloadbefore"==e.loadTimingType})),0!=t.length?this.orderlyRequestInterface(t,0,this.InterfaceParam(),e):e&&e()):e&&e()},requestPageCommonInterfaceData:function(e){if((!e||!this.pageCommonInterfaceLoaded)&&(this.pageCommonInterfaceLoaded=!0,this.IDM.broadcast.pageLoadCompleteAfter(this.routerId),!this.isloadPageCommonInterface)){this.isloadPageCommonInterface=!0,console.log("页面首屏组件已全部加载完毕！！！"),this.afterLoadingFunction();var t=(this.PageSettingData.page.layout.props.compositeAttr?this.PageSettingData.page.layout.props.compositeAttr.interfaceList:[])||[];0!=t.length&&(t=t.filter((function(e){return!e.loadTimingType||"pageloadlater"==e.loadTimingType})),0!=t.length&&this.orderlyRequestInterface(t,0,this.InterfaceParam()))}},InterfaceParam:function(){var e=this.pageid,t=[],a=[];this.PageSettingData.page.componentsMap.forEach((function(o){o.packageid!=e&&(t.push(o.packageid),a.push(o.comId))}));var o={idmPageId:e,moduleIds:t.join(","),componentIds:a.join(",")},n=IDM.url.queryObject();return Object.keys(n).forEach((function(e){o[e]=n[e]})),o},orderlyRequestInterface:function(e,t,a,o){if(e.length<=t)o&&o();else{var n=e[t];t+=1;var r=this;if(n.preAllowFunction&&n.preAllowFunction.length>0)try{var s=Object(i["a"])(Object(i["a"])({},r.commonParam()),n.preAllowFunction[0].param),c=window[n.preAllowFunction[0].name]&&window[n.preAllowFunction[0].name].call(this,s);if(!1===c)return void r.orderlyRequestInterface(e,t,a,o)}catch(g){}if("datasource"==n.interfaceType&&n.dataSourceSelectData&&n.dataSourceSelectData.length){if(n.formDataFunction&&n.formDataFunction.length>0)try{var d=Object(i["a"])(Object(i["a"])({},r.commonParam()),n.formDataFunction[0].param),l=window[n.formDataFunction[0].name]&&window[n.formDataFunction[0].name].call(this,d);a=Object(i["a"])(Object(i["a"])({},a),l)}catch(g){}IDM.datasource.request(n.dataSourceSelectData[0].id,{moduleObject:{},param:a},(function(i){r.callbackModuleSetContext(n,i),r.orderlyRequestInterface(e,t,a,o)}),(function(n){r.orderlyRequestInterface(e,t,a,o)}))}else if("post"==n.interfaceMode&&n.interfaceUrl){if(n.formDataFunction&&n.formDataFunction.length>0)try{var u=Object(i["a"])(Object(i["a"])({},r.commonParam()),n.formDataFunction[0].param),p=window[n.formDataFunction[0].name]&&window[n.formDataFunction[0].name].call(this,u);a=Object(i["a"])(Object(i["a"])({},a),p)}catch(g){}this.$previewApi.postPageInterfaceInfo(n.interfaceUrl,a,{headers:n.interfaceContentType?{"Content-Type":n.interfaceContentType||"application/json;charset=UTF-8"}:{}}).then((function(i){r.callbackModuleSetContext(n,i.data||i),r.orderlyRequestInterface(e,t,a,o)})).catch((function(n){r.orderlyRequestInterface(e,t,a,o)}))}else"get"==n.interfaceMode&&n.interfaceUrl?this.$previewApi.getPageInterfaceInfo(n.interfaceUrl,a).then((function(i){r.callbackModuleSetContext(n,i.data||i),r.orderlyRequestInterface(e,t,a,o)})).catch((function(n){r.orderlyRequestInterface(e,t,a,o)})):r.orderlyRequestInterface(e,t,a,o)}},callbackModuleSetContext:function(e,t){var a=this;if(this.pageInterfaceResultObject[e.resultDataName]=t,this.sendBroadcastMessage({type:"pageCommonInterface",message:t,messageKey:e.resultDataName,rangeModule:""}),"pageloadbefore"!=e.loadTimingType&&this.PageSettingData.page.componentsMap.forEach((function(a){a.idmSetContextValue&&a.idmSetContextValue({type:"pageCommonInterface",key:e.resultDataName,data:t})})),e.interfaceRunLaterFunction&&e.interfaceRunLaterFunction.length>0){var o=e.interfaceRunLaterFunction;o.forEach((function(e){try{window[e.name]&&window[e.name].call(a,Object(i["a"])(Object(i["a"])({},a.commonParam()),{},{customParam:e.param,resultData:t,_this:a}))}catch(o){}}))}var n=this.PageSettingData.page.layout.props.compositeAttr||{};this.mainPage&&n.openIdmTheme&&"pageInterfaceResult"==n.themeFetchType&&n.themeDataName&&e.resultDataName==n.themeDataName&&this.themeInterfaceHandle(t,n.themeDataName)},pageAttrPropHandle:function(e){var t=e.compositeAttr;this.pagePropData=t;var a={};for(var o in t.bgSize&&"custom"==t.bgSize?a["background-size"]=(t.bgSizeWidth?t.bgSizeWidth.inputVal+t.bgSizeWidth.selectVal:"auto")+" "+(t.bgSizeHeight?t.bgSizeHeight.inputVal+t.bgSizeHeight.selectVal:"auto"):t.bgSize&&(a["background-size"]=t.bgSize),t.positionX&&t.positionX.inputVal&&(a["background-position-x"]=t.positionX.inputVal+t.positionX.selectVal),t.positionY&&t.positionY.inputVal&&(a["background-position-y"]=t.positionY.inputVal+t.positionY.selectVal),t)if(t.hasOwnProperty.call(t,o)){var n=t[o];if(!n&&!1!==n)continue;switch(o){case"defaultIdmTheme":!this.themeSetObject&&this.mainPage&&(IDM.theme.setCurrentThemeInfo(n),this.themeSetObject=n);break;case"width":case"height":a[o]=n;break;case"bgColor":n.hex8&&(a["background-color"]=IDM.hex8ToRgbaString(n.hex8));break;case"box":n.marginTopVal&&(a["margin-top"]="".concat(n.marginTopVal)),n.marginRightVal&&(a["margin-right"]="".concat(n.marginRightVal)),n.marginBottomVal&&(a["margin-bottom"]="".concat(n.marginBottomVal)),n.marginLeftVal&&(a["margin-left"]="".concat(n.marginLeftVal)),n.paddingTopVal&&(a["padding-top"]="".concat(n.paddingTopVal)),n.paddingRightVal&&(a["padding-right"]="".concat(n.paddingRightVal)),n.paddingBottomVal&&(a["padding-bottom"]="".concat(n.paddingBottomVal)),n.paddingLeftVal&&(a["padding-left"]="".concat(n.paddingLeftVal));break;case"bgImgUrl":a["background-image"]="url(".concat(IDM.url.getWebPath(n),")");break;case"icoImgUrl":try{document.head.querySelector("link[rel='icon']").setAttribute("href",IDM.url.getWebPath(n))}catch(r){}var i=document.createElement("link");i.type="image/x-icon",i.rel="shortcut icon",i.href=IDM.url.getWebPath(n),document.getElementsByTagName("head")[0].appendChild(i);break;case"positionX":break;case"positionY":break;case"bgRepeat":a["background-repeat"]=n;break;case"bgAttachment":a["background-attachment"]=n;break;case"border":n.border.top.width>0&&(a["border-top-width"]=n.border.top.width+n.border.top.widthUnit,a["border-top-style"]=n.border.top.style,n.border.top.colors.hex8&&(a["border-top-color"]=IDM.hex8ToRgbaString(n.border.top.colors.hex8))),n.border.right.width>0&&(a["border-right-width"]=n.border.right.width+n.border.right.widthUnit,a["border-right-style"]=n.border.right.style,n.border.right.colors.hex8&&(a["border-right-color"]=IDM.hex8ToRgbaString(n.border.right.colors.hex8))),n.border.bottom.width>0&&(a["border-bottom-width"]=n.border.bottom.width+n.border.bottom.widthUnit,a["border-bottom-style"]=n.border.bottom.style,n.border.bottom.colors.hex8&&(a["border-bottom-color"]=IDM.hex8ToRgbaString(n.border.bottom.colors.hex8))),n.border.left.width>0&&(a["border-left-width"]=n.border.left.width+n.border.left.widthUnit,a["border-left-style"]=n.border.left.style,n.border.left.colors.hex8&&(a["border-left-color"]=IDM.hex8ToRgbaString(n.border.left.colors.hex8))),a["border-top-left-radius"]=n.radius.leftTop.radius+n.radius.leftTop.radiusUnit,a["border-top-right-radius"]=n.radius.rightTop.radius+n.radius.rightTop.radiusUnit,a["border-bottom-left-radius"]=n.radius.leftBottom.radius+n.radius.leftBottom.radiusUnit,a["border-bottom-right-radius"]=n.radius.rightBottom.radius+n.radius.rightBottom.radiusUnit;break;case"font":a["font-family"]=n.fontFamily,n.fontColors.hex8&&(a["color"]=IDM.hex8ToRgbaString(n.fontColors.hex8)),a["font-weight"]=n.fontWeight&&n.fontWeight.split(" ")[0],a["font-style"]=n.fontStyle,a["font-size"]=n.fontSize+n.fontSizeUnit,a["line-height"]=n.fontLineHeight+("-"==n.fontLineHeightUnit?"":n.fontLineHeightUnit),a["text-align"]=n.fontTextAlign,a["text-decoration"]=n.fontDecoration;break;case"layout":n.display&&"flex"==n.display?(a["display"]="flex",n.direction&&(a["flex-direction"]=n.direction),n.direction&&(a["align-items"]=n.align),n.direction&&(a["justify-content"]=n.justify)):n.display&&(a["display"]=n.display,a["width"]="100%");break;case"pageMinWidth":n.inputVal&&n.selectVal&&(a["min-width"]=n.inputVal+n.selectVal);break}}this.$nextTick((function(e){if(t.watermarkType&&"none"!=t.watermarkType){var a=this.$replace(t.watermarkFont,{IDM:IDM}),o=this.$replace(t.watermarkFont1,{IDM:IDM});IDM.watermark.set(this.$refs.idm_page_root,t.watermarkZindex,"font"!=t.watermarkType?t.watermarkImg:a,"image"==t.watermarkType?"":o,{fontColor:t.watermarkColor&&IDM.hex8ToRgbaString(t.watermarkColor.hex8),fontSize:"".concat(t.watermarkFontSize,"px"),width:t.watermarkSize,height:t.watermarkSize,rotate:t.watermarkRotate,imgSize:t.watermarkImgSize,imgLeftSize:t.watermarkImgLeftSize,fontLeftSize:t.watermarkFontLeftSize,opacity:t.watermarkOpacity/100,topSize:t.watermarkTopSize})}else IDM.watermark.close(this.$refs.idm_page_root)})),IDM.setStyleToPageHead("PAGE_"+this.PageSettingData.id+"_"+this.routerId,a),t.resourceList&&t.resourceList.length>0&&t.resourceList.forEach((function(e){"js"==e.resourceType?IDM.module.loadJs(IDM.url.getWebPath(e.resourceUrl),!0,(function(){}),{async:e.async,defer:e.defer}):IDM.module.loadCss(IDM.url.getWebPath(e.resourceUrl),!0,(function(){}))})),this.convertThemeListAttrToStyleObject(t)},convertThemeListAttrToStyleObject:function(e){var t=e.themeList;if(t)for(var a=IDM.setting&&IDM.setting.applications&&IDM.setting.applications.themeNamePrefix?IDM.setting.applications.themeNamePrefix:"idm-theme-",o=0;o<t.length;o++){var n=t[o];if(n.key==IDM.theme.getCurrentThemeInfo()){var r={color:n.mainColor?n.mainColor.hex8+" !important":""},s={"border-color":n.mainColor?n.mainColor.hex8:""},c={"background-color":n.mainColor?n.mainColor.hex8:""},d={color:n.minorColor?n.minorColor.hex8:""},l={"border-color":n.minorColor?n.minorColor.hex8:""},u={"background-color":n.minorColor?n.minorColor.hex8:""};IDM.setStyleToPageHead(".".concat(a+n.key," .idm_module_user_defined"),Object(i["a"])({},s)),IDM.setStyleToPageHead(".".concat(a+n.key," .idm_module_user_defined>div"),Object(i["a"])({},c)),IDM.setStyleToPageHead(".".concat(a+n.key," .user-defined-logo-svg,\n          .").concat(a+n.key," .idm_page_user_defined_leftbar svg.user-defined-add-svg,\n          .").concat(a+n.key," .idm_page_user_defined_modal_moduleitem .user-defined-modal-changeseats,\n          .").concat(a+n.key," .idm_page_user_defined_modal_moduleitem .user-defined-modal-replace"),Object(i["a"])({},r)),IDM.setStyleToPageHead(".".concat(a+n.key," .idm-ant-btn:active,\n          .").concat(a+n.key," .idm-ant-btn.active,\n          .").concat(a+n.key," .idm-ant-btn-dashed:active,\n          .").concat(a+n.key," .idm-ant-btn-dashed.active"),Object(i["a"])(Object(i["a"])({},r),s)),IDM.setStyleToPageHead(".".concat(a+n.key," .idm-ant-btn-primary,\n          .").concat(a+n.key," .idm-ant-btn-primary:hover,\n          .").concat(a+n.key," .idm-ant-btn-primary:focus"),Object(i["a"])(Object(i["a"])({},c),s)),IDM.setStyleToPageHead(".".concat(a+n.key," .idm-ant-btn:hover,\n          .").concat(a+n.key," .idm-ant-btn:focus,\n          .").concat(a+n.key," .idm-ant-btn-dashed:hover,\n          .").concat(a+n.key," .idm-ant-btn-dashed:focus"),Object(i["a"])(Object(i["a"])({},d),l)),IDM.setStyleToPageHead(".".concat(a+n.key," .idm-ant-btn-primary:hover,\n          .").concat(a+n.key," .idm-ant-btn-primary:focus"),Object(i["a"])(Object(i["a"])({color:"#FFFFFF"},u),l))}}},renderDialog:function(e){var t=this.getModuleTree(this.PageSettingData.page.layout.children,e);if(!t)return!1;if("firstrender"==t.renderType||"activerender"==t.renderType){if(t.renderLicence=!0,"firstrender"==t.renderType&&t.loaded)return _.cloneDeep(t);this.IDM.broadcast.pageModuleLoadCompleteBefore(this.routerId),this.resetLayoutInnerModuleLoadedStatus(t),this.initModuleTreeToPage(t)}return _.cloneDeep(t)},setShowDialog:function(e){this.dialogObjectList.push(e),$("#router_page_"+this.routerId+" #"+e.packageid).css("display","flex"),this.dialogVisibleStatus=!0,this.dialogIsHideing=!1},closeThisOpenDialog:function(e){var t=this,a=e.customParam?e.customParam:e,o=[];a.targetModule.forEach((function(a){o.push(a.moduleId),t.dialogObjectList.forEach((function(o,n){o.packageid==a.moduleId&&(o.dialogIsHideing=!0,$("#router_page_"+t.routerId+" .idm_dialog_shade_layer_"+a.moduleId).attr("hideing","hideing"),o.layerOption&&o.layerOption.cancel&&o.layerOption.cancel(o),e.isOkEvent&&o.layerOption&&o.layerOption.yes&&o.layerOption.yes(o))}))})),this.dialogObjectList.length<=o.length&&(this.dialogIsHideing=!0);var n=this;n.sendBroadcastMessage({type:"linkageCloseDialog",message:e,rangeModule:o}),setTimeout((function(){a.targetModule.forEach((function(e){if($("#router_page_"+t.routerId+" #"+e.moduleId).css("display","none"),n.destroyDialog(e.moduleId),1!=n.dialogObjectList.length){var a=-1;n.dialogObjectList.forEach((function(t,o){t.packageid==e.moduleId&&(a=o,t.layerOption&&t.layerOption.end&&t.layerOption.end(t))})),a>-1&&n.dialogObjectList.splice(a,1)}else n.dialogObjectList=[]})),0==n.dialogObjectList.length&&(n.dialogVisibleStatus=!1,n.dialogIsHideing=!1)}),500),e.callback&&e.callback()},destroyDialog:function(e){var t=this.getModuleTree(this.PageSettingData.page.layout.children,e);t&&"activerender"==t.renderType&&$("#router_page_"+this.routerId+" #"+e).remove()},showHideNoLoadModule:function(e){this.resetLayoutInnerModuleLoadedStatus(this.PageSettingData.page.layout.children,e),this.initModuleTreeToPage()},initModuleTreeToPage:function(e,t,a,o){var n,r,s,c=this,d=this;if(e=e||d.PageSettingData.page.layout.children,e instanceof Array||(e=[e]),e.forEach((function(t,a){if("dialog"==t.comType&&!0!==t.renderLicence){var o=t.props.compositeAttr.dialogRenderType;if(t.renderType=o,t.renderLicence=!("firstrender"==o||"activerender"==o),!t.renderLicence)return}if(!t.hasLoading&&!n){t.hasLoading=!0,t.loading=!0,n=t;var d=IDM.setting.applications.basicAttributeAuthorizeConfig,l=d.openAuthorize;if(t.props&&t.props.basicAttr&&"show"==t.props.basicAttr.showType||!0===t.againLoad&&t.props&&t.props.basicAttr&&"role"!=t.props.basicAttr.showType)console.log("🚀 ~ file: Page.vue ~ line 1888 ~ moduleData.forEach ~ item.againLoad",t.againLoad);else if(t.props&&t.props.basicAttr&&"hide"==t.props.basicAttr.showType)"load"==t.props.basicAttr.hideType?n.loadAndHide=!0:n=null,t.loaded=!0;else if(!0===l){var u=d.privilege||{},p=-1,g=d.role||{},h=-1,m=d.dept||{},f=-1,v=d.user||{},w=-1;if(!0===u.open&&u.comparisonObject&&t.props&&t.props.basicAttr&&t.props.basicAttr.privilegeList&&t.props.basicAttr.privilegeList.length){var b=IDM.express.replace("@["+u.comparisonObject+"]",Object(i["a"])({IDM:IDM,window:window},c.pageInterfaceResultObject));u.separator&&"array"!=IDM.type(b)&&(b=b.split(u.separator)),p=!1,t.props.basicAttr.privilegeList.forEach((function(e){var t=IDM.express.replace("@["+(u.comparisonKey||"key")+"]",e);(void 0===b||b.indexOf(t)>-1)&&(p=!0)}))}if(!0===g.open&&g.comparisonObject&&t.props&&t.props.basicAttr&&t.props.basicAttr.roleList&&t.props.basicAttr.roleList.length){var y=IDM.express.replace("@["+g.comparisonObject+"]",Object(i["a"])({IDM:IDM,window:window},c.pageInterfaceResultObject));g.separator&&"array"!=IDM.type(y)&&(y=y.split(g.separator)),h=!1,t.props.basicAttr.roleList.forEach((function(e){var t=IDM.express.replace("@["+(g.comparisonKey||"key")+"]",e);(void 0===y||y.indexOf(t)>-1)&&(h=!0)}))}if(!0===m.open&&m.comparisonObject&&t.props&&t.props.basicAttr&&t.props.basicAttr.deptList&&t.props.basicAttr.deptList.length){var I=IDM.express.replace("@["+m.comparisonObject+"]",Object(i["a"])({IDM:IDM,window:window},c.pageInterfaceResultObject));m.separator&&"array"!=IDM.type(I)&&(I=I.split(m.separator)),f=!1,t.props.basicAttr.deptList.forEach((function(e){var t=IDM.express.replace("@["+(m.comparisonKey||"key")+"]",e);(void 0===I||I.indexOf(t)>-1)&&(f=!0)}))}if(!0===v.open&&v.comparisonObject&&t.props&&t.props.basicAttr&&t.props.basicAttr.userList&&t.props.basicAttr.userList.length){var D=IDM.express.replace("@["+v.comparisonObject+"]",Object(i["a"])({IDM:IDM,window:window},c.pageInterfaceResultObject));w=!1;var M=t.props.basicAttr.userList.map((function(e){var t=IDM.express.replace("@["+(v.comparisonKey||"key")+"]",e);return t}));M.indexOf(D)>-1&&(w=!0)}-1===p&&-1===h&&-1===f&&-1===w||-1!==p&&p||-1!==h&&h||-1!==f&&f||-1!==w&&w||(n=null,t.loaded=!0)}if(n)for(var P=0;P<e.length;P++)if("dialog"!=e[P].comType&&a>P?r=e[P]:a<P&&"dialog"!=e[P].comType&&!s&&(s=e[P]),r&&s)break}})),n){var l=n;l.mountComplete=this.moduleMountComplete,l.moduleReload=this.moduleReload;var u=d.createModuleDom(l),p="";if("dialog"==l.comType)p=d.PageSettingData.id,$("#idm_dialog_wrap_"+d.routerId).append(u);else if("absolute"==l.positionMode&&(!t||t&&a&&"0"==a.comId))p=d.PageSettingData.id,$("#idm_hover_layer_wrap").append(u);else if(o)p=o,$("#router_page_"+d.routerId+" #"+p).after(u);else if(t&&a)if(p=a.packageid,p==d.PageSettingData.id)$("#PAGE_"+p+"_"+d.routerId).append(u);else{var g=$("#router_page_"+d.routerId+" #"+p);g.removeClass("drag_container_empty");var h=g.find(">*[idm-ctrl]");if(h.show(),l.containerIndex||"0"==l.containerIndex){var m=h.find(".drag_container[idm-ctrl-id='"+a.id+"'][idm-container-index="+l.containerIndex+"]");if(m&&m.append(u),m&&m.removeClass("drag_container_empty"),!m||m&&0==m.length)return n.nocontainer=!0,d.initModuleTreeToPage(),void(d.pageModuleDataIsLoaded(null,!0)&&d.requestPageCommonInterfaceData())}else r&&h.find("#"+r.packageid).length?h.find("#"+r.packageid).after(u):s&&h.find("#"+s.packageid).length?h.find("#"+s.packageid).before(u):h.append(u)}else a||(r?$("#router_page_"+d.routerId+" #"+r.packageid).after(u):s&&$("#router_page_"+d.routerId+" #"+s.packageid).before(u));l.env="production",l.routerId=this.routerId,l.pageid=this.pageid,d.IDM.module.addModuleToQueue(l)}else e.forEach((function(e){("dialog"!=e.comType||e.renderLicence)&&e.loaded&&e.children&&e.children.length>0&&d.initModuleTreeToPage(e.children,!0,e)})),null==n&&this.pageModuleDataIsLoaded(null,!0,"loaded")&&this.requestPageCommonInterfaceData(!0);return n},pageModuleDataIsLoaded:function(e,t){var a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hasLoading",n=this,i=!0;return e=e||n.PageSettingData.page.layout.children,e instanceof Array||(e=[e]),e.forEach((function(e){("dialog"!=e.comType||e.renderLicence)&&(e[o]||!0===e.nocontainer||(i=!1))})),i&&e.forEach((function(e){("dialog"!=e.comType||e.renderLicence)&&e.children&&e.children.length>0&&i&&(i=a.pageModuleDataIsLoaded(e.children,t,o))})),i},createModuleDom:function(e){var t=this;e.packageid=e.packageid||"component_"+IDM.UUID(),e.id=e.id||e.packageid+"_inner";var a=$("<div />");return a.attr("id",e.packageid),a.attr("idm-com-anchor-id",e.packageid),a.attr("idm-com-id",e.comId),a.attr("idm-com-classid",e.classId),a.attr("idm-com-classname",e.className),e.loadAndHide&&a.attr("style","display:none"),a.addClass("idm_module"),a.addClass(e.packageid),a.append($("<div />").attr("id","idm_"+e.id+this.routerId)),"absolute"==e.positionMode&&t.createHoverLayoutHandle(a,e),a},createHoverLayoutHandle:function(e,t){e.addClass("idm_module_absolute"),this.resetHoverModuleStyleInfo(e,t)},resetHoverModuleStyleInfo:function(e,t){var a=this,o=t.props&&t.props.basicAttr?t.props&&t.props.basicAttr:{},n=o.positionOrigin||"leftTop",i=o.positionWH||"".concat(a.defaultModuleSize.width,".").concat(a.defaultModuleSize.height);i=i.split(",");var r=i.length>0?parseFloat(i[0]):0,s=i.length>1?parseFloat(i[1]):0,c=o.positionXY||"0,0";c=c.split(",");var d=c.length>0?parseFloat(c[0]):0,l=c.length>1?parseFloat(c[1]):0,u=o.zIndex||0,p=0==o.opacity?0:o.opacity||100,g=o.scale||1,h=o.rotateX||0,m=o.rotateY||0,f=o.rotateZ||0,v={};switch(n){case"leftTop":v={left:d+"px",top:l+"px",right:"auto",bottom:"auto",width:r+"px",height:s+"px"};break;case"rightTop":v={left:"auto",top:l+"px",right:d+"px",bottom:"auto",width:r+"px",height:s+"px"};break;case"rightBottom":v={left:"auto",top:"auto",right:d+"px",bottom:l+"px",width:r+"px",height:s+"px"};break;case"leftBottom":v={left:d+"px",top:"auto",right:"auto",bottom:l+"px",width:r+"px",height:s+"px"};break}v["z-index"]=u,v["opacity"]=p/100,v["transform"]="scale(".concat(g,") rotateX(").concat(h,"deg) rotateY(").concat(m,"deg) rotateZ(").concat(f,"deg)"),e&&e.css(v)},getModuleTree:function(e,t){var a,o=this;return e instanceof Array||(e=[e]),e.forEach((function(e){e.packageid==t?a=e:!a&&e.children&&(a=o.getModuleTree(e.children,t))})),a},moduleReload:function(e,t){var a,o=this,n=this.getModuleTree(this.PageSettingData.page.layout.children,e),i=[n];if(t||"0"==t)i=[],n&&n.children&&n.children.forEach((function(e){e.containerIndex==t&&i.push(e)})),a=n;else{var r=n.globalId.split("."),s=r.length<=2?r[0]:r[r.length-2];a=this.getModuleTree(this.PageSettingData.page.layout.children,s)}this.resetLayoutInnerModuleLoadedStatus(i),i&&i.forEach((function(e){$("#router_page_"+o.routerId+" #"+e.packageid).remove()})),this.initModuleTreeToPage(i,!0,a,!1)},moduleMountComplete:function(e){var t=this;this.PageSettingData.page.componentsMap.forEach((function(t){t.packageid==e.packageid&&(t.idmBroadcastMessage=e.idmBroadcastMessage,t.idmSetContextValue=e.idmSetContextValue,t.idmGetContextValue=e.idmGetContextValue)})),console.log("挂载完成，回调返回的数据",e);var a=this.getModuleTree(this.PageSettingData.page.layout.children,e.packageid);if(a.loading=!1,a.loaded=!0,a.children&&a.children.length>0){var o=$("#"+e.packageid);if(0==o.find(":visible").length)var n=0,i=setInterval((function(){n++,0==$("#router_page_"+t.routerId+" #"+e.packageid).find(":visible").length&&n<=20||(clearInterval(i),t.moduleMountCompleteCommon(e))}),5);else setTimeout((function(){t.moduleMountCompleteCommon(e)}),3)}else setTimeout((function(){t.moduleMountCompleteCommon(e)}),3)},moduleMountCompleteCommon:function(e){var t=$("#router_page_"+this.routerId+" #"+e.packageid),a=t.find(">*[idm-ctrl]"),o=a.attr("idm-ctrl"),n=a.attr("idm-ctrl-id"),i=a.attr("id");switch(i||a.attr("id",n),o){case"drag_container":t.addClass("drag_container");break;case"drag_container_inlineblock":t.addClass("drag_container drag_container_inlineblock");break;case"idm_module":break}this.pageModuleDataIsLoaded(null,!0)?this.pageModuleDataIsLoaded(null,!0,"loaded")&&this.requestPageCommonInterfaceData():this.$nextTick((function(){this.initModuleTreeToPage(null,!0,this.PageSettingData.page.layout)}))},initModuleInnerEventHandle:function(e){var t=this,a=$("#router_page_"+t.routerId+" #"+e.packageid),o=a.find(".drag_container[idm-ctrl-id='"+e.id+"'][idm-ctrl-inner]");if(o.length>0){var n=this.getModuleTree(this.PageSettingData.page.layout.children,e.packageid);this.resetLayoutInnerModuleLoadedStatus(n.children),n.children&&n.children.length>0&&(n.children.forEach((function(e){$("#"+e.packageid).remove()})),this.initModuleTreeToPage(n.children,!0,n))}},resetLayoutInnerModuleLoadedStatus:function(e,t){var a=this;e instanceof Array||(e=[e]),e.forEach((function(e){var o=t&&t.indexOf(e.packageid)>-1,n=t;t&&!o||(delete e.loaded,delete e.loading,delete e.hasLoading,o&&(e.againLoad=!0,n=null)),e.children&&e.children.length>0&&a.resetLayoutInnerModuleLoadedStatus(e.children,n)}))}}}),v=f,w=a("0b56"),b=Object(w["a"])(v,g,h,!1,null,null,null),y=b.exports,I={mixins:[u],name:"Preview",components:{Page:y},data:function(){return{pageid:"",PageSettingData:{},dialogVisibleStatus:!1,dialogIsHideing:!1,dialogObjectList:[],drawerVisible:!1,drawerIframeUrl:"",drawerControlSetPanelOption:null,pagePropData:{},AppPageList:[],currentTransitionType:1}},mounted:function(){this.windowResizeEvent((function(){IDM.broadcast.send({type:"pageResize",rangeModule:"",message:IDM.getClientWH()})}))},created:function(){IDM.router.pageDataCachePool=IDM.cachePool(100),this.initCommonRequireJsCss(),this.pageid=this.$route.params.pageid,this.AppPageList.push({routerId:"",pageid:this.pageid,devpreview:"devpreview"==this.pageid,display:!0,mainPage:!0,keep:!0}),this.injectInnerActionToWindow()},methods:{windowResizeEvent:function(e){window.onresize=function(){var t=this;t.resizeFlag&&clearTimeout(t.resizeFlag),t.resizeFlag=setTimeout((function(){e(),t.resizeFlag=null}),100)}},mainPageSettingHandle:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function a(){return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.PageSettingData=e,a.next=3,t.loadPageElement();case 3:case"end":return a.stop()}}),a)})))()},drawerOnClose:function(){this.drawerVisible=!1,this.commonCustomEventFunHandle(null,"drawerCloseFunction")},drawerOnAfterVisibleChange:function(){this.commonCustomEventFunHandle(null,"drawerAfterVisibleChangeFunction")},injectInnerActionToWindow:function(){window.IdmBuiltin_OpenControlSetPanel=this.IdmBuiltin_OpenControlSetPanel,window.IdmBuiltin_CloseControlSetPanel=this.IdmBuiltin_CloseControlSetPanel,window.IdmBuiltin_OpenUrl=this.IdmBuiltin_OpenUrl,window.IdmBuiltin_OpenDialog=this.IdmBuiltin_OpenDialog,window.IdmBuiltin_CloseDialog=this.IdmBuiltin_CloseDialog,window.IdmBuiltin_ShowModule=this.IdmBuiltin_ShowModule,window.IdmBuiltin_HideModule=this.IdmBuiltin_HideModule,window.IdmBuiltin_InitNewPage=this.IdmBuiltin_InitNewPage,window.IdmBuiltin_backPage=this.IdmBuiltin_backPage,window.IdmBuiltin_changePageUserDefinedStatus=this.IdmBuiltin_changePageUserDefinedStatus},IdmBuiltin_changePageUserDefinedStatus:function(e){for(var t=e.routerId||"",a=0;a<this.AppPageList.length;a++){var o=this.AppPageList[a];if(t==o.routerId){var n=this.$refs["idm_page_"+o.routerId];n instanceof Array&&(n=n[0]),n.pageUserDefinedStatusChangeHandle(e.status,e.save)}}},transitionAfterEnter:function(){},IdmBuiltin_InitNewPage:function(e){var t=this;this.AppPageList.push({routerId:e.routerId,pageid:e.next,devpreview:"devpreview"==e.next,mainPage:!1,keep:!0,display:!0,scrollTop:$(window).scrollTop()});var a=!1;if(e.meta&&!1===e.meta.keep)this.AppPageList[this.AppPageList.length-2].keep=!1,a=!0;else if(e.meta&&"memory"===e.meta.keep){this.AppPageList[this.AppPageList.length-2].routerId;a=!0}$(window).scrollTop(0),a||setTimeout((function(){try{t.AppPageList[t.AppPageList.length-2].display=!1}catch(e){}}),600),a&&this.$nextTick((function(){var a=IDM.router.pageDataCachePool.get(e.from);if(a){for(var o=null,n=0;n<a.page.componentsMap.length;n++){var i=a.page.componentsMap[n];if(i.packageid==a.page.layout.packageid){o=i.props.compositeAttr;break}}IDM.router.commonCustomEventFunHandle(o,"pageNoKeepDestroyedFunction",e,t.AppPageList[t.AppPageList.length-2].pageid)}}))},IdmBuiltin_backPage:function(e,t){for(var a=this,o=null,n=0;n<this.AppPageList.length;n++){var i=this.AppPageList[n];i.routerId==e.routerId&&this.AppPageList.splice(n,1),e&&!1===e.meta.keep&&(t&&t.routerId==i.routerId||!t&&i.mainPage)&&(i.keep=!0),(t&&t.routerId==i.routerId||!t&&i.mainPage)&&(o=i,i.display=!0,$(window).scrollTop(i.scrollTop))}this.$nextTick((function(){var n=IDM.router.pageDataCachePool.get(e.next),i=null;if(n){for(var r=0;r<n.page.componentsMap.length;r++){var s=n.page.componentsMap[r];if(s.packageid==n.page.layout.packageid){i=s.props.compositeAttr;break}}IDM.router.commonCustomEventFunHandle(i,"pageBackDestroyedFunction",e,e.next)}if(IDM.broadcast.unRegisterModule(e.routerId),n=IDM.router.pageDataCachePool.get(o.pageid),n){for(var c=0;c<n.page.componentsMap.length;c++){var d=n.page.componentsMap[c];if(d.packageid==n.page.layout.packageid){i=d.props.compositeAttr;break}}IDM.router.commonCustomEventFunHandle(i,"pageActivatedFunction",t,o.pageid),a.sendBroadcastMessage({type:"pageActivated",message:o},o.routerId)}}))},IdmBuiltin_OpenControlSetPanel:function(e){var t=this.pagePropData.moduleControlCenterSettingUrl;if(t){if(t+=-1==t.indexOf("?")?"?":"&",e&&e.controlSetPanelOption){if(!(e.controlSetPanelOption.param&&e.controlSetPanelOption.param.marketModuleId&&e.controlSetPanelOption.param.pageId&&e.controlSetPanelOption.param.packageid))return;Object.keys(e.controlSetPanelOption.param).forEach((function(a,o){o>0&&(t+="&"),t=t+a+"="+e.controlSetPanelOption.param[a]}))}this.drawerIframeUrl=IDM.url.getWebPath(t),this.drawerControlSetPanelOption=e.controlSetPanelOption||null,this.drawerVisible=!0,this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.success&&this.drawerControlSetPanelOption.success(e.controlSetPanelOption.controlSetPanelId)}},IdmBuiltin_CloseControlSetPanel:function(e){if(e&&e.innerClose||e&&e.controlSetPanelOption&&e.controlSetPanelOption.controlSetPanelId&&this.drawerControlSetPanelOption&&e.controlSetPanelOption.controlSetPanelId==this.drawerControlSetPanelOption.controlSetPanelId)switch(this.drawerOnClose(),e.actionType){case"close":case"other":this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.other&&this.drawerControlSetPanelOption.other();break;case"commit":this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.yes&&this.drawerControlSetPanelOption.yes();break;case"reset":this.drawerControlSetPanelOption&&this.drawerControlSetPanelOption.reset&&this.drawerControlSetPanelOption.reset();break}},IdmBuiltin_OpenUrl:function(e){var t=e.customParam?e.customParam:e;window.open(IDM.url.getWebPath(t.openUrl),t.openName,t.openFeatures)},IdmBuiltin_OpenDialog:function(e){var t=this,a=e.customParam?e.customParam:e,o=e.routerId||"",n=[],i=0,r=[];if(a.targetModule.forEach((function(a){n.push(a.moduleId);for(var s=0;s<t.AppPageList.length;s++){var c=t.AppPageList[s];if(o==c.routerId){var d=t.$refs["idm_page_"+c.routerId];d instanceof Array&&(d=d[0]);var l=d.renderDialog(a.moduleId);!1!==l&&(r.push(d),l.dialogIsHideing=!1,e.layerOption&&(l.layerOption=e.layerOption),t.dialogObjectList.push(l),i++,d.setShowDialog(l))}}})),0!=i){var s=this;this.$nextTick((function(){setTimeout((function(){s.sendBroadcastMessage({type:"linkageOpenDialog",message:e,rangeModule:n})}),5)})),e.callback&&e.callback()}},IdmBuiltin_CloseDialog:function(e){for(var t=e.routerId||"",a=0;a<this.AppPageList.length;a++){var o=this.AppPageList[a];if(t==o.routerId){var n=this.$refs["idm_page_"+o.routerId];n instanceof Array&&(n=n[0]),n.closeThisOpenDialog(e)}}},IdmBuiltin_ShowModule:function(e){var t=e.customParam?e.customParam:e,a=e.routerId||"",o=[],n=[];if(t.targetModule.forEach((function(e){o.push(e.moduleId);var t=$((a?"#router_page_"+a+" ":"")+"#"+e.moduleId);t&&0==t.length?n.push(e.moduleId):t.show()})),n.length){var i=this.$refs["idm_page_"+a];i&&(i instanceof Array&&(i=i[0]),i.showHideNoLoadModule(n))}this.sendBroadcastMessage({type:"linkageShowModule",message:e,rangeModule:o}),e.callback&&e.callback()},IdmBuiltin_HideModule:function(e){var t=e.customParam?e.customParam:e,a=e.routerId||"",o=[];t.targetModule.forEach((function(e){o.push(e.moduleId),$((a?"#router_page_"+a+" ":"")+"#"+e.moduleId).hide()})),this.sendBroadcastMessage({type:"linkageHideModule",message:e,rangeModule:o}),e.callback&&e.callback()},weixinEventHandle:function(e){var t=this,a=this,o=e.compositeAttr;if(o.switchWeixinJSSDK){var n=IDM.setting.weixin.requireJsCss;if(n&&"string"==IDM.type(n)&&(n=[n]),n&&IDM.setting.weixin.signatureUrl){var r=[];n.forEach((function(e){return r.push(IDM.url.getWebPath(e))})),IDM.http.importFiles(r).then((function(){console.log("加载微信requireJsCss文件完成",r),IDM.http.get(IDM.setting.weixin.signatureUrl,{url:window.location.href.split("#")[0]}).then((function(e){var n=e.data;"200"==n.code&&n.data&&(n=n.data),wx.config({beta:!0,debug:!0===IDM.setting.weixin.debug,appId:n.appId,timestamp:n.timestamp,nonceStr:n.nonceStr,signature:n.signature,jsApiList:IDM.setting.weixin.jsApiList}),wx.ready((function(){var e=o.weixinReadyFunction;e&&e.forEach((function(e){try{window[e.name]&&window[e.name].call(t,Object(i["a"])(Object(i["a"])({},a.commonParam()),{},{customParam:e.param,_this:t}))}catch(o){}}))})),wx.error((function(e){var n=o.weixinErrorFunction;n&&n.forEach((function(o){try{window[o.name]&&window[o.name].call(t,Object(i["a"])(Object(i["a"])({},a.commonParam()),{},{customParam:o.param,_this:t,error:e}))}catch(n){}}))}))})).catch((function(e){console.log("微信授权出错",e)}))})).catch((function(e){console.log("加载微信requireJsCss文件出错")}))}}},webSocketEventHandle:function(e){var t=this,a=e.compositeAttr;a.switchWebSocket&&(a.websocketInitName&&"function"==typeof window[a.websocketInitName]&&window[a.websocketInitName](),a.websocketOpenEvent&&(window[a.websocketOpenEvent]=function(){var e=this,o=a.websocketOpenFunction;o&&o.forEach((function(a){try{window[a.name]&&window[a.name].call(e,Object(i["a"])(Object(i["a"])({},t.commonParam()),{},{customParam:a.param,_this:e}))}catch(o){}}))}),a.websocketMessageEvent&&(window[a.websocketMessageEvent]=function(e){var o=this;IDM.broadcast.send({type:"websocket",rangeModule:"",globalSend:!0,message:e});var n=a.websocketMessageFunction;n&&n.forEach((function(a){try{window[a.name]&&window[a.name].call(o,Object(i["a"])(Object(i["a"])({},t.commonParam()),{},{customParam:a.param,msgData:e,_this:o}))}catch(n){}}))}))},initCommonRequireJsCss:function(){if(IDM.setting.applications.commonRequireJsCss&&IDM.setting.applications.commonRequireJsCss instanceof Array){var e=[];IDM.setting.applications.commonRequireJsCss.forEach((function(t){return e.push(IDM.url.getWebPath(t))}));try{IDM.http.importFiles(e).then((function(){console.log("加载commonRequireJsCss文件完成",IDM.setting.applications.commonRequireJsCss)})).catch((function(e){console.log("加载commonRequireJsCss文件出错")}))}catch(t){console.error("加载commonRequireJsCss文件脚本内部出错")}}},initPulltorefreshPlugin:function(){var e=this,t=this.PageSettingData.page.layout.props.compositeAttr;t.openPulltorefresh?IDM.http.importFiles([IDM.url.getWebPath("~/lib/pulltorefreshjs/index.umd.min.js")]).then((function(){console.log("加载pulltorefreshjs文件完成");try{var t=PullToRefresh.init({mainElement:"body",instructionsPullToRefresh:"下拉刷新",instructionsReleaseToRefresh:"松手刷新",instructionsRefreshing:"刷新中",onRefresh:function(){e.initPulltorefreshHandle()},shouldPullToRefresh:function(){return IDM.page.getPullToRefreshStatus()&&!$(window).scrollTop()}});IDM.page.startPullToRefresh(t)}catch(a){console.log("加载pulltorefreshjs出错",a)}})).catch((function(e){console.error("加载pulltorefreshjs文件出错",e)})):IDM.page.stopPullToRefresh()},initPulltorefreshHandle:function(){var e=this,t=this.AppPageList[this.AppPageList.length-1].pageid,a=this.AppPageList[this.AppPageList.length-1].routerId,o=IDM.router.pageDataCachePool.get(t)||this.PageSettingData,n=o.page.layout.props.compositeAttr;switch(n.pulltorefreshType){case"page":window.location.reload();break;case"data":try{var i=this.$refs["idm_page_"+a];i instanceof Array&&(i=i[0]),i.fetchUserInfo(n,!0,!0,!0)}catch(s){}break;case"custom":var r=n.pulltorefreshFunction;r&&r.forEach((function(t){window[t.name]&&window[t.name].call(e,{customParam:t.param})}));break}},initVconsolePlugin:function(){var e=this.PageSettingData.page.layout.props.compositeAttr,t=e.showVconsole;t&&IDM.http.importFiles([IDM.url.getWebPath("~/lib/vconsole/vconsole.min.js")]).then((function(){new window.VConsole})).catch((function(e){console.log("加载vconsole插件出错")}))},initLoadbarResource:function(){var e=this.PageSettingData.page.layout.props.compositeAttr;if(e.openPreviewLoadStyle){var t=e.previewLoadColor;t&&t.hex8&&document.documentElement.style.setProperty("--idmPreviewLoadColor",IDM.hex8ToRgbaString(t.hex8)),IDM.http.importFiles([IDM.url.getWebPath("~/lib/pace/pace.min.js"),IDM.url.getWebPath("~/lib/pace/minimal.css")]).then((function(){idmPace.stop(),Pace.start()})).catch((function(e){console.log("加载进度条文件出错")}))}else idmPace.stop()},loadPageElement:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.pagePropData=e.PageSettingData.page.layout.props.compositeAttr,e.initLoadbarResource(),e.initVconsolePlugin(),e.webSocketEventHandle(e.PageSettingData.page.layout.props),e.weixinEventHandle(e.PageSettingData.page.layout.props),e.initPulltorefreshPlugin();case 6:case"end":return t.stop()}}),t)})))()}},watch:{$route:function(e,t){IDM.router.idmInnerRouterEvent?IDM.router.idmInnerRouterEvent=!1:(console.log("🚀 ~ file: Preview.vue ~ line 861 ~ $route ~ from",t),console.log("🚀 ~ file: Preview.vue ~ line 861 ~ $route ~ to",e),IDM.router.innerRouterChangeEvent(e,t))}}},D=I,M=(a("0a1c"),Object(w["a"])(D,o,n,!1,null,null,null));t["default"]=M.exports},d34b:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("77b0");function o(e,t,a,o,n,i,r){try{var s=e[i](r),c=s.value}catch(d){return void a(d)}s.done?t(c):Promise.resolve(c).then(o,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var r=e.apply(t,a);function s(e){o(r,n,i,s,c,"next",e)}function c(e){o(r,n,i,s,c,"throw",e)}s(void 0)}))}}},dff4:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("129d"),a("5c23"),a("77b0"),a("5e35"),a("3206"),a("dc2a"),a("0ab1"),a("fce2"),a("9396"),a("89b7"),a("e984"),a("aa56"),a("6687"),a("3941"),a("ba13");var o=a("2396");function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
n=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function d(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(k){d=function(e,t,a){return e[t]=a}}function l(e,t,a,o){var n=t&&t.prototype instanceof g?t:g,i=Object.create(n.prototype),r=new _(o||[]);return i._invoke=function(e,t,a){var o="suspendedStart";return function(n,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===n)throw i;return C()}for(a.method=n,a.arg=i;;){var r=a.delegate;if(r){var s=D(r,a);if(s){if(s===p)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===o)throw o="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);o="executing";var c=u(e,t,a);if("normal"===c.type){if(o=a.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(o="completed",a.method="throw",a.arg=c.arg)}}}(e,a,r),i}function u(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var p={};function g(){}function h(){}function m(){}var f={};d(f,r,(function(){return this}));var v=Object.getPrototypeOf,w=v&&v(v(S([])));w&&w!==t&&a.call(w,r)&&(f=w);var b=m.prototype=g.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,r,s,c){var d=u(e[i],e,r);if("throw"!==d.type){var l=d.arg,p=l.value;return p&&"object"==Object(o["a"])(p)&&a.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(p).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(d.arg)}var i;this._invoke=function(e,a){function o(){return new t((function(t,o){n(e,a,t,o)}))}return i=i?i.then(o,o):o()}}function D(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator["return"]&&(t.method="return",t.arg=void 0,D(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=u(a,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var n=o.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function S(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,n=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=m,d(b,"constructor",m),d(m,"constructor",h),h.displayName=d(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,d(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(I.prototype),d(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,a,o,n,i){void 0===i&&(i=Promise);var r=new I(l(t,a,o,n),i);return e.isGeneratorFunction(a)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},y(b),d(b,c,"Generator"),d(b,r,(function(){return this})),d(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var o=t.pop();if(o in e)return a.value=o,a.done=!1,a}return a.done=!0,a}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(a,o){return r.type="throw",r.arg=e,t.next=a,o&&(t.method="next",t.arg=void 0),!!o}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],r=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var r=i?i.completion:{};return r.type=e,r.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),P(a),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var o=a.completion;if("throw"===o.type){var n=o.arg;P(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:S(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),p}},e}}}]);
//# sourceMappingURL=preview.7920da6c.js.map